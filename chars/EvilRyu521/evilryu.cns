;-------------------------------;
; Evil Ryu by Reu and KingTigre ;
;   http://www.reubenkee.com/   ;
;-------------------------------;

[Data]
life = 1000
power = 5000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 60
airjuggle = 25
sparkno = 0
guard.sparkno = 40; S9300
KO.echo = 0
volume = 255
IntPersistIndex = 30
FloatPersistIndex = 0

[Size]
xscale = 1
yscale = 1
ground.back = 17
ground.front = 17
air.back = 13
air.front = 13
height = 60
attack.dist = 160
proj.attack.dist = 90
proj.doscale = 0
head.pos = -7, -79
mid.pos = -4, -51

[Velocity]
walk.fwd = 3.3
walk.back = -3
run.fwd = 7.5, 0
run.back = -8.0, 0
jump.neu = 0, -9.5
jump.back = -3.4
jump.fwd = 3.4
runjump.back = -5.1, -10.5
runjump.fwd = 5.1, -10.5
airjump.neu = 0, -9.5
airjump.back = -3.55, -9.1
airjump.fwd = 3.5, -9.1

[Movement]
airjump.num = 0
airjump.height = 40
yaccel = 0.45
stand.friction = 0.85
crouch.friction = 0.82
stand.friction.threshold = 1.0
crouch.friction.threshold = 1.0
air.gethit.groundlevel = 25
air.gethit.groundrecover.ground.threshold = -20
air.gethit.groundrecover.groundlevel = 10
air.gethit.airrecover.threshold = -1
air.gethit.airrecover.yaccel = 0.35
air.gethit.trip.groundlevel = 15
down.bounce.offset = 0, 20
down.bounce.yaccel = 0.4
down.bounce.groundlevel = 12
down.friction.threshold = 0.5

[Quotes]
victory1 = "My fists thirst for more blood!"
victory2 = "Weaklings cannot grasp this power! True power!"
victory3 = "Power warrants destruction. You cannot fight destiny!"
victory4 = "The path of the fist... ends in blood!"
victory5 = "You made for a nice lightning pole!"
victory6 = "What lies beyond your fist? Not your future, but your grave!"
victory7 = "The path of a true warrior is littered with bones..."
victory8 = "Years of restraint... wasted."
victory9 = "No mercy for the weak!"
victory10 = "I'm a edit of a edit. Confused yet fool!?"
victory11 = "Absolute destruction is the only perfection possible!"
victory12 = "I see nothing but the destruction that I create!"
victory13 = "It is too late to go back, now..."
victory14 = "Nothing that stands before me will survive!"
victory15 = "The darkness seeks out those who need it the most!"
victory16 = "There is no place for the weak to exist!"
victory17 = "To lose is to prove that you are worthy to perish!"
victory18 = "Your life is not the only thing that you are risking in battle!"
victory19 = "BLOOD... IT'S CALLING FOR ME...!"
victory20 = "I smell blood!"
victory21 = "You have a few more breaths before your dead!"
victory22 = "Another fool wasting the're life"
victory23 = "You shall make a good drink!"
victory24 = "Run before I destroy you!"
victory25 = "......I have nothing to say to you...."
victory26 = "You can hear them, can you not? The voices of the dead welcome you."
victory27 = "The only ones who call for me are the voices of the dead."
victory28 = "Fool. You were dead from the beginning"
victory29 = "I will destroy anything I see!"
victory30 = "Sometimes I wonder how my GI changes from white to black.But then again none of that matters."
victory31 = "To Hell with you!"
;==============================================================================================
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0, 0

[State 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


;==============================================================================================
[Statedef 180]
type = S
ctrl = 0

[State 180, Quote]
type = victoryquote
trigger1 = 1
value = -1

[State 1]
type = AfterImageTime
trigger1 = time = 0
time = 0

[State 180]
type = changestate
trigger1 = command="hold_x" || command="hold_y" || command="hold_z"
value = ifelse(command = "hold_z", 183, ifelse(command = "hold_y", 182, 181))

[State 180]
type = changestate
trigger1 = command="hold_a" || command="hold_b" || command="hold_c"
value = ifelse(command = "hold_c", 183, ifelse(command = "hold_b", 182, 181))

[State 1]
type = ChangeState
trigger1 = 1
value = ifelse(random<333, 181, ifelse(random<500, 182, 183))


;==============================================================================================
[Statedef 181]
type = S
ctrl = 0
anim = 181
sprpriority = -4

[State 1]
type = turn
trigger1 = facing = 1 && pos x >= 100
trigger2 = facing = -1 && pos x <= -100

[State 2] 
type = AssertSpecial
trigger1 = time < 100
flag = roundnotover


;==============================================================================================
[Statedef 182]
type = S
ctrl = 0
anim = 182

[State groundshockwave] 
type = explod
trigger1 = animelem = 4
anim = 10050
pos = -52, 0
sprpriority = -5
postype = p1
ownpal = 1
scale = 1.0, 0.5

[State 4]
type = PlaySnd
trigger1 = animelem = 4
value = 1, 0	
volume = 255

[State 5]
type = EnvShake
trigger1 = animelem = 4
persistent = 0
time = 20
ampl = -5
freq = 100
phase = 10

[State 2] 
type = AssertSpecial
trigger1 = time < 100
flag = roundnotover


;==============================================================================================
[Statedef 183]
type = S
ctrl = 0
anim = 183
sprpriority = -4

[State 5]
type = PlaySnd
trigger1 = time = 10
value = 3, 7

[State 2] 
type = AssertSpecial
trigger1 = time < 100
flag = roundnotover


;==============================================================================================
[Statedef 190]
type = S
ctrl = 0
velset = 0, 0

[State 0]
type = Changestate
triggerall = numenemy
triggerall= !roundsexisted && !(enemy, roundsexisted)
triggerall= !(teammode = simul) && !(enemy, teammode = simul)
trigger1 = enemy, name = "Evil Ken" && enemy, authorname = "Reu"
trigger2 = numenemy >= 2
trigger2 = enemy(1), name = "Evil Ken" && enemy(1), authorname = "Reu"
value = 11060

[State 1]
type = ChangeState
trigger1 = 1
value = ifelse(random<333, 191, ifelse(random<500, 192, 193))

;===============================================================================================
[Statedef 191]
type = S
movetype = I
velset = 0, 0
anim = 801

[State 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 801

[State 2]
type = AssertSpecial
trigger1 = 1
flag = Intro


[State 4]
type = PlaySnd
trigger1 = animelem = 50
value = 20, 0	
channel = 0

[State 5]
type = PlaySnd
trigger1 = animelem = 4
value = 20, 1

[State 5]
type = PlaySnd
trigger1 = animelem = 135
value = 20, 2

[State 5]
type = ChangeState
trigger1 = time = 1400
value = 0

[State 6]
type = ChangeAnim
trigger1 = RoundState = 0
value = 802




;==============================================================================================
[Statedef 192]
type = S
movetype = I
velset = 0, 0
anim = 192

[State 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 192

[State 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State Sound]
type = PlaySnd
trigger1 = animelem = 3
value = 1, 1
channel = 0

[State 5]
type = ChangeState
trigger1 = Animtime = 0
value = 0


;==============================================================================================
[Statedef 193]
type = S
movetype = I
velset = 0, 0
anim = 193

[State 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 193

[State 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State Sound]
type = PlaySnd
trigger1 = time = 10
value = 3, 8
channel = 0

[State 5]
type = ChangeState
trigger1 = Animtime = 0
value = 0


;==============================================================================================
[Statedef 195]
type = S
movetype = I
velset = 0, 0
anim = 195

[State 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 195

[State 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 9]
type = ChangeState
trigger1 = animtime = 0
value = 0
;==============================================================================================
[Statedef 11060]
type = S
movetype = I
velset = 0, 0
anim = 9999

[State 1]
type = envcolor
trigger1 = time = [0, 500]
value = 0, 0, 0
under = 1
ignorehitpause = 1
persistent = 1
time = 5

[State 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 9]
type = ChangeState
trigger1 = numenemy
trigger1 = enemynear, stateno = 11061
value = 11061

[State 9]
type = ChangeState
trigger1 = numenemy
trigger1 = enemynear, stateno = 11062
value = 11062

[State 9]
type = ChangeState
trigger1 = numenemy
trigger1 = enemynear, stateno = 11063
value = 11063

[State 9]
type = ChangeState
trigger1 = numenemy
trigger1 = enemynear, stateno = 11064
value = 11064

[State 1]
type = ChangeState
trigger1 = numenemy
trigger1 = enemynear, stateno != 11060 && time > 5
value = 191

[State 9]
type = ChangeState
trigger1 = animtime = 0
value = 0


;==============================================================================================
[Statedef 11061]
type = S
movetype = I
velset = 0, 0
anim = 11061
sprpriority = 0

[State Camera]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0, 0

[State Camera]
type = helper
trigger1 = !numhelper(9998)
helpertype = normal
stateno = 9998
ID = 9998
name = "Camera"
postype = p1

[State Randomizer]
type = Varset
trigger1 = time = 0
v = 1
value = ceil(pos x)

[State Randomizer]
type = posset
trigger1 = time = 0 && var(1) < 0
x = -50

[State Randomizer]
type = posset
trigger1 = time = 0 && var(1) > 0
x = 50

[State Randomizer]
type = posadd
trigger1 = time > 110 && var(1) < 0 && (pos x > var(1))
x = -5

[State Randomizer]
type = posadd
trigger1 = time > 110 && var(1) > 0 && (pos x < var(1))
x = -5

[State Pos]
type = posset
triggerall = time > 110 && numhelper(9998)
trigger1 = facing = 1 && (pos x < helper(9998), pos x)
trigger2 = facing = -1 && (pos x > helper(9998), pos x)
x = ceil(helper(9998), pos x)
y = 0

[State 5]
type = PlaySnd
trigger1 = time = 85
value = 2, 2

[State 5]
type = Explod
trigger1 = animelem = 6
Anim = 9400
scale = 0.7, 0.7
pos = 37, -78
ontop = 1

[State dust]
type = MakeDust
trigger1 = time = [110, 120]
pos = -10, -2
spacing = 5

[State 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 9]
type = ChangeState
trigger1 = animtime = 0
value = 0


;==============================================================================================
[Statedef 11062]
type = S
movetype = I
velset = 0, 0
anim = 11062

[State skin fadeout]
type = PalFx
trigger1 = time < 60
add = -255, -255, -255
time = 2

[State skin fadeout]
type = PalFx
trigger1 = time = [60, 220]
add = -255 + ceil((time - 60) * 1.59), -255 + ceil((time - 60) * 1.59), -255 + ceil((time - 60) * 1.59)
time = 2

[State Randomizer]
type = varrandom
trigger1 = time = 0
v = 1
range = 0, 75

[State 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 9]
type = ChangeState
trigger1 = animtime = 0
value = 0


;==============================================================================================
[Statedef 11063]
type = S
movetype = I
velset = 0, 0
anim = 11063

[State Camera]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0, 0

[State Camera]
type = helper
trigger1 = !numhelper(9998)
helpertype = normal
stateno = 9998
ID = 9998
name = "Camera"
postype = p1

[State Randomizer]
type = Varset
trigger1 = time = 0
v = 1
value = ceil(pos x)

[State Randomizer]
type = posset
trigger1 = time = 0 && var(1) < 0
x = -94

[State Randomizer]
type = posset
trigger1 = time = 0 && var(1) > 0
x = 94

[State Randomizer]
type = posadd
trigger1 = time = [110, 155]
x = -0.1

[State Randomizer]
type = posadd
trigger1 = time = [155, 200]
x = 0.1

[State 5]
type = PlaySnd
trigger1 = time = [104, 204]
trigger1 = timemod = 20, 19
value = 2, 7

[State FireB]
type = Helper
trigger1 = time = [104, 204]
trigger1 = timemod = 10, 9
ignorehitpause = 1
stateno = ifelse(random>500, 94061, 94062)
id = 2502
size.xscale = 0.4
size.yscale = 0.5
postype = p1
pos = 76, -69
sprpriority = 2
ownpal = 1

[State 5]
type = explod
trigger1 = time = [104, 204]
trigger1 = timemod = 10, 9
anim = 23010
pos = 76, -69
ontop = 1
persistent = 1
bindtime = -1
shadow = 0, 50, 100
removeongethit = 1
scale = 0.8, 0.8

[State SuperLight] 
type = Explod
trigger1 = time = [104, 204]
trigger1 = timemod = 4, 3
anim = 1031
pos = -10, 0
postype = p1
sprpriority = 4
supermovetime = -1
ownpal = 1
removeongethit = 1
scale = 1, 0.7

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 11
helpertype = normal
name = "leg fire"
pos = 0, -59
postype = p1
stateno =10610
ownpal = 1

[State 3]
type = envcolor
trigger1 = animelem = 11
time = 3
value = 255, 255, 255

[State 3]
type = BGPalfx
trigger1 = animelem = 11
time = 20
add = 255, 255, 255
sinadd = -255, -255, -255, 80

[State 5]
type = EnvShake
trigger1 = animelem = 11
persistent = 1
time = 53
ampl = -5
freq = 100
phase = 1

[State 5]
type = PlaySnd
trigger1 = animelem = 11
value = 2, 9

[State 5]
type = PlaySnd
trigger1 = time = 59
value = 0, 7
freqmul = 0.5

[State 5]
type = PlaySnd
trigger1 = time = 59
value = 0, 7
freqmul = 0.8

[State Wind effect] 
type = Explod
trigger1 = time =59
anim = 9402
scale = 0.7, 0.7
pos = 0, 0
sprpriority = 0
postype = p1
supermovetime = -1
bindtime = 18
ownpal = 1
pausemovetime = 9999

[State 3]
type = BGPalfx
trigger1 = time = 59
time = 50
add = 100, 100, 100
sinadd = -100, -100, -100, 200

[State SuperLight] 
type = Explod
trigger1 = time = 104
anim = 1031
pos = -15, 0
postype = p1
sprpriority = 4
supermovetime = -1
ownpal = 1
removeongethit = 1
scale = 1, 0.7

[State SuperLight] 
type = Explod
trigger1 = time = [102, 108]
trigger1 = gametime%2 = 1
anim = 1032
pos = 86, -65
postype = p1
sprpriority = 4
supermovetime = -1
ownpal = 1
removeongethit = 1
scale = 0.4, 0.3
vel = -3, 0

[State hadouken hit helper]
type = Helper
trigger1 = time = 102
helpertype = normal
name = "leg fire"
pos = 86, -75
postype = p1
stateno =1068
ownpal = 1

[State 9]
type = Changeanim
trigger1 = time = 204
value = 11163

[State Pos]
type = posset
trigger1 = time = 204 && numhelper(9998)
x = ceil(helper(9998), pos x)
y = 0

[State 3]
type = envcolor
trigger1 = time = 204
time = 5
value = 255, 255, 255

[State 3]
type = BGPalfx
trigger1 = time = 204
time = 40
add = 255, 255, 255
sinadd = -255, -255, -255, 160

[State 5]
type = PlaySnd
trigger1 = time = 204
value = 2, 8

[State 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 9]
type = ChangeState
trigger1 = animtime = 0
value = 0


;==============================================================================================
[Statedef 11064]
type = A
movetype = I
velset = 0, 0
anim = 11064
sprpriority = 0

[State Camera]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0, 0

[State Camera]
type = helper
trigger1 = !numhelper(9998)
helpertype = normal
stateno = 9998
ID = 9998
name = "Camera"
postype = p1

[State Randomizer]
type = Varset
trigger1 = time = 0
v = 1
value = ceil(pos x)

[State X-ism]
type = PlaySnd
trigger1 = time = 50
value = 5, 2
volume = 255

[State 3]
type = Posadd
trigger1 = time = 50
Y = -350

[State 3]
type = Veladd
trigger1 = time > 57
y = 0.64

[State 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 3]
type = Posadd
trigger1 = pos y >= 17
X = -10

[State 9]
type = ChangeState
trigger1 = pos y >= 17
value = 11164
ctrl = 0


;==============================================================================================
[Statedef 11164]
type = S
movetype = I
physics = C
anim = 3901
velset = 0, 0
sprpriority = -2

[State Camera]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0, 0

[State 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State TimeCountVar]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State TimeCount]
type = VarAdd
trigger1 = movecontact
v = 3
value = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -2, -3

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 36
range = 4, 10

[State FireB]
type = Explod
trigger1 = random <= 800 && movecontact
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 70+3*var(3), -10
random = 35, 10
sprpriority = 5
ownpal = 1
vel = var(36), (var(35))
scale = 0.1, 0.75
accel = -(var(36))/3, (var(35))/10

[State Randomizer4]
type = varrandom
trigger1 = 1
v = 37
range = -2, -3

[State Randomizer5]
type = varrandom
trigger1 = 1
v = 38
range = -4, -10

[State FireB]
type = Explod
trigger1 = random <= 800 && movecontact
persistent = 1
anim = ifelse(random>500, 12213, 12216)
id = 12213
postype = p1
pos = -30-3*var(3), -10
random = 35, 10
sprpriority = 5
ownpal = 1
vel = var(38), (var(37))
scale = 0.1, 0.75
accel = -(var(38))/4, (var(37))/10

[State 5]
type = PlaySnd
trigger1 = time = 0
value = 5, 3
volume = 255

[State 5]
type = PlaySnd
trigger1 = time = 0
value = 5, 3
volume = 255
freqmul = 1.2

[State 5]
type = PlaySnd
trigger1 = time = 0
value = 5, 3
volume = 255

[State 5]
type = EnvShake
trigger1 = time = 0
persistent = 0
time = 20
ampl = -10
freq = 150
phase = 15

[State SuperLight] 
type = Explod
trigger1 = time = 0
ignorehitpause = 1
anim = 9402
persistent = 0
pos = 20, 0
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
ownpal = 1
pausemovetime = 9999
ID = 9402

[State 0]
type = ModifyExplod
trigger1 = 1
ID = 9402
scale = 1 + (0.025*var(3)), 1

[State groundshockwave] 
type = explod
trigger1 = time = 0
anim = 10030
pos = 15, 2
sprpriority = 3
postype = p1
supermovetime = -1
ownpal = 1

[State groundshockwave] 
type = explod
trigger1 = time = 0
anim = 10030
pos = 15, 2
sprpriority = 3
postype = p1
supermovetime = -1
ownpal = 1

[State FireB]
type = Explod
triggerall = numexplod(2500) < 2
trigger1 = movehit
trigger2 = numhelper(3)
trigger2 = helper(3), movehit
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numexplod(2500) < 2
trigger1 = movehit
trigger2 = numhelper(3)
trigger2 = helper(3), movehit
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 3]
type = PosSet
trigger1 = time = 0
y = 0

[State 1]
type = AfterImageTime
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = animtime = 0
v = 28
value = 0

[State 0]
type = Varset
trigger1 = Animtime = 0
v = 28
value = 0

[State Pos]
type = posset
trigger1 = Animtime = 0 && numhelper(9998)
x = ceil(helper(9998), pos x)
y = 0

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0


;==============================================================================================
[Statedef 196]
type = S
movetype = I
physics = S
anim = 196
velset = 0
ctrl = 0
poweradd = 0

[State 5]
type = PlaySnd
trigger1 = time = 15
value = 1, 0

[State 5]
type = PlaySnd
trigger1 = time = 15
value = 1, 1
channel = 0
channel = 0

[State groundshockwave] 
type = explod
trigger1 = time = 16
anim = 10050
pos = -52, 0
sprpriority = -5
postype = p1
ownpal = 1
scale = 1.0, 0.5

[State 5]
type = EnvShake
trigger1 = time = 16
persistent = 0
time = 20
ampl = -5
freq = 100
phase = 10

[State Defense Bonus]
type = varadd
trigger1 = time = 60
var(44) = 1

[State 5]
type = changestate
trigger1 = time >= 60
value = 0
ctrl = 1


;==============================================================================================
[Statedef 11050]
type = S
movetype = I
physics = S
anim = 196
velset = 0
ctrl = 0
poweradd = 0

[State Boundless]
type = varset
trigger1 = time = 0
v = 18
value = 1

[State Flash]
type = palfx
trigger1 = !time
add = 255, 255, 255
sinadd = -255, -255, -255, 64
time = 16

[State 5]
type = PlaySnd
trigger1 = time = 13
value = 1, 0

[State 5]
type = PlaySnd
trigger1 = time = 15
value = 1, 1
channel = 0

[State groundshockwave] 
type = explod
trigger1 = time = 16
anim = 10050
pos = -52, 0
sprpriority = -5
postype = p1
ownpal = 1
scale = 1.0, 0.5

[State 5]
type = EnvShake
trigger1 = time = 16
persistent = 0
time = 20
ampl = -5
freq = 100
phase = 10

[State 5]
type = changestate
trigger1 = time >= 60
value = 0
ctrl = 1


;==============================================================================================
[Statedef 21]
type = S
physics = S
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = 1
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && Animtime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && Animtime = 0
value = 21


;==============================================================================================
[Statedef 22]
type = S
physics = S
anim = 40
ctrl = 0
facep2 = 1
sprpriority = 1

[State 40, 4]
type = ChangeState
trigger1 = time = 0 && !AIlevel
value = 41

[State Super D]
type = Afterimage
triggerall = var(10) = 0 && !AILevel
trigger1 = time = 0
time = 15
length = 8
PalBright = 0, 0, 0
PalContrast = 128, 128, 128
PalAdd = 0, 0, 0
PalMul = 1, 1, 1
FrameGap = 2
Trans = Add1

[State 40, 4]
type = VelSet
trigger1 = Animtime = 0
x = const(velocity.runjump.back.x)
y = const(velocity.jump.y)

[State 40, 6]
type = ChangeState
trigger1 = Animtime = 0
value = 50
ctrl = 1


;==============================================================================================
[Statedef 40]
type = S
physics = S
anim = 40
ctrl = 0
facep2 = 1
sprpriority = 1

[State 40, 1]
type = VarSet
trigger1 = time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = Animtime = 0
x = ifelse(sysvar(1) = 0, const(velocity.jump.neu.x), ifelse(sysvar(1) = 1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 6]
type = ChangeState
trigger1 = Animtime = 0
value = 50
ctrl = 1


;==============================================================================================
[Statedef 41]
type = S
physics = S
anim = 40
ctrl = 0
facep2 = 1
sprpriority = 1

[State Super D]
type = Afterimage
trigger1 = var(10) = 0
trigger1 = time = 0
time = 15
length = 8
PalBright = 0, 0, 0
PalContrast = 128, 128, 128
PalAdd = 0, 0, 0
PalMul = 1, 1, 1
FrameGap = 2
Trans = Add1

[State 41, 1]
type = VarSet
trigger1 = time = 0
sysvar(1) = 0

[State 41, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 41, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 41, 4]
type = VelSet
trigger1 = Animtime = 0
x = ifelse(sysvar(1) = 0, 0, ifelse(sysvar(1) = 1, const(velocity.runjump.fwd.x), const(velocity.runjump.back.x)))
y = ifelse(sysvar(1) = 0, const(velocity.runjump.y), const(velocity.jump.y))

[State 41, 6]
type = ChangeState
trigger1 = Animtime = 0
value = 50
ctrl = 1


;==============================================================================================
[Statedef 91]
type = S
physics = S
anim = 40
ctrl = 0
facep2 = 1
sprpriority = 1

[State 40, 4]
type = ChangeState
trigger1 = time = 0 && !AIlevel
value = 41

[State Super D]
type = Afterimage
triggerall = var(10) = 0 && !AILevel
trigger1 = time = 0
time = 15
length = 8
PalBright = 0, 0, 0
PalContrast = 128, 128, 128
PalAdd = 0, 0, 0
PalMul = 1, 1, 1
FrameGap = 2
Trans = Add1

[State 40, 4]
type = VelSet
trigger1 = Animtime = 0
x = const(velocity.runjump.fwd.x)
y = const(velocity.jump.y)

[State 40, 6]
type = ChangeState
trigger1 = time = 7
value = 1952
ctrl = 0

[State 40, 6]
type = ChangeState
trigger1 = Animtime = 0
value = 50
ctrl = 1


;==============================================================================================
[Statedef 42]
type = S
physics = S
anim = 40
ctrl = 0
facep2 = 1
sprpriority = 1

[State 40, 4]
type = ChangeState
trigger1 = time = 0 && !AIlevel
value = 40

[State 40, 4]
type = VelSet
trigger1 = Animtime = 0
x = const(velocity.jump.fwd.x)
y = const(velocity.jump.y)

[State 40, 6]
type = ChangeState
trigger1 = Animtime = 0
value = 50
ctrl = 1


;==============================================================================================
[Statedef 43]
type = S
physics = S
anim = 40
ctrl = 0
facep2 = 1
sprpriority = 1

[State 40, 4]
type = ChangeState
trigger1 = time = 0 && !AIlevel
value = 40

[State 40, 4]
type = VelSet
trigger1 = Animtime = 0
x = 0
y = const(velocity.jump.y)

[State 40, 6]
type = ChangeState
trigger1 = Animtime = 0
value = 50
ctrl = 1


;==============================================================================================
[Statedef 44]
type = S
physics = S
anim = 40
ctrl = 0
facep2 = 1
sprpriority = 1

[State 40, 4]
type = ChangeState
trigger1 = time = 0 && !AIlevel
value = 41

[State Super D]
type = Afterimage
triggerall = var(10) = 0
trigger1 = time = 0
time = 15
length = 8
PalBright = 0, 0, 0
PalContrast = 128, 128, 128
PalAdd = 0, 0, 0
PalMul = 1, 1, 1
FrameGap = 2
Trans = Add1

[State 40, 4]
type = VelSet
trigger1 = Animtime = 0
x = const(velocity.runjump.back.x)
y = const(velocity.jump.y)

[State 40, 6]
type = ChangeState
trigger1 = Animtime = 0
value = 50
ctrl = 1


;==============================================================================================
[Statedef 120]
type = U
physics = U
anim = 120 + (statetype = C) + (statetype = A) * 2

[State 120, Type]
type = statetypeset
trigger1 = !time && statetype = S
physics = S

[State 120, Type]
type = statetypeset
trigger1 = !time && statetype = C
physics = C

[State 120, Type]
type = statetypeset
trigger1 = !time && statetype = A
physics = A

[State 120, Vel]
type = velset
trigger1 = !time && statetype != A
x = vel x * (prevstateno=[100, 107])
y = 0

[State 120, High to Low]
type = statetypeset
trigger1 = !AIlevel && statetype = S && command = "holddown"
trigger2 = AIlevel && statetype = S && (enemynear, movetype = A) && (enemynear, statetype = C)
statetype = C
physics = C

[State 120, Low to High]
type = statetypeset
trigger1 = !AIlevel && statetype = C && command != "holddown"
trigger2 = AIlevel && statetype = C && (enemynear, movetype = A) && (enemynear, statetype != C)
statetype = S
physics = S

[State 120, AI fix]
type = ctrlset
trigger1 = AIlevel && numenemy
value = (enemynear, time >= 60 || time >= 20)

[State 120, End]
type = changestate
trigger1 = !animtime || AIlevel
value = 130 + (statetype = C) + (statetype = A) * 2

[State 120, Stop]
type = changestate
trigger1 = (!AIlevel && command != "holdback")
trigger2 = !inguarddist
trigger3 = AIlevel && numenemy
trigger3 = enemynear, hitdefattr = SCA, AT
value = 140

;Super Jump
[Statedef 123]; change these for the number that you want
type = A
movetype = I
physics = N
anim = 40 ; these is the jump anim
velset = 0,0
ctrl = 0

[state 50, playsnd]
type = playsnd
trigger1=animtime = 0
value = s20,4
channel = 0
[State 123, Explod]
type = Explod
trigger1 = !animtime
anim = 7038
postype = p1
pos = 0,30
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
ownpal = 1
sprpriority = 3
scale = .3,.4
ontop = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 1
persistent = 1

[State 123,1 ]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 123,2 ]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 123,3 ]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 123,4 ]
type = VelSet
trigger1 = animtime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)*1.4 ; you can change these value, to make it fit how you want the superjump


[State 123,5 ]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;=============================================================================================================
[Statedef 130]
type = S
physics = S

[State 130, Anim]
type = changeanim
trigger1 = anim != 130
value = 130

[State 130, AI fix]
type = ctrlset
trigger1 = AIlevel && numenemy
value = (enemynear, time >= 60 || time >= 20)

[State 130, High to Low]
type = changestate
trigger1 = !AIlevel && command = "holddown"
trigger2 = AIlevel && random < (500 * (AIlevel ** 2 / 64.0))
trigger2 = (enemynear, movetype = A) && (enemynear, statetype = C)
value = 131

[State 130, Stop Guarding]
type = changestate
trigger1 = (!AIlevel && command != "holdback")
trigger2 = !inguarddist
trigger3 = AIlevel && numenemy
trigger3 = enemynear, hitdefattr = SCA, AT
value = 140

[State 130, Snd]
type = playsnd
trigger1 = !time
trigger1 = prevstateno = 132 || (prevstateno = [154, 155])
value = 0, 0


[Statedef 131]
type = C
physics = C

[State 131, Anim]
type = changeanim
trigger1 = anim != 131
value = 131

[State 131, Low to High]
type = changestate
trigger1 = !AIlevel && command != "holddown"
trigger2 = AIlevel && random < (500 * (AIlevel ** 2 / 64.0))
trigger2 = (enemynear, movetype = A) && (enemynear, statetype != C)
value = 130

[State 131, AI fix]
type = ctrlset
trigger1 = AIlevel && numenemy
value = (enemynear, time >= 60 || time >= 20)

[State 131, Stop Guarding]
type = changestate
trigger1 = (!AIlevel && command != "holdback")
trigger2 = !inguarddist
trigger3 = AIlevel && numenemy
trigger3 = enemynear, hitdefattr = SCA, AT
value = 140


[Statedef 132]
type = A
physics = N

[State 132, Anim]
type = changeanim
trigger1 = anim != 132
value = 132

[State 132, Accel]
type = veladd
trigger1 = 1
y = const(movement.yaccel)

[State 132, Var]
type = varset
trigger1 = 1
sysvar(0) = (pos y >= 0 && vel y > 0)

[State 132, Vel]
type = velset
trigger1 = sysvar(0)
y = 0

[State 132, Pos]
type = posset
trigger1 = sysvar(0)
y = 0

[State 132, AI fix]
type = ctrlset
trigger1 = AIlevel && numenemy
value = (enemynear, time >= 60 || time >= 20)

[State 132, End]
type = changestate
trigger1 = sysvar(0) && inguarddist
trigger1 = (!AIlevel && command = "holdback") || AIlevel
value = 130

[State 132, End]
type = changestate
trigger1 = sysvar(0)
value = 52

[State 132, stop guarding]
type = changestate
trigger1 = (!AIlevel && command != "holdback")
trigger2 = !inguarddist
trigger3 = AIlevel && numenemy
trigger3 = enemynear, hitdefattr = SCA, AT
value = 140


[Statedef 140]
type = U
physics = U
ctrl = 1

[State 140, Anim]
type = changeanim
trigger1 = !time
value = 140 + (statetype = C) + (statetype = A) * 2

[State 140, Type]
type = statetypeset
trigger1 = !time && statetype = S
physics = S

[State 140, Type]
type = statetypeset
trigger1 = !time && statetype = C
physics = C

[State 140, Type]
type = statetypeset
trigger1 = !time && statetype = A
physics = A

[State 140, High to Low]
type = statetypeset
trigger1 = !AIlevel && statetype = S && command = "holddown"
trigger2 = AIlevel && random < (500 * (AIlevel ** 2 / 64.0))
trigger2 = statetype = S && (enemynear, movetype = A) && (enemynear, statetype = C)
statetype = C
physics = C

[State 140, Low to High]
type = statetypeset
trigger1 = !AIlevel && statetype = C && command != "holddown"
trigger2 = AIlevel && random < (500 * (AIlevel ** 2 / 64.0))
trigger2 = statetype = C && (enemynear, movetype = A) && (enemynear, statetype != C)
statetype = S
physics = S

[State 140, End]
type = changestate
trigger1 = !animtime
value = (statetype = C) * 11 + (statetype = A) * 51


[Statedef 150]
type = S
movetype = H
physics = N
velset = 0, 0

[State 150, Anim]
type = changeanim
trigger1 = 1
value = 150

[State 150, End]
type = changestate
trigger1 = hitshakeover
value = 151 + 2 * ((!AIlevel && command = "holddown") || (AIlevel && (enemynear, movetype = A) && (enemynear, statetype = C)))

[State 150, High to Low]
type = statetypeset
trigger1 = !AIlevel && statetype = S && command = "holddown"
trigger2 = AIlevel && random < (500 * (AIlevel ** 2 / 64.0))
trigger2 = statetype = S && (enemynear, movetype = A) && (enemynear, statetype = C)
statetype = C
physics = C

[State 150, Low to High]
type = statetypeset
trigger1 = !AIlevel && statetype = C && command != "holddown"
trigger2 = AIlevel && random < (500 * (AIlevel ** 2 / 64.0))
trigger2 = statetype = C && (enemynear, movetype = A) && (enemynear, statetype != C)
statetype = S
physics = S


[Statedef 151]
type = S
physics = S
movetype = H
anim = 130

[State 151, Vel]
type = hitvelset
trigger1 = !time
x = 1

[State 151, Vel]
type = velset
trigger1 = time = gethitvar(slidetime)
trigger2 = hitover
x = 0

[State 151, Ctrl]
type = ctrlset
trigger1 = time = gethitvar(ctrltime)
value = 1

[State 151, High to Low]
type = statetypeset
trigger1 = !AIlevel && statetype = S && command = "holddown"
trigger2 = AIlevel && random < (500 * (AIlevel ** 2 / 64.0))
trigger2 = statetype = S && (enemynear, movetype = A) && (enemynear, statetype = C)
statetype = C
physics = C

[State 151, Low to High]
type = statetypeset
trigger1 = !AIlevel && statetype = C && command != "holddown"
trigger2 = AIlevel && random < (500 * (AIlevel ** 2 / 64.0))
trigger2 = statetype = C && (enemynear, movetype = A) && (enemynear, statetype != C)
statetype = S
physics = S

[State 151, End]
type = changestate
trigger1 = hitover
value = 130
ctrl = 1


[Statedef 152]
type = C
physics = N
movetype = H
velset = 0, 0

[State 152, Anim]
type = changeanim
trigger1 = 1
value = 151

[State 152, End]
type = changestate
trigger1 = hitshakeover
value = 151 + 2 * ((!AIlevel && command = "holddown") || (AIlevel && (enemynear, movetype = A) && (enemynear, statetype = C)))

[State 152, High to Low]
type = statetypeset
trigger1 = !AIlevel && statetype = S && command = "holddown"
trigger2 = AIlevel && random < (500 * (AIlevel ** 2 / 64.0))
trigger2 = statetype = S && (enemynear, movetype = A) && (enemynear, statetype = C)
statetype = C
physics = C

[State 152, Low to High]
type = statetypeset
trigger1 = !AIlevel && statetype = C && command != "holddown"
trigger2 = AIlevel && random < (500 * (AIlevel ** 2 / 64.0))
trigger2 = statetype = C && (enemynear, movetype = A) && (enemynear, statetype != C)
statetype = S
physics = S


[Statedef 153]
type = C
physics = C
movetype = H
anim = 131

[State 153, Vel]
type = hitvelset
trigger1 = !time
x = 1

[State 153, Vel]
type = velset
trigger1 = time = gethitvar(slidetime)
trigger2 = hitover
x = 0

[State 153, Ctrl]
type = ctrlset
trigger1 = time = gethitvar(ctrltime)
value = 1

[State 153, High to Low]
type = statetypeset
trigger1 = !AIlevel && statetype = S && command = "holddown"
trigger2 = AIlevel && random < (500 * (AIlevel ** 2 / 64.0))
trigger2 = statetype = S && (enemynear, movetype = A) && (enemynear, statetype = C)
statetype = C
physics = C

[State 153, Low to High]
type = statetypeset
trigger1 = !AIlevel && statetype = C && command != "holddown"
trigger2 = AIlevel && random < (500 * (AIlevel ** 2 / 64.0))
trigger2 = statetype = C && (enemynear, movetype = A) && (enemynear, statetype != C)
statetype = S
physics = S

[State 153, End]
type = changestate
trigger1 = hitover
value = 131
ctrl = 1


[Statedef 154]
type = A
physics = N
movetype = H
velset = 0, 0

[State 154, Anim]
type = changeanim
trigger1 = 1
value = 152

[State 154, End]
type = changestate
trigger1 = hitshakeover
value = 155


[Statedef 155]
type = A
physics = N
movetype = H
anim = 132

[State 155, Vel]
type = hitvelset
trigger1 = !time
x = 1
y = 1

[State 155, Vel]
type = veladd
trigger1 = 1
y = const(movement.yaccel)

[State 155, Ctrl]
type = ctrlset
trigger1 = time = gethitvar(ctrltime)
value = 1

[State 155, Var]
type = varset
trigger1 = 1
sysvar(0) = (pos y >= 0 && vel y > 0)

[State 155, Vel]
type = velset
trigger1 = sysvar(0)
y = 0

[State 155, Pos]
type = posset
trigger1 = sysvar(0)
y = 0

[State 155, End]
type = changestate
trigger1 = sysvar(0) && inguarddist
trigger1 = (!AIlevel && command = "holdback") || AIlevel
value = 130

[State 155, End]
type = changestate
trigger1 = sysvar(0)
value = 52


;==============================================================================================
[Statedef 201]
type = S
movetype = A
physics = S
juggle = 4
velset = vel x * (prevstateno=[100, 107]), 0
ctrl = 0
poweradd = (Var(10)=0) * 20
sprpriority = 2
anim = 201

[State 1]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
damage = 20
animtype = Light
getpower = (Var(10)=0) * 30, (Var(10)=0) * 15
givepower = 15, 8
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 8, 8
sparkno = 0
sparkxy = -10, -25
guard.sparkno = 40; S9100
hitsound = S6, 2
guardsound = S0, 100
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -3
air.velocity = -1, -3
down.velocity = -1, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(4) >= 0
movetype = I

[State 2]
type = PlaySnd
trigger1 = animelem = 1, =1
value = 0, 2

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 206]
type = S
movetype = A
physics = S
juggle = 4
velset = vel x * (prevstateno=[100, 107]), 0
ctrl = 0
poweradd = (Var(10)=0) * 15
sprpriority = 2
anim = 206

[State 1]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
damage = 16
animtype = Light
getpower = (Var(10)=0) * 20, (Var(10)=0) * 10
givepower = 15, 8
guardflag = HA
hitflag = MAFD
priority = 4, Hit
pausetime = 8, 8
sparkno = 0
guard.sparkno = 40; S9100
sparkxy = -10, -75
hitsound = S6, 1
guardsound = S0, 100
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -3
air.type = Low
air.velocity = -1, -3
air.hittime = 10
down.velocity = -1, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(3) >= 0
movetype = I

[State 2]
type = PlaySnd
trigger1 = time = 1
value = 0, 1

[State var(41)Miss memory]
type = varadd
trigger1 = animtime = 0
trigger1 = movecontact = 0
v = 41
value = 1

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 209]
type = S
movetype = A
physics = S
juggle = 10
poweradd = (Var(10)=0) * 40
ctrl = 0
velset = vel x * (prevstateno=[100, 107]), 0
anim = 209
sprpriority = 2

[State w1]
type = width
trigger1 = animelem = 1, >= 0
value = 16

[State w2]
type = width
trigger1 = animelem = 2, >= 0
value = 20

[State w3]
type = width
trigger1 = animelem = 3, >= 0
value = 24

[State 2]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype = Hard
getpower = (Var(10)=0) * 30
givepower = 20
damage = 40
hitflag = MAFD
guardflag = MA
priority = 4, Hit
pausetime = 12, 12
sparkno = 1
sparkxy = -10, -55
guard.sparkno = 40; S9100
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5
air.velocity = -3, -4
down.velocity = -5, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(5) >= 0
movetype = I

[State WhiffSound]
type = PlaySnd
trigger1 = animelem = 2, =1
value = 0, 3

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 210]
type = S
movetype = A
physics = S
juggle = 5
poweradd = (Var(10)=0) * 30
ctrl = 0
velset = vel x * (prevstateno=[100, 107]), 0
anim = 210
sprpriority = 2

[State 4]
type = PosAdd
trigger1 = Time < 4
x = 2

[State velset]
type = posadd
trigger1 = prevstateno = 201 && time = 0
x = 10

[State w1]
type = width
trigger1 = animelem = 1, >= 0
value = 20

[State w2]
type = width
trigger1 = animelem = 2, >= 0
value = 23

[State w3]
type = width
trigger1 = animelem = 3, >= 0
value = 26

[State var(2) reset]
type = varset
trigger1 = time = 0
v = 2
value = 0

[State var(2) add]
type = varadd
trigger1 = command = "c"
v = 2
value = 1

[State WhiffSound]
type = PlaySnd
trigger1 = animelem = 4
value = 0, 3

[State 2]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
animtype = Medium
getpower = (Var(10)=0) * 20, (Var(10)=0) * 15
givepower = 15, 8
damage = 40
hitflag = MAFD
guardflag = MA
priority = 4, Hit
pausetime = 10, 10
sparkno = 1
guard.sparkno = 40; S9100
sparkxy = -10, -50
hitsound = S6, 4
guardsound = S0, 100
ground.type = high
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3
air.velocity = -2, -3.5
air.hittime = 15
down.velocity = -2, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(5) >= 0
movetype = I

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 215]
type = S
movetype = A
physics = S
juggle = 10
velset = vel x * (prevstateno=[100, 107]), 0
ctrl = 0
anim = 215
poweradd = (Var(10)=0) * 50
sprpriority = 2

[State 1]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
damage = 28
animtype = Medium
getpower = (Var(10)=0) * 30, (Var(10)=0) * 15
givepower = 15, 8
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 10, 10
sparkno = 1
guard.sparkno = 40; S9100
sparkxy = -10, -70
hitsound = S6, 3
guardsound = S0, 100
ground.type = low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -4
air.type = low
air.velocity = -3, -3.5
air.hittime = 15
down.velocity = -3, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(4) >= 0
movetype = I

[State 2]
type = PlaySnd
trigger1 = time = 0
value = 0, 3

[State 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 220]
type = S
movetype = A
physics = S
juggle = 10
poweradd = (Var(10)=0) * 70
ctrl = 0
velset = vel x * (prevstateno=[100, 107]), 0
anim = 220
sprpriority = 2

[State 4]
type = PosAdd
trigger1 = time = 0
x = 5

[State 4]
type = PosAdd
trigger1 = Time < 4
x = 2

[State velset]
type = posadd
trigger1 = prevstateno = 210 && time = 0
x = 10

[State 1]
type = PlaySnd
trigger1 = animelem = 1
value = 0, 4

[State 2]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype = Hard
getpower = (Var(10)=0) * 60, (Var(10)=0) * 30
givepower = 40, 20
damage = 80
hitflag = MAFD
guardflag = MA
priority = 4, Hit
pausetime = 12, 12
sparkno = 2
guard.sparkno = 40; S9100
sparkxy = -10, -75
hitsound = S6, 6
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5
air.velocity = -3, -4
down.velocity = -5, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(4) >= 0
movetype = I

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 225]
type = S
movetype = A
physics = S
juggle = 10
velset = vel x * (prevstateno=[100, 107]), 0
ctrl = 0
anim = 225
poweradd = (Var(10)=0) * 80
sprpriority = 2

[State 1]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
damage = 80
animtype = Hard
getpower = (Var(10)=0) * 40, (Var(10)=0) * 20
givepower = 30, 15
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 14, 12
sparkno = 2
guard.sparkno = 40; S9100
sparkxy = -10, -64
hitsound = S6, 5
guardsound = S0, 100
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5
air.type = Low
air.velocity = -3, -4
down.velocity = -3, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(5) >= 0
movetype = I

[State Fierce]
type = PlaySnd
trigger1 = animelem = 2
value = 4, 11
channel = 0

[State WhiffSound]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 4

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 230]
type = S
movetype = A
physics = S
juggle = 10
velset = vel x * (prevstateno=[100, 107]), 0
ctrl = 0
anim = 230
poweradd = (Var(10)=0) * 80
sprpriority = 2

[State 1]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
damage = 72
animtype = Hard
getpower = (Var(10)=0) * 60, (Var(10)=0) * 30
givepower = 30, 20
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 12, 12
sparkno = 2
guard.sparkno = 40; S9100
sparkxy = -10, -75
hitsound = S6, 5
guardsound = S0, 100
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5
air.type = Low
air.velocity = -2, -6
down.velocity = -3, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120
forcestand = 1

[State 1]
type = HitDef
trigger1 = animelem = 3 && movecontact = 0 && movereversed = 0
attr = S, NA
damage = 72
animtype = Hard
getpower = (Var(10)=0) * 60, (Var(10)=0) * 30
givepower = 30, 20
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 12, 12
sparkno = 2
guard.sparkno = 40; S9100
sparkxy = -10, -75
hitsound = S6, 5
guardsound = S0, 100
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5
air.type = Low
air.velocity = -3.0, -4
down.velocity = -3, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120
forcestand = 1

[State Idle]
type = statetypeset
trigger1 = animelemtime(4) >= 0
movetype = I

[State WhiffSound]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 4

[State 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 240]
type = S
movetype = A
physics = S
juggle = 5
velset = vel x * (prevstateno=[100, 107]), 0
ctrl = 0
anim = 240
poweradd = (Var(10)=0) * 70
sprpriority = 2

[State 1]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
damage = 28
animtype = Medium
getpower = (Var(10)=0) * 60, (Var(10)=0) * 30
givepower = 30, 20
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 10, 10
sparkno = 1
guard.sparkno = 40; S9100
sparkxy = -10, -65
hitsound = S6, 3
guardsound = S0, 100
ground.type = High
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -3
air.velocity = -2, -4
air.hittime = 15
down.velocity = -2, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(4) >= 0
movetype = I

[State 2]
type = PlaySnd
trigger1 = time = 0
value = 0, 4

[State 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 250]
type = S
movetype = A
physics = S
juggle = 10
poweradd = (Var(10)=0) * 120
ctrl = 0
velset = vel x * (prevstateno=[100, 107]), 0
anim = 250
sprpriority = 2

[State Whiff]
type = PlaySnd
trigger1 = animelem = 1 || animelem = 3
value = 0, 4

[State 2]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype = Hard
getpower = (Var(10)=0) * 70, (Var(10)=0) * 35
givepower = 40, 20
damage = 40
hitflag = MAFD
guardflag = MA
priority = 4, Hit
pausetime = 14, 14
sparkxy = -10, -55
sparkno = 2
guard.sparkno = 40; S9100
hitsound = S6, 6
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5, 0
air.velocity = -5, 0
yaccel = 0.25
down.velocity = -5, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State 2]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
animtype = Hard
getpower = (Var(10)=0) * 70, (Var(10)=0) * 35
givepower = 40, 20
damage = 40
hitflag = MAFD
guardflag = MA
priority = 4, Hit
pausetime = 14, 14
sparkxy = -10, -20
sparkno = 2
guard.sparkno = 40; S9100
hitsound = S6, 6
guardsound = S0, 100
ground.type = low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5, 0
air.velocity = -5, 0
yaccel = 0.25
down.velocity = -5, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(5) >= 0
movetype = I

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 400]
type = C
movetype = A
physics = C
juggle = 1
ctrl = 0
anim = 400
poweradd = (Var(10)=0) * 20
sprpriority = 2
velset = vel x * (prevstateno=[100, 107]), 0

[State 1]
type = HitDef
trigger1 = animelem = 2
attr = C, NA
damage = 16
animtype = Light
getpower = (Var(10)=0) * 20, (Var(10)=0) * 10
givepower = 15, 8
guardflag = L
hitflag = MFD
priority = 4, Hit
pausetime =8, 8
sparkno = 0
guard.sparkno = 40; S9100
sparkxy = -10, -5
hitsound = S6, 2
guardsound = S0, 100
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2
down.velocity = -1, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(3) >= 0
movetype = I

[State WhiffSound]
type = PlaySnd
trigger1 = animelem = 1
value = 0, 1

[State 7]
type = ChangeState
trigger1 = Animtime = 0
value = 11
ctrl = 1


;==============================================================================================
[Statedef 405]
type = C
movetype = A
physics = C
juggle = 1
ctrl = 0
anim = 405
poweradd = (Var(10)=0) * 15
sprpriority = 2
velset = vel x * (prevstateno=[100, 107]), 0

[State 1]
type = HitDef
trigger1 = animelem = 2
attr = C, NA
damage = 16
animtype = Light
getpower = (Var(10)=0) * 20, (Var(10)=0) * 10
givepower = 15, 8
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 8, 8
sparkno = 0
guard.sparkno = 40; S9100
sparkxy = -10, -48
hitsound = S6, 1
guardsound = S0, 100
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2
air.velocity = -2, -3
air.hittime = 10
down.velocity = -2, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(3) >= 0
movetype = I

[State whiffsound]
type = PlaySnd
trigger1 = animelem = 1
value = 0, 1

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 11
ctrl = 1


;==============================================================================================
[Statedef 410]
type = C
movetype = A
physics = C
juggle = 5
ctrl = 0
anim = 410
poweradd = (Var(10)=0) * 60
sprpriority = 2
velset = vel x * (prevstateno=[100, 107]), 0

[State 1]
type = HitDef
trigger1 = animelem = 3
attr = C, NA
damage = 40
animtype = Medium
getpower = (Var(10)=0) * 30, (Var(10)=0) * 15
givepower = 15, 8
guardflag = L
hitflag = MFD
priority = 4, Hit
pausetime = 10, 10
sparkno = 1
guard.sparkno = 40; S9100
sparkxy = -10, -5
hitsound = S6, 4
guardsound = S0, 100
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -3
down.velocity = 0, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(4) >= 0
movetype = I

[State Whiff]
type = PlaySnd
trigger1 = time = 3
value = 0, 3

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 11
ctrl = 1


;==============================================================================================
[Statedef 415]
type = C
movetype = A
physics = C
juggle = 5
ctrl = 0
anim = 415
poweradd = (Var(10)=0) * 40
sprpriority = 2
velset = vel x * (prevstateno=[100, 107]), 0

[State 1]
type = HitDef
trigger1 = animelem = 3
attr = C, NA
damage = 40
animtype = Medium
getpower = (Var(10)=0) * 30, (Var(10)=0) * 15
givepower = 15, 8
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 10, 10
sparkno = 1
guard.sparkno = 40; S9100
sparkxy = -10, -50
hitsound = S6, 3
guardsound = S0, 100
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -3
air.velocity = -2, -3.5
air.hittime = 15
down.velocity = -2, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(4) >= 0
movetype = I

[State Whiff]
type = PlaySnd
trigger1 = animelem = 1
value = 0, 3

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 11
ctrl = 1


;==============================================================================================
[Statedef 420]
type = C
movetype = A
physics = C
juggle = 4
poweradd = (Var(10)=0) * 90
ctrl = 0
anim = 420
sprpriority = 2
velset = vel x * (prevstateno=[100, 107]), 0

[State 2]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 4

[State 3]
type = HitDef
trigger1 = animelem = 2
attr = C, NA
damage = 70
getpower = (Var(10)=0) * 40, (Var(10)=0) * 20
givepower = 30, 15
hitflag = MFD
guardflag = L
priority = 4, Hit
pausetime = 12, 12
sparkxy = -10, -10
sparkno = 2
guard.sparkno = 40; S9100
hitsound = S6, 6
guardsound = S0, 100
ground.type = Trip
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 0, -5
air.velocity = 0, -2
guard.velocity = -2
fall = 1
down.velocity = -2, -2
fall.recover = 1
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(3) >= 0
movetype = I

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 11
ctrl = 1


;==============================================================================================
[Statedef 425]
type = C
movetype = A
physics = C
juggle = 4
ctrl = 0
anim = 425
poweradd = (Var(10)=0) * 80
sprpriority = 2
velset = vel x * (prevstateno=[100, 107]), 0

[State 1]
type = HitDef
trigger1 = animelem = 2
attr = C, NA
damage = 50
animtype = Hard
getpower = (Var(10)=0) * 50, (Var(10)=0) * 25
givepower = 30, 15
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 12, 12
sparkno = 2
guard.sparkno = 40; S9100
sparkxy = -10, -60
hitsound = S6, 5
guardsound = S0, 100
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -6, 0
air.type = High
air.velocity = -2, -6
fall.recover = (var(10) <= 0)
fall.recovertime = 120
air.fall = 0
fall = 0
down.velocity = 0, -12
fall.recover = (var(10) <= 0)
fall.recovertime = 120
forcestand = 1

[State 1]
type = HitDef
trigger1 = animelem = 3 && movecontact = 0 && movereversed = 0
attr = C, NA
damage = 40
animtype = Hard
getpower = (Var(10)=0) * 50, (Var(10)=0) * 25
givepower = 30, 15
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 12, 12
sparkno = 2
guard.sparkno = 40; S9100
sparkxy = -10, -100
hitsound = S6, 5
guardsound = S0, 100
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -6, 0
air.type = High
air.velocity = -2, -6
fall.recover = (var(10) <= 0)
fall.recovertime = 120
air.fall = 0
fall = 0
down.velocity = 0, -12
fall.recover = (var(10) <= 0)
fall.recovertime = 120
forcestand = 1

[State Idle]
type = statetypeset
trigger1 = animelemtime(4) >= 0
movetype = I

[State Whiff]
type = PlaySnd
trigger1 = animelem = 1
value = 0, 4

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 11
ctrl = 1


;==============================================================================================
[Statedef 600]
type = A
movetype = A
physics = A
juggle = 4
poweradd = (Var(10)=0) * 15
ctrl = 0
anim = 600
sprpriority =2

[State Whiff]
type = PlaySnd
trigger1 = animelem = 1
value = 0, 1

[State 2]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage = 16
getpower = (Var(10)=0) * 10
givepower = 10
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 8, 8
sparkno = 0	
guard.sparkno = 40; S9100
sparkxy = -10, -40
hitsound = S6, 2
guardsound = S0, 100
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -4
air.type = low
air.velocity = -2, -3
air.hittime = 10
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(4) >= 0
movetype = I


;==============================================================================================
[Statedef 603]
type = A
movetype = A
physics = A
juggle = 4
poweradd = (Var(10)=0) * 15
ctrl = 0
anim = 603
sprpriority = 2

[State 1]
type = PlaySnd
trigger1 = time = 1
value = 0, 1

[State 2]
type = HitDef
trigger1 = animelem = 2
attr = A, NA
damage = 16
getpower = (Var(10)=0) * 10
givepower = 10
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 8, 8
sparkxy = -10, -70
sparkno = 0
guard.sparkno = 40; S9100
hitsound = S6, 2
guardsound = S0, 100
ground.type = High
ground.slidetime = 8
ground.hittime = 8
ground.velocity = -4
air.type = low
air.velocity = -2, -4
air.hittime = 10
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(3) >= 0
movetype = I


;==============================================================================================
[Statedef 605]
type = A
movetype = A
physics = A
juggle = 4
poweradd = (Var(10)=0) * 15
ctrl = 0
anim = 605
sprpriority = 2

[State 1]
type = PlaySnd
trigger1 = time = 1
value = 0, 1

[State 2]
type = HitDef
trigger1 = animelem = 2
attr = A, NA
damage = 16
getpower = (Var(10)=0) * 10
givepower = 10
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 8, 8
sparkxy = -10, -50
sparkno = 0
guard.sparkno = 40; S9100
hitsound = S6, 1
guardsound = S0, 100
ground.type = High
ground.slidetime = 8
ground.hittime = 8
ground.velocity = -4
air.type = low
air.velocity = -2, -3
air.hittime = 10
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(3) >= 0
movetype = I


;==============================================================================================
[Statedef 610]
type = A
movetype = A
physics = A
juggle = 4
poweradd = (Var(10)=0) * 40
ctrl = 0
anim = 610
sprpriority = 2

[State 2]
type = PlaySnd
trigger1 = time = 2
value = 0, 3

[State 3]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage = 55
getpower = (Var(10)=0) * 50
givepower = 25
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 10, 10
sparkxy = -10, -51
sparkno = 1
guard.sparkno = 40; S9100
hitsound = S6, 4
guardsound = S0, 100
ground.type = High
ground.slidetime = 8
ground.hittime = 8
ground.velocity = -4
air.type = low
air.velocity = -3, -3.5
air.hittime = 15
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(4) >= 0
movetype = I


;==============================================================================================
[Statedef 613]
type = A
movetype = A
physics = A
juggle = 4
poweradd = (Var(10)=0) * 40
ctrl = 0
anim = 613
sprpriority = 2

[State 2]
type = PlaySnd
trigger1 = time = 2
value = 0, 2

[State 3]
type = HitDef
trigger1 = animelem = 2
attr = A, NA
damage = 55
getpower = (Var(10)=0) * 50
givepower = 25
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 10, 10
sparkxy = -10, -70
sparkno = 1
guard.sparkno = 40; S9100
hitsound = S6, 4
guardsound = S0, 100
ground.type = High
ground.slidetime = 8
ground.hittime = 8
ground.velocity = -4
air.type = Low
air.velocity = -2, -5.5
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(3) >= 0
movetype = I


;==============================================================================================
[Statedef 615]
type = A
movetype = A
physics = A
juggle = 4
poweradd = (Var(10)=0) * 50
ctrl = 0
anim = 615
sprpriority = 2

[State 2]
type = PlaySnd
trigger1 = time = 2
value = 0, 2

[State 3]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage = 45
getpower = (Var(10)=0) * 40
givepower = 25
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 10, 10
sparkxy = -10, -60
sparkno = 1
guard.sparkno = 40; S9100
hitsound = S6, 3
guardsound = S0, 100
ground.type = High
ground.slidetime = 8
ground.hittime = 8
ground.velocity = -4
air.type = low
air.velocity = -3, -3.5
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(4) >= 0
movetype = I


;==============================================================================================
[Statedef 616]
type = A
movetype = A
physics = A
juggle = 4
poweradd = (Var(10)=0) * 50
ctrl = 0
anim = 616
sprpriority = 2

[State 2]
type = PlaySnd
trigger1 = animelem = 4
value = 0, 2

[State 3]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage = 45
getpower = (Var(10)=0) * 40
givepower = 25
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 10, 10
sparkxy = -10, -60
sparkno = 1
guard.sparkno = 40; S9100
hitsound = S6, 3
guardsound = S0, 100
ground.type = High
ground.slidetime = 8
ground.hittime = 8
ground.velocity = -4
air.type = low
air.velocity = -2, -5.5
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State 3]
type = HitDef
trigger1 = animelem = 6
attr = A, NA
damage = 45
getpower = (Var(10)=0) * 40
givepower = 25
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 10, 10
sparkxy = -10, -60
sparkno = 1
guard.sparkno = 40; S9100
hitsound = S6, 3
guardsound = S0, 100
ground.type = High
ground.slidetime = 8
ground.hittime = 8
ground.velocity = -4
air.hittime = 12
air.type = low
air.velocity = -2, -6.5
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(7) >= 0
movetype = I


;==============================================================================================
[Statedef 620]
type = A
movetype = A
physics = A
juggle = 4
poweradd = (Var(10)=0) * 80
ctrl = 0
anim = 620
sprpriority = 2

[State Whiff]
type = PlaySnd
trigger1 = time = 2
value = 0, 4

[State 3]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage = 80
getpower = (Var(10)=0) * 30
givepower = 40
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 14, 14
sparkxy = -10, -50
sparkno = 2
guard.sparkno = 40; S9100
hitsound = S6, 6
guardsound = S0, 100
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -5
air.velocity = -7, 3
air.type = Low
airguard.velocity = -4, -4
air.fall = 1
fall.xvelocity = -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(4) >= 0
movetype = I


;==============================================================================================
[Statedef 623]
type = A
movetype = A
physics = A
juggle = 4
poweradd = (Var(10)=0) * 80
ctrl = 0
anim = 623
sprpriority = 2

[State Whiff]
type = PlaySnd
trigger1 = time = 2
value = 0, 4

[State 3]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage = 80
getpower = (Var(10)=0) * 30
givepower = 40
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 14, 14
sparkxy = -10, -51
sparkno = 2
guard.sparkno = 40; S9100
hitsound = S6, 6
guardsound = S0, 100
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -4
air.velocity = -10, -2
airguard.velocity = -4, -4
air.type = low
air.fall = 0
fall.xvelocity = -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120
forcenofall = 1

[State Idle]
type = statetypeset
trigger1 = animelemtime(5) >= 0
movetype = I


;==============================================================================================
[Statedef 625]
type = A
movetype = A
physics = A
juggle = 4
poweradd = (Var(10)=0) * 80
ctrl = 0
anim = 625
sprpriority = 2

[State 2]
type = PlaySnd
trigger1 = time = 2
value = 0, 4

[State 3]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage = 80
getpower = (Var(10)=0) * 30
givepower = 40
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 14, 14
sparkxy = -10, -60
sparkno = 2
guard.sparkno = 40; S9100
hitsound = S6, 5
guardsound = S0, 100
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -5
air.velocity = -7.5, 5
airguard.velocity = -4, -4
air.type = low
air.fall = 1
fall.xvelocity = -5
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(4) >= 0
movetype = I

;==========< PARRY >==========
;--- STANDING ---
[Statedef 700]
type = S
physics = S
movetype = I
anim = 700
velset = 0, 0
ctrl = 0
sprpriority = 2
poweradd = 78
facep2 = 1

[State 700, HB]
type = hitby
trigger1 = 1
value = SCA, AT
time = 1

[State 700, Stop]
type = posfreeze
trigger1 = 1
value = 1

[State 700, Pause]
type = pause
trigger1 = !time
time = 15
movetime = 15
endcmdbuftime = 15
pausebg = 0

[State 700, Pause]
type = pause
trigger1 = !time && numenemy
trigger1 = (enemynear, movehit = 1)
time = ifelse((enemynear, hitpausetime = [0, 15]), 15 -(enemynear, hitpausetime), 0)
movetime = ifelse((enemynear, hitpausetime = [0, 15]), 15 -(enemynear, hitpausetime), 0)
endcmdbuftime = ifelse((enemynear, hitpausetime = [0, 15]), 15 -(enemynear, hitpausetime), 0)
pausebg = 0

[State 700, Flash]
type = palfx
trigger1 = !time
add = 0, 50, 255
sinadd = 0, -50, -255, 60
time = 15
[State 700, Snd]
type = playsnd
trigger1 = !time
value = 3, (random < 500)
channel = 0
[State 700, Snd]
type = playsnd
trigger1 = !time
value = 7, 5
[State 700, Spark]
type = explod
trigger1 = animelem = 2
anim = 7200
ID = 7200
sprpriority = 5
postype = p1
pos = 36, -65
pausemovetime = 60
ownpal = 1
scale = 0.5, 0.5

[State 700, No walking]
type = assertspecial
trigger1 = 1
flag = nowalk
[State 700, End]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1


;--- CROUCHING ---
[Statedef 701]
type = C
physics = C
movetype = I
anim = 701
velset = 0, 0
ctrl = 0
sprpriority = 2
poweradd = 78
facep2 = 1

[State 701, HB]
type = hitby
trigger1 = 1
value = SCA, AT
time = 1
[State 701, Stop]
type = posfreeze
trigger1 = 1
value = 1

[State 701, Pause]
type = pause
trigger1 = !time
time = 15
movetime = 15
endcmdbuftime = 15
pausebg = 0
[State 701, Pause]
type = pause
trigger1 = !time && numenemy
trigger1 = (enemynear, movehit = 1)
time = ifelse((enemynear, hitpausetime = [0, 15]), 15 -(enemynear, hitpausetime), 0)
movetime = ifelse((enemynear, hitpausetime = [0, 15]), 15 -(enemynear, hitpausetime), 0)
endcmdbuftime = ifelse((enemynear, hitpausetime = [0, 15]), 15 -(enemynear, hitpausetime), 0)
pausebg = 0

[State 701, Flash]
type = palfx
trigger1 = !time
add = 0, 50, 255
sinadd = 0, -50, -255, 60
time = 15

[State 701, Snd]
type = playsnd
trigger1 = !time
value = 3, (random < 500)
channel = 0
[State 701, Snd]
type = playsnd
trigger1 = !time
value = 7, 5

[State 701, Spark]
type = explod
trigger1 = animelem = 2
anim = 7200
ID = 7200
sprpriority = 5
postype = p1
pos = 27, -21
pausemovetime = 60
ownpal = 1
scale = 0.5, 0.5

[State 701, No walking]
type = assertspecial
trigger1 = 1
flag = nowalk
[State 701, End]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1


;--- AERIAL ---
[Statedef 702]
type = A
physics = A
movetype = I
anim = 702
ctrl = 0
sprpriority = 2
poweradd = 78
facep2 = 1

[State 702, HB]
type = hitby
trigger1 = time < 15
value = SCA, AT
time = 1

[State 702, Pause]
type = pause
trigger1 = !time
time = 15
movetime = 15
endcmdbuftime = 15
pausebg = 0
[State 702, Pause]
type = pause
trigger1 = !time && numenemy
trigger1 = (enemynear, movehit = 1)
time = ifelse((enemynear, hitpausetime = [0, 15]), 15 -(enemynear, hitpausetime), 0)
movetime = ifelse((enemynear, hitpausetime = [0, 15]), 15 -(enemynear, hitpausetime), 0)
endcmdbuftime = ifelse((enemynear, hitpausetime = [0, 15]), 15 -(enemynear, hitpausetime), 0)
pausebg = 0

[State 702, Type]
type = statetypeset
trigger1 = time < 15
physics = N
[State 702, Stop]
type = posfreeze
trigger1 = time < 15
value = 1

[State 702, Vel]
type = velset
trigger1 = time = 15
x = ifelse(vel x > 2, 2, ifelse(vel x < -2, -2, vel x))
y = ifelse(vel y < -2, vel y, -2)
[State 702, Type]
type = statetypeset
trigger1 = time >= 15
physics = A
[State 702, Ctrl]
type = ctrlset
trigger1 = time >= 15
value = 1

[State 702, Flash]
type = palfx
trigger1 = !time
add = 0, 64, 255
sinadd = 0, -64, -255, 60
time = 15

[State 702, Snd]
type = playsnd
trigger1 = !time
value = 3, (random < 500)
channel = 0
[State 702, Snd]
type = playsnd
trigger1 = !time
value = 7, 5

[State 702, Spark]
type = explod
trigger1 = animelem = 2
anim = 7200
ID = 7200
sprpriority = 5
postype = p1
pos = 41, -64
pausemovetime = 60
ownpal = 1
scale = 0.5, 0.5


;==============================================================================================
[Statedef 721]
type = A
movetype = A
physics = N
juggle = 5
velset = 0, -2
sprpriority = 2

[State PosAdd]
type = Posadd
trigger1 = animelem = 4
y = 18

[State PosAdd]
type = posadd
trigger1 = animelem = 4
x = 1

[State PosAdd]
type = Posadd
trigger1 = 1
x = 3

[State Gravity]
type = VelAdd
trigger1 = 1
y = 0.44

[State AttackVoice2]
type = PlaySnd
trigger1 = animelem = 9
value = 4, 0
channel = 0

[State Hitdef1]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
animtype = Medium
damage = 50, 0
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 13, 8
sparkno = 2
sparkxy = 5, -45
guard.sparkno = 40; S9100
hitsound = S6, 6
guardsound = S0, 100
ground.type = high
ground.slidetime = 14
ground.hittime = 10
ground.velocity = -5
air.velocity = -5, -4

[State 9]
type = ChangeState
trigger1 = time > 5
trigger1 = pos y >= 6
value = 52


;==============================================================================================
[Statedef 900]
type = S
movetype = A
physics = S
ctrl = 0
velset = 0, 0
anim = 900
sprpriority = 2

[State Do Not Guard]
type = attackdist
trigger1 = 1
value = 0

[State Tech]
type = varset
trigger1 = 1
var(27) = 0

[State Tech]
type = varset
trigger1 = numenemy
trigger1 = enemynear, statetype != A
trigger1 = (enemynear, stateno = [0, 999]) && (enemynear, stateno != [100, 119]) && (enemynear, stateno != [200, 799])
var(27) = 7

[State 2]
type = HitDef
trigger1 = !var(39)
trigger1 = animelem = 3
trigger1 = p2dist x >= 0 && P2Bodydist x <= 32
attr = S, NT 
p2facing = 1
p1facing = ifelse(command = "holdfwd", -1, 1)
hitflag = M-
priority = 1, Miss
sparkno = -1
hitsound = S0, 8
p1stateno = 920
p2stateno = 925
p2getp1state = 1
numhits = 0
fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(4) >= 0
movetype = I

[State grabmiss]
type = playsnd
trigger1 = animelem = 4
value = 3, 5
persistent = 0
channel = 0

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 905]
type = S
movetype = A
physics = S
ctrl = 0
velset = 0, 0
anim = 900
sprpriority = 2

[State Do Not Guard]
type = attackdist
trigger1 = 1
value = 0

[State Tech]
type = varset
trigger1 = 1
var(27) = 0

[State Tech]
type = varset
trigger1 = numenemy
trigger1 = enemynear, statetype = S
trigger1 = (enemynear, stateno = [0, 899]) && (enemynear, stateno != [100, 119]) && (enemynear, stateno != [600, 799])
var(27) = 7

[State 2]
type = HitDef
trigger1 = !var(39)
trigger1 = animelem = 3
trigger1 = p2dist x >= 0 && P2Bodydist x <= 32
attr = S, NT 
p2facing = 1
p1facing = ifelse(command = "holdback", -1, 1)
hitflag = M-
priority = 1, Miss
sparkno = -1
hitsound = S0, 8
p1stateno = 930
p2stateno = 935
p2getp1state = 1
fall = 1
fall.recover = 0
fall.recovertime = 120

[State Idle]
type = statetypeset
trigger1 = animelemtime(4) >= 0
movetype = I

[State grabmiss]
type = playsnd
trigger1 = animelem = 4
value = 3, 5
persistent = 0

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 920]
type = S
movetype = A
physics = S
anim = 920
velset = 0, 0
sprpriority = 2

[State Tech]
type = changestate
trigger1 = numtarget && var(27) > 0
trigger1 = (target, command = "holdfwd" || target, command = "holdback") && target, command != "holdup" && target, command != "holddown"
trigger1 = (target, command = "b" || target, command = "c" || target, command = "y" || target, command = "z")
value = 990

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1, 1

[State T1]
type = TargetBind
trigger1 = animelemtime(2) < 0
pos = 40, 0

[State T2]
type = TargetBind
trigger1 = animelemtime(2) >= 0
pos = 10, 0

[State T3]
type = targetbind
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
pos = 0, -70

[State PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = -50

[State 6]
type = VelSet
trigger1 = animelem = 3
x = 0
y = 0

[State 7]
type = PosSet
trigger1 = animelem = 3
y = 0

[State 8]
type = envshake
trigger1 = animelem = 3
time = 15
ampl = -2
freq = 120

[State ThrowVoice]
type = PlaySnd
trigger1 = animelem = 3
value = 2, 3
channel = 0

[State TargetState]
type = TargetState
trigger1 = animelem = 4
value = 926

[State LifeMinus]
type = targetlifeadd
trigger1 = animelem = 4
value = floor(-129 * fvar(10))

[State Hit Count]
type = VarAdd
trigger1 = animelem = 4
var(17) = 1

[State HitCountAdd]
type = HitAdd
trigger1 = animelem = 4
value = 1

[State 7]
type = Targetdrop
trigger1 = animelem = 4

[State Turn]
type = Turn
trigger1 = Animtime = 0
value = 1

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 925]
type = A
movetype = H
physics = N
sprpriority = 0

[State 1]
type = ChangeAnim2
trigger1 = time = 0
value = 925


;==============================================================================================
[Statedef 926]
type = A
movetype = H
physics = N
sprpriority = 1

[State 2]
type = VelSet
trigger1 = time = 0
x = 5
y = -5

[State 1]
type = PosAdd
trigger1 = time = 4
y = 70

[State 4]
type = SelfState
trigger1 = time = 4
value = 5050


;==============================================================================================
[Statedef 930]
type = S
movetype = A
physics = S
anim = 930
velset = 0, 0
sprpriority = -2

[State Tech]
type = changestate
trigger1 = numtarget && var(27) > 0
trigger1 = (target, command = "holdfwd" || target, command = "holdback") && target, command != "holdup" && target, command != "holddown"
trigger1 = (target, command = "b" || target, command = "c" || target, command = "y" || target, command = "z")
value = 990

[State TimeCountVar]
type = VarSet
trigger1 = time = 0 && var(3) = 0
v = 3
value = 0

[State TimeCount]
type = VarAdd
trigger1 = 1
v = 3
value = 1

[State TimeCount]
type = VarAdd
trigger1 = target, command = "a" || target, command = "b" || target, command = "c"
trigger2 = target, command = "x" || target, command = "y" || target, command = "z"
v = 3
value = 8

[State 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State HitCountAdd]
type = sprpriority
trigger1 = animelem = 1
value = -3
persistent = 1

[State HitCountAdd]
type = sprpriority
trigger1 = animelem = 2
value = 5
persistent = 1

[State ChangeState]
type = ChangeState
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = animelemtime(2) < 0
trigger2 = AILevel && p2life > 0
trigger2 = animelemtime(2) < 0
trigger2 = random < (1000 * (AIlevel ** 2 / 64.0))
value = 932

[State Edge]
type = Width
trigger1 = animelemtime(1) >= 0
edge = 65, 0

[State T1]
type = TargetBind
trigger1 = animelemtime(2) < 0
pos = 25, 0

[State T2]
type = TargetBind
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
pos = 25, -5

[State T3]
type = targetbind
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
pos = 25, -10

[State FierceVoice]
type = PlaySnd
trigger1 = animelem = 3
value = 4, 11
channel = 0

[State T4]
type = targetbind
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
pos = 25, -15

[State HitSound]
type = PlaySnd
trigger1 = animelem = 4
value = 6, 3

[State LifeMinus]
type = targetlifeadd
trigger1 = animelem = 4
value = floor(-25 * fvar(10))

[State Hit Count]
type = VarAdd
trigger1 = animelem = 4
var(17) = 1

[State HitCountAdd]
type = HitAdd
trigger1 = animelem = 4
value = 1

[State HitSpark]
type = Explod
trigger1 = animelem = 4
id = 930
anim = F2
pos = 60, -55
postype = p1
removetime = -2
sprpriority = 3
ownpal = 1

[State T5]
type = targetbind
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
pos = 30, -5

[State T6]
type = TargetBind
trigger1 = animelem = 6, >= 0
pos = 25, 0

[State TargetState]
type = TargetState
trigger1 = animtime = 0 && var(3) >= 160
value = 936

[State 9]
type = ChangeState
trigger1 = animtime = 0 && var(3) >= 160
value = 931


;==============================================================================================
[Statedef 932]
type = S
movetype = A
physics = S
anim = 932
velset = 0, 0
sprpriority = -2

[State Tech]
type = changestate
trigger1 = numtarget && var(27) > 0
trigger1 = (target, command = "holdfwd" || target, command = "holdback") && target, command != "holdup" && target, command != "holddown"
trigger1 = (target, command = "b" || target, command = "c" || target, command = "y" || target, command = "z")
value = 990

[State TargetStateChange]
type = Targetstate
trigger1 = time = 0
value = 937

[State TimeCount]
type = VarAdd
trigger1 = 1
v = 3
value = 1

[State HitCountAdd]
type = sprpriority
trigger1 = animelem = 1
value = -3
persistent = 1

[State HitCountAdd]
type = sprpriority
trigger1 = animelem = 2
value = 5
persistent = 1

[State TimeCount]
type = VarAdd
trigger1 = target, command = "a" || target, command = "b" || target, command = "c"
trigger2 = target, command = "x" || target, command = "y" || target, command = "z"
v = 3
value = 8

[State 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State FlashingFX]
type = PalFx
trigger1 = timemod = 3, 0
add = 48, 48, 48
time = 2

[State Edge]
type = Width
trigger1 = animelemtime(1) >= 0
edge = 65, 0

[State T1]
type = TargetBind
trigger1 = animelemtime(2) < 0
pos = 25, 0

[State T2]
type = TargetBind
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
pos = 25, -5

[State T3]
type = targetbind
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
pos = 25, -10

[State FierceVoice]
type = PlaySnd
trigger1 = animelem = 3
value = 4, 11
channel = 0

[State T4]
type = targetbind
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
pos = 25, -15

[State HitSound]
type = PlaySnd
trigger1 = animelem = 4
value = 6, 3

[State LifeMinus]
type = targetlifeadd
trigger1 = animelem = 4
value = floor(-25 * fvar(10))

[State Hit Count]
type = VarAdd
trigger1 = animelem = 4
var(17) = 1

[State HitCountAdd]
type = HitAdd
trigger1 = animelem = 4
value = 1

[State HitSpark]
type = Explod
trigger1 = animelem = 4
id = 930
anim = F2
pos = 60, -55
postype = p1
removetime = -2
sprpriority = 3
ownpal = 1

[State T5]
type = targetbind
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
pos = 30, -5

[State T6]
type = TargetBind
trigger1 = animelem = 6, >= 0
pos = 25, 0

[State TargetState]
type = TargetState
trigger1 = animtime = 0
value = ifelse(var(3)>= 160, 936, 935)

[State 9]
type = ChangeState
trigger1 = animtime = 0
value = ifelse(var(3)>= 160, 931, 930)


;==============================================================================================
[Statedef 931]
type = S
movetype = I
physics = S
anim = 931
velset = 0, 0
sprpriority = 4

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State ResetVar(3)]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State move]
type = Velset
trigger1 = animelem = 4
x = 8

[State HitSpark]
type = Explod
trigger1 = animelem = 4
id = 930
anim = F2
pos = 60, -55
postype = p1
removetime = -2
sprpriority = 3
ownpal = 1

[State LifeMinus]
type = targetlifeadd
trigger1 = animelem = 4
value = floor(-25 * fvar(10))

[State Hit Count]
type = VarAdd
trigger1 = animelem = 4
var(17) = 1

[State HitCountAdd]
type = HitAdd
trigger1 = animelem = 4
value = 1

[State HitSound]
type = PlaySnd
trigger1 = animelem = 4
value = 6, 5

[State FRoundhouse]
type = PlaySNd
trigger1 = animelem = 3
value = 2, 3
channel = 0

[State 9]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 935]
type = A
movetype = H
physics = N

[State 1]
type = ChangeAnim2
trigger1 = time = 0
value = 935


;==============================================================================================
[Statedef 937]
type = A
movetype = H
physics = N

[State FlashingFX]
type = PalFx
trigger1 = command = "a" || command = "b" || command = "c"
trigger2 = command = "x" || command = "y" || command = "z"
add = 48, 48, 48
time = 2

[State 1]
type = ChangeAnim2
trigger1 = time = 0
value = 937


;==============================================================================================
[Statedef 936]
type = A
movetype = H
physics = N

[State FlashingFX]
type = PalFx
trigger1 = command = "a" || command = "b" || command = "c"
trigger2 = command = "x" || command = "y" || command = "z"
add = 48, 48, 48
time = 2

[State 1]
type = ChangeAnim2
trigger1 = time = 0
value = 936

[State 1]
type = PosAdd
trigger1 = time = 19
y = -60
x = -20

[State 2]
type = VelSet
trigger1 = time = 20
x = -8
y = 1

[State 5]
type = PosAdd
trigger1 = time = 23
y = 50

[State 6]
type = SelfState
trigger1 = time >= 23
value = 5050


;==============================================================================================
[Statedef 990]
type = S
physics = N
movetype = I
anim = 5945
ctrl = 0
velset = 0,0
sprpriority = 1

[State 990, Bind]
type = targetbind
trigger1 = !time && numtarget
pos = 0,0
[State 990, p2state]
type = targetstate
trigger1 = !time && numtarget
value = 995
[State 990, Throw]
type = targetfacing
trigger1 = !time && numtarget
value = -1

[State 990, Pos]
type = posadd
trigger1 = !time
x = 24

[State 990, NHB]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 990, push]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 990, Pos]
type = posset
trigger1 = !time
y = 0
[State 990, Vel]
type = velset
trigger1 = 1
x = -1.425
y = 0

[State 990, Snd]
type = playsnd
trigger1 = time = 2
value = 10, 1
channel = 0

[State 990, FX]
type = playsnd
trigger1 = !time
value = 0, 100

[State 990, FX]
type = explod
trigger1 = !time
anim = F40
sprpriority = 5
postype = p1
pos = 0, -55
ownpal = 1
pausemovetime = -1
supermovetime = -1

[State 990, End]
type = changestate
trigger1 = time>= 27
value = 0
ctrl = 1


;==============================================================================================
[Statedef 995]
type = S
physics = N
movetype = I
ctrl = 0
velset = 0,0
sprpriority = 1

[State 995, Anim]
type = changeanim
trigger1 = !time
value = ifelse(selfanimexist(5945),5945,130)
[State 995, Anim]
type = changeanim
trigger1 = !time && !selfanimexist(5945) && selfanimexist(5910)
value = 5910
[State 995, Anim]
type = changeanim
trigger1 = time>= 20 && anim = 130
value = 140

[State 995, NHB]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 995, push]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 995, Pos]
type = posset
trigger1 = !time
y = 0
[State 995, Vel]
type = velset
trigger1 = 1
x = -1.425
y = 0

[State 995, End]
type = selfstate
trigger1 = time>= 27
value = 0
ctrl = 1


;==============================================================================================
[Statedef 1000]
type = S
movetype = A
physics = S
poweradd = (Var(10)=0) * 100
ctrl = 0
anim = 1000
velset = 0, 0
sprpriority = 2

[State Width]
type = width
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
value = 16, 0

[State Width]
type = width
trigger1 = animelemtime(4) >= -1 && animelemtime(13) < 0
value = 32, 0

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Hadoken!]
type = PlaySnd
trigger1 = animelem = 2
value = 4, 3
channel = 0
volume = 255

[State SuperLight] 
type = Explod
trigger1 = animelem = 4
anim = 4803
pos = 5, 0
postype = p1
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 4
anim = 4803
pos = 6, 1
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "hadouken"
id = 3
pos = 90, -54
postype = p1
stateno =1006
ownpal = 1
size.xscale = 1
size.yscale = 1

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 4
value = 0, 7
volume = 50

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 10000]
type = S
movetype = A
physics = S
anim = 10001
velset = 0
ctrl = 0
poweradd = (Var(10)=0) * 200

[State Do Not Guard]
type = attackdist
trigger1 = 1
value = 0

[State TimeCountVar]
type = VarSet
trigger1 = time > 30
trigger1 = gametime%40 = 1
v = 24
value = 0

[State SuperLight charge for hadouken] 
type = Explod
trigger1 = time = 50
anim = 3910
pos = -23, -55
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = -1
ownpal = 1
scale = 0.1, 0.1
pausemovetime = 9999
removeongethit = 1
removetime = -1
id = 3910

[State 0]
type = ModifyExplod
trigger1 = time < 200
ID = 3910
scale = 0.025 + (0.0005*var(3)), 0.025 + (0.0005*var(3))

[State TimeCount]
type = VarAdd
trigger1 = 1
v = 24
value = 1

[State SuperLight charge for hadouken] 
type = Explod
trigger1 = time = 50
anim = 3910
pos = -23, -55
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = -1
ownpal = 1
scale = 0.1, 0.1
pausemovetime = 9999
removeongethit = 1
removetime = -1
id = 3910

[State 0]
type = ModifyExplod
trigger1 = time < 200
ID = 3910
scale = 0.025 + (0.0005*var(3)), 0.025 + (0.0005*var(3))

[State hadouken hit helper]
type = Helper
trigger1 = time < 10
helpertype = normal
name = "plasma"
id = 3
pos = 300, 300
postype = p1
stateno = 13869
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State 4]
type = PlaySnd
trigger1 = time = 1
value = 0, 14	
volume = 255

[State SuperLight] 
type = Explod
trigger1 = time = 0
ignorehitpause = 1
anim = 9402
persistent = 0
pos = 0, 0
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
ownpal = 1
pausemovetime = 9999
ID = 9402

[State TimeCountVar]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State TimeCount]
type = VarAdd
trigger1 = 1
v = 3
value = 1

[State 0]
type = ModifyExplod
trigger1 = 1
ID = 9402
scale = 0.5 + (0.015*var(3)), 1

[State Speed]
type = varset
trigger1 = time = 0
v = 12
value = 2

[State Speedup]
type = VarAdd
trigger1 = (gametime%40) = 1
v = 12
value = 1

[State Hits]
type = varset
trigger1 = time = 0
v = 13
value = 1

[State Hitup]
type = VarAdd
trigger1 = (gametime%30) = 1
trigger2 = var(18) != 0
trigger2 = (gametime%30) = 16
v = 13
value = 1

[State End] 
type = ChangeState 
triggerall = time > 15
trigger1 = command != "hold_x" 
trigger2 = time > 200 && var(18) = 0
value = 10010
ctrl = 0


;==============================================================================================
[Statedef 10001]
type = S
movetype = A
physics = S
anim = 10001
velset = 0
ctrl = 0
poweradd = (Var(10)=0) * 200

[State Do Not Guard]
type = attackdist
trigger1 = 1
value = 0

[State SuperLight charge for hadouken] 
type = Explod
trigger1 = time = 50
anim = 3910
pos = -23, -55
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = -1
ownpal = 1
scale = 0.1, 0.1
pausemovetime = 9999
removeongethit = 1
removetime = -1
id = 3910

[State 0]
type = ModifyExplod
trigger1 = time < 200
ID = 3910
scale = 0.025 + (0.0005*var(3)), 0.025 + (0.0005*var(3))

[State hadouken hit helper]
type = Helper
trigger1 = time < 10
helpertype = normal
name = "plasma"
id = 3
pos = 300, 300
postype = p1
stateno = 13869
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State 4]
type = PlaySnd
trigger1 = time = 1
value = 0, 14	
volume = 255

[State SuperLight] 
type = Explod
trigger1 = time = 0
ignorehitpause = 1
anim = 9402
persistent = 0
pos = 0, 0
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
ownpal = 1
pausemovetime = 9999
ID = 9402

[State TimeCountVar]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State TimeCount]
type = VarAdd
trigger1 = 1
v = 3
value = 1

[State 0]
type = ModifyExplod
trigger1 = 1
ID = 9402
scale = 0.5 + (0.015*var(3)), 1

[State Speed]
type = varset
trigger1 = time = 0
v = 12
value = 4

[State Speedup]
type = VarAdd
trigger1 = (gametime%40) = 1
v = 12
value = 1

[State Hits]
type = varset
trigger1 = time = 0
v = 13
value = 4

[State Hitup]
type = VarAdd
trigger1 = (gametime%30) = 1
trigger2 = var(18) != 0
trigger2 = (gametime%30) = 16
v = 13
value = 1

[State End] 
type = ChangeState 
triggerall = time > 20
trigger1 = command != "hold_y" 
trigger2 = time > 200 && var(18) = 0
value = 10010
ctrl = 0


;==============================================================================================
[Statedef 10002]
type = S
movetype = A
physics = S
anim = 10001
velset = 0
ctrl = 0
poweradd = (Var(10)=0) * 200

[State Do Not Guard]
type = attackdist
trigger1 = 1
value = 0

[State SuperLight charge for hadouken] 
type = Explod
trigger1 = time = 50
anim = 3910
pos = -23, -55
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = -1
ownpal = 1
scale = 0.1, 0.1
pausemovetime = 9999
removeongethit = 1
removetime = -1
id = 3910

[State 0]
type = ModifyExplod
trigger1 = time < 200
ID = 3910
scale = 0.025 + (0.0005*var(3)), 0.025 + (0.0005*var(3))

[State hadouken hit helper]
type = Helper
trigger1 = time < 10
helpertype = normal
name = "plasma"
id = 3
pos = 300, 300
postype = p1
stateno = 13869
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State 4]
type = PlaySnd
trigger1 = time = 1
value = 0, 14	
volume = 255

[State SuperLight] 
type = Explod
trigger1 = time = 0
ignorehitpause = 1
anim = 9402
persistent = 0
pos = 0, 0
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
ownpal = 1
pausemovetime = 9999
ID = 9402

[State TimeCountVar]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State TimeCount]
type = VarAdd
trigger1 = 1
v = 3
value = 1

[State 0]
type = ModifyExplod
trigger1 = 1
ID = 9402
scale = 0.5 + (0.015*var(3)), 1

[State Speed]
type = varset
trigger1 = time = 0
v = 12
value = 6

[State Speedup]
type = VarAdd
trigger1 = (gametime%40) = 1
v = 12
value = 1

[State Hits]
type = varset
trigger1 = time = 0
v = 13
value = 5

[State Hitup]
type = VarAdd
trigger1 = (gametime%30) = 1
trigger2 = var(18) != 0
trigger2 = (gametime%30) = 16
v = 13
value = 1

[State End] 
type = ChangeState 
triggerall = time > 25
trigger1 = command != "hold_z" 
trigger2 = time > 200 && var(18) = 0
trigger3 = AILevel
trigger3 = random < (1000 * (AIlevel ** 2 / 64.0))
value = 10010
ctrl = 0


;==============================================================================================
[Statedef 10010]
type = S
movetype = A
physics = S
poweradd = (Var(10)=0) * 100
ctrl = 0
anim = 13909
velset = 0, 0
sprpriority = 2

[State Removeburstknuckle]
type = RemoveExplod
trigger1 = 1
id = 3910

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Hadoken!]
type = PlaySnd
trigger1 = animelem = 1
value = 4, 3
channel = 0
volume = 255

[State SuperLight] 
type = Explod
trigger1 = animelem = 2
anim = 4803
pos = 5, 0
postype = p1
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 2
anim = 4803
pos = 6, 1
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal
name = "hadouken"
id = 3
pos = 90, -54
postype = p1
stateno =10100
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 1
value = 0, 7
volume = 50

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 10100]
type = S
movetype = A
physics = S
poweradd = (parent, Var(10)=0) * 10
ctrl = 0
anim = 1052
velset = (parent, var(12)), 0
sprpriority = 5
juggle = 10

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
v = 55
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 5]
type = velset
trigger1 = 1
x = parent, var(12)

[State 5f]
type = Hitdef
trigger1 = var(55) < 3
attr = S, SP
damage = ceil(50 * root, fvar(10)), 6
animtype = Hard
guardflag = MA
pausetime = 5, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = Low
fall.animtype = Hard
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, 0
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 44
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 15
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.70, .70, .70
Timegap = 1
FrameGap = 1
Trans = add

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 20

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State PlaySnd]
type = PlaySnd
triggerall = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP
time = -1
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 10101
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(55) >= 3
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(55) < 3 && movecontact
value = 10101


;==============================================================================================
[Statedef 10101]
type = S
movetype = A
physics = N
poweradd = (parent, Var(10)=0) * 10
ctrl = 0
sprpriority = 5

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
v = 55
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 5]
type = velset
trigger1 = time = 0
x = 0

[State 5]
type = velset
trigger1 = time = 7
x = parent, var(12)

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -10, 10

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -10, 10

[State 52s]
type = Hitdef
trigger1 = time > 5
trigger1 = numtarget
trigger1 = target, statetype != A
trigger2 = NumTarget = 0
attr = S, SP
damage = ceil(15 * root, fvar(10)), 5
animtype = Hard
guardflag = MA
pausetime = 0, 5
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guardsound = S0, 100
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, 0
air.type = High
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 44
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = numtarget
trigger1 = target, statetype != A
trigger1 = var(55)=1 || var(55)=3 || var(55)=5 || var(55)=7 || var(55)=9 || var(55) = 11 || var(55)=13 || var(55) = 15 || var(55) = 17 || var(55)= 19 || var(55) = 21
trigger1 = time > 5
trigger1 = Var(55) < (parent, Var(13) -1)
attr = S, SP
damage = ceil(15 * root, fvar(10)), 5
animtype = Hard
guardflag = MA
pausetime = 0, 5
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, 0
fall.animtype = Hard
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 44
p1sprpriority = 5

[State 52s]
type = Hitdef
trigger1 = numtarget
trigger1 = target, statetype = A
trigger1 = time > 5
attr = S, SP
damage = ceil(15 * root, fvar(10)), 5
animtype = Hard
guardflag = MA
pausetime = 0, 10
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guardsound = S0, 100
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, 0
air.type = Low
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 44
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = numtarget
trigger1 = target, statetype = A
trigger1 = var(55)=1 || var(55)=3 || var(55)=5 || var(55)=7 || var(55)=9 || var(55) = 11 || var(55)=13 || var(55) = 15 || var(55) = 17 || var(55)= 19 || var(55) = 21
trigger1 = time > 5
trigger1 = Var(55) < (parent, Var(13) -1)
attr = S, SP
damage = ceil(15 * root, fvar(10)), 5
animtype = Hard
guardflag = MA
pausetime = 0, 10
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, 0
fall.animtype = Hard
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 44
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(55)=-7 || var(55)=-6 || var(55)=-3 || var(55)=-2 || var(55)=1 || var(55) = 2 || var(55)=5 || var(55) = 6 || var(55) = 9 || var(55)= 10 || var(55) = 13
trigger1 = time > 5
trigger1 = Var(55) >= (parent, Var(13) -1)
attr = S, SP
damage = ceil(20 * root, fvar(10)), 6
animtype = Hard
guardflag = MA
pausetime = 0, 5
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 44
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 15
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.70, .70, .70
Timegap = 1
FrameGap = 1
Trans = add

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 20

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP
time = -1
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 10101
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(55) >= (parent, Var(13))
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(55) < (parent, Var(13)) && movecontact
value = 10101


;==============================================================================================
[Statedef 1003]
type = S
movetype = A
physics = S
poweradd = (Var(10)=0) * 10
ctrl = 0
anim = 1000
velset = 0, 0
sprpriority = 2

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "hadouken"
id = 3
pos = 90, -54
postype = p1
stateno =1006
ownpal = 1
size.xscale = 1
size.yscale = 1

[State Hadoken!]
type = PlaySnd
trigger1 = animelem = 2
value = 4, 3
channel = 0
volume = 255

[State SuperLight] 
type = Explod
trigger1 = animelem = 4
anim = 4803
pos = 5, 0
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 4
anim = 4803
pos = 6, 1
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 4
value = 0, 7
volume = 50

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 1001]
type = S
movetype = A
physics = S
poweradd = (Var(10)=0) * 100
ctrl = 0
anim = 1000
velset = 0, 0
sprpriority = 2

[State Width]
type = width
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
value = 16, 0

[State Width]
type = width
trigger1 = animelemtime(4) >= -1 && animelemtime(13) < 0
value = 32, 0

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State HadokenVoice]
type = PlaySnd
trigger1 = time = 2
value = 4, 3
channel = 0
volume = 255

[State SuperLight] 
type = Explod
trigger1 = animelem = 4
anim = 4803
pos = 5, 0
postype = p1
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 4
anim = 4803
pos = 6, 1
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "hadouken"
id = 3
pos = 95, -54
postype = p1
stateno =1007
ownpal = 1
size.xscale = 1.05
size.yscale = 1

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 4
value = 0, 7
volume = 50

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 1004]
type = S
movetype = A
physics = S
poweradd = (Var(10)=0) * 10
ctrl = 0
anim = 1000
velset = 0, 0
sprpriority = 2

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 3
anim = 4803
pos = 5, 0
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 3
anim = 4803
pos = 6, 1
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State HadokenVoice]
type = PlaySnd
trigger1 = time = 2
value = 4, 3
channel = 0
volume = 255

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "hadouken"
id = 3
pos = 95, -54
postype = p1
stateno =1007
ownpal = 1
size.xscale = 1.05
size.yscale = 1

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 4
value = 0, 7
volume = 50

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 1002]
type = S
movetype = A
physics = S
poweradd = (Var(10)=0) * 100
ctrl = 0
anim = 1000
velset = 0, 0
sprpriority = 2

[State Width]
type = width
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
value = 16, 0

[State Width]
type = width
trigger1 = animelemtime(4) >= -1 && animelemtime(13) < 0
value = 32, 0

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State HadokenVoice]
type = PlaySnd
trigger1 = time = 2
value = 4, 3
channel = 0
volume = 255

[State SuperLight] 
type = Explod
trigger1 = animelem = 4
anim = 4803
pos = 5, 0
postype = p1
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 4
anim = 4803
pos = 6, 1
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "hadouken"
id = 3
pos = 90, -54
postype = p1
stateno =1008
ownpal = 1
size.xscale = 1.1
size.yscale = 1

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 4
value = 0, 7
volume = 50

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 1005]
type = S
movetype = A
physics = S
poweradd = (Var(10)=0) * 10
ctrl = 0
anim = 1000
velset = 0, 0
sprpriority = 2
juggle = 15

[State SuperLight] 
type = Explod
trigger1 = animelem = 3
anim = 4803
pos = 5, 0
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 3
anim = 4803
pos = 6, 1
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State HadokenVoice]
type = PlaySnd
trigger1 = time = 2
value = 4, 3
channel = 0
volume = 255

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "hadouken"
id = 3
pos = 95, -54
postype = p1
stateno =1008
ownpal = 1
size.xscale = 1.1
size.yscale = 1

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 4
value = 0, 7
volume = 50

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 1030]
type = S
movetype = A
physics = S
poweradd = (Var(10)=0) * 100
ctrl = 0
anim = 1001
velset = 0, 0
sprpriority = 2

[State Hadoken!]
type = PlaySnd
trigger1 = animelem = 6
value = 4, 3
channel = 0
volume = 255

[State SuperLight] 
type = Explod
trigger1 = animelem = 5
anim = 4803
pos = 5, 0
postype = p1
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 5
anim = 4803
pos = 6, 1
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 7
helpertype = normal
name = "hadouken"
id = 3
pos = 95, -54
postype = p1
stateno =1006
ownpal = 1
size.xscale = 1
size.yscale = 1

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 7
value = 0, 7
volume = 50

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 1033]
type = S
movetype = A
physics = S
poweradd = (Var(10)=0) * 10
ctrl = 0
anim = 1001
velset = 0, 0
sprpriority = 2

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 7
helpertype = normal
name = "hadouken"
id = 3
pos = 95, -54
postype = p1
stateno =1006
ownpal = 1
size.xscale = 1
size.yscale = 1

[State Hadoken!]
type = PlaySnd
trigger1 = animelem = 6
value = 4, 3
channel = 0
volume = 255

[State SuperLight] 
type = Explod
trigger1 = animelem = 5
anim = 4803
pos = 5, 0
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 5
anim = 4803
pos = 6, 1
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 7
value = 0, 7
volume = 50

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 1031]
type = S
movetype = A
physics = S
poweradd = (Var(10)=0) * 100
ctrl = 0
anim = 1001
velset = 0, 0
sprpriority = 2

[State HadokenVoice]
type = PlaySnd
trigger1 = time = 6
value = 4, 3
channel = 0
volume = 255

[State SuperLight] 
type = Explod
trigger1 = animelem = 5
anim = 4803
pos = 5, 0
postype = p1
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 5
anim = 4803
pos = 6, 1
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 7
helpertype = normal
name = "hadouken"
id = 3
pos = 95, -54
postype = p1
stateno =1007
ownpal = 1
size.xscale = 1.05
size.yscale = 1

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 7
value = 0, 7
volume = 50

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 1034]
type = S
movetype = A
physics = S
poweradd = (Var(10)=0) * 10
ctrl = 0
anim = 1001
velset = 0, 0
sprpriority = 2

[State SuperLight] 
type = Explod
trigger1 = animelem = 3
anim = 4803
pos = 5, 0
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 3
anim = 4803
pos = 6, 1
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State HadokenVoice]
type = PlaySnd
trigger1 = time = 2
value = 4, 3
channel = 0
volume = 255

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "hadouken"
id = 3
pos = 95, -54
postype = p1
stateno =1007
ownpal = 1
size.xscale = 1.05
size.yscale = 1

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 4
value = 0, 7
volume = 50

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 1032]
type = S
movetype = A
physics = S
poweradd = (Var(10)=0) * 100
ctrl = 0
anim = 1001
velset = 0, 0
sprpriority = 2

[State HadokenVoice]
type = PlaySnd
trigger1 = time = 6
value = 4, 3
channel = 0
volume = 255

[State SuperLight] 
type = Explod
trigger1 = animelem = 5
anim = 4803
pos = 5, 0
postype = p1
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 5
anim = 4803
pos = 6, 1
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 7
helpertype = normal
name = "hadouken"
id = 3
pos = 95, -54
postype = p1
stateno =1008
ownpal = 1
size.xscale = 1.1
size.yscale = 1

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 7
value = 0, 7
volume = 50

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 1035]
type = S
movetype = A
physics = S
poweradd = (Var(10)=0) * 10
ctrl = 0
anim = 1000
velset = 0, 0
sprpriority = 2
juggle = 15

[State SuperLight] 
type = Explod
trigger1 = animelem = 3
anim = 4803
pos = 5, 0
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 3
anim = 4803
pos = 6, 1
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State HadokenVoice]
type = PlaySnd
trigger1 = time = 2
value = 4, 3
channel = 0
volume = 255

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "hadouken"
id = 3
pos = 95, -54
postype = p1
stateno =1008
ownpal = 1
size.xscale = 1.1
size.yscale = 1

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 4
value = 0, 7
volume = 50

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 1006]
type = S
movetype = A
physics = S
poweradd = (parent, Var(10)=0) * 10
ctrl = 0
anim = 1015
velset = 2, 0
sprpriority = 5
juggle = 10

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -1, 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -1, 0

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP
time = 1
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1012
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = projhit = 1
trigger2 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 5]
type = velset
trigger1 = 1
x = 2

[State 5]
type = Hitdef
trigger1 = 1
attr = S, SP
damage = ceil(50 * root, fvar(10)), 6
animtype = Light
guardflag = MA
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
pausetime = 0, 9
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2
air.type = Low
air.velocity = -2, -2
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall.recover = (var(10) <= 0)
fall.recovertime = 32
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p1sprpriority = 5

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Dissipate]
type = Changestate
trigger1 = movecontact
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012


;==============================================================================================
[Statedef 1007]
type = S
movetype = A
physics = S
poweradd = (parent, Var(10)=0) * 10
ctrl = 0
anim = 1015
velset = 2, 0
sprpriority = 5
juggle = 10

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
v = 55
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 5]
type = velset
trigger1 = 1
x = 3

[State 5f]
type = Hitdef
trigger1 = var(55) < 3
attr = S, SP
damage = ceil(50 * root, fvar(10)), 6
animtype = Hard
guardflag = MA
pausetime = 0, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 32
p1sprpriority = 5

[State 5d]
type = Hitdef
trigger1 = var(55) >= 3
attr = S, SP
damage = ceil(50 * root, fvar(10)), 6
animtype = Hard
guardflag = MA
pausetime = 0, 10
guard.sparkno = 40; S9200
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -6, -5
air.type = Low
air.velocity = -6, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 32
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
time = -1
value = SCA, AP
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1012
attr = SCA, AA, AP, AT
ignorehitpause = 1
ause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(55) >= 3
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(55) < 3 && movecontact
value = ifelse(numtarget, 1990, 1012)


;==============================================================================================
[Statedef 1990]
type = S
movetype = A
physics = N
poweradd = (parent, Var(10)=0) * 10
ctrl = 0
sprpriority = 5

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
v = 55
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 5]
type = velset
trigger1 = 1
x = 3

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -20, 20

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -20, 20

[State 51s]
type = Hitdef
trigger1 = var(55) < 2
attr = S, SP
damage = ceil(25 * root, fvar(10)), 3
animtype = Hard
guardflag = MA
pausetime = 0, 5
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 32
p1sprpriority = 5

[State 5a]
type = Hitdef
trigger1 = var(55) >= 2
attr = S, SP
damage = ceil(25 * root, fvar(10)), 3
animtype = Hard
guardflag = MA
pausetime = 0, 5
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
ground.velocity = -6, -5
air.type = Low
air.velocity = -6, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 32
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP
time = 1
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1012
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(55) >= 3
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(55) < 3 && movecontact
value = ifelse(numtarget, 1990, 1012)


;==============================================================================================
[Statedef 1008]
type = S
movetype = A
physics = S
poweradd = (parent, Var(10)=0) * 10
ctrl = 0
anim = 1015
velset = 3, 0
sprpriority = 5
juggle = 10

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
persistent = 1
v = 54
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 5]
type = velset
trigger1 = 1
x = 4

[State 5]
type = Hitdef
trigger1 = var(54) < 4
attr = S, SP
damage = ceil(50 * root, fvar(10)), 6
animtype = Hard
guardflag = MA
pausetime = 0, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
fall = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 32
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(54) >= 4
attr = S, SP
damage = ceil(50 * root, fvar(10)), 6
animtype = Hard
guardflag = MA
pausetime = 0, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -6, -5
air.type = Low
air.velocity = -6, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
fall = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 32
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
time = -1
value = SCA, AP
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1012
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(54) >= 4
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(54) < 4 && movecontact
value = ifelse(numtarget, 1991, 1012)


;==============================================================================================
[Statedef 1991]
type = S
movetype = A
physics = S
poweradd = (parent, Var(10)=0) * 10
ctrl = 0
sprpriority = 5

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
persistent = 1
v = 54
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 5]
type = velset
trigger1 = 1
x = 4

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -20, 20

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -20, 20

[State 5]
type = Hitdef
trigger1 = var(54) < 3
attr = S, SP
damage = ceil(20 * root, fvar(10)), 3
animtype = Hard
guardflag = MA
pausetime = 0, 10
sparkxy = var(52), var(53)
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
fall = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 32
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(54) >= 3
attr = S, SP
damage = ceil(20 * root, fvar(10)), 3
animtype = Hard
guardflag = MA
pausetime = 0, 7
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
ground.velocity = -6, -5
air.type = Low
air.velocity = -6, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 32
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP
time = 1
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1012
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(54) >= 4
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(54) < 4 && movecontact
value = ifelse(numtarget, 1991, 1012)


;==============================================================================================
[Statedef 1009]
type = S
movetype = A
physics = S
ctrl = 0
anim = 1017
velset = 2, 0
sprpriority = 5

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Slow Motion]
type = Pause 
triggerall = roundstate = 2 && p2life > 0
trigger1 = p2movetype = H && movecontact = 0
trigger1 = p2dist x < 100
time = 2 
movetime = 0
ignorehitpause = 1

[State heartheswoosh!]
type = Playsnd
trigger1 = time = 0
value = 0, 14
freqmul = 0.7
channel =1

[State heartheswoosh!]
type = Playsnd
trigger1 = (gametime%9) = 1
value = 0, 14
channel = 2

[State Randomizer1]
type = varrandom
trigger1 = 1
v = 53
range = -3, 3

[State Randomizer2]
type = varrandom
trigger1 = 1
v = 54
range = -4, -9

[State FireB]
type = Explod
trigger1 = random <= 500
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 0, -10
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(54), (var(53))
scale = 0.2, 1.5
accel = -(var(54))/4, -(var(53))/4

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -5, 5

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 36
range = -5, 10

[State FireB]
type = Explod
trigger1 = random <= 500
persistent = 1
anim = 12216
id = 12213
postype = p1
pos = 0, -10
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(36), (var(35))
scale = 0.2, 1.5
accel = -(var(36))/5, -(var(35))/5

[State Randomizer4]
type = varrandom
trigger1 = 1
v = 37
range = -10, 10

[State Randomizer5]
type = varrandom
trigger1 = 1
v = 38
range = -6, 10

[State FireB]
type = Explod
trigger1 = random <= 500
persistent = 1
anim = 12216
id = 12213
postype = p1
pos = 0, -10
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(38), (var(37))
scale = 0.2, 1.5
accel = -(var(38))/6, -(var(37))/6

[State SuperLight] 
type = Explod
triggerall = movecontact = 0
trigger1 = gametime%3 = 1
anim = 1031
pos = -10, 57
postype = p1
sprpriority = 4
supermovetime = -1
ownpal = 1
removeongethit = 1
scale = 1, 0.7

[State SuperLight] 
type = Explod
triggerall = movecontact = 0
trigger1 = gametime%5 = 1
anim = 1032
pos = -5, -4
postype = p1
sprpriority = 4
supermovetime = -1
ownpal = 1
removeongethit = 1
scale = 0.6, 0.6

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -3, 3

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = 3, 9

[State FireB]
type = Explod
trigger1 = time = [0, 6]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -9
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1.5
accel = -1/3*(var(51)), 0

[State FireB]
type = Explod
trigger1 = time = [0, 6]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = -45, -9
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1.5
accel = -1/3*(var(52)), 0

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -3

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 500
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -9
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 500
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -9
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 15
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.70, .70, .70
Timegap = 1
FrameGap = 1
Trans = add

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
persistent = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -40
random = 50, 40
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
persistent = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -80
random = 50, 40
bindtime = -1
sprpriority = 2
ownpal = 1

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1
channel = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP
time = 1
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1992
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 5]
type = velset
trigger1 = 1
x = 8

[State 5]
type = Hitdef
trigger1 = var(54) < 12
attr = S, HP
damage = ceil(12 * root, fvar(10)), 3
animtype = Hard
getpower = 0, 0
givepower = 80
guardflag = MA
pausetime = 0, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
fall.animtype = Hard
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall.recover = 0
fall.recovertime = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p1sprpriority = 5
fall = 1

[State 5]
type = Hitdef
trigger1 = var(54) >= 12
attr = S, HP
damage = ceil(12 * root, fvar(10)), 3
animtype = Hard
getpower = 0, 0
givepower = 80
guardflag = MA
pausetime = 0, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall.recover = 0
fall.recovertime = 120
pausemovetime = 99
Supermovetime = 99
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p1sprpriority = 5
fall = 1

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
trigger1 = ((Target, GetHitVar(hitcount)) % 3) = 1
var(17) = 1

[State Dissipate]
type = Changestate
trigger1 = Var(54) >= 12
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(54) < 12 && movecontact
value = 1992


;==============================================================================================
[Statedef 1992]
type = S
movetype = A
physics = S
ctrl = 0
sprpriority = 5

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
persistent = 1
v = 54
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 0.8
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 0.8
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 5]
type = velset
trigger1 = time > 3
x = 8

[State 5]
type = velset
trigger1 = time <= 3
x = ifelse(p2dist x < 0, 0, 1)

[State Randomizer]
type = varrandom
trigger1 = 1
v = 55
range = -15, 15

[State Randomizer]
type = varrandom
trigger1 = 1
v = 56
range = -15, 15

[State 5]
type = Hitdef
trigger1 = var(54) < 10
attr = S, HP
damage = ceil(12 * root, fvar(10)), 3
animtype = Hard
guardflag = MA
pausetime = 0, 10
getpower = 0, 0
sparkxy = var(55), var(56)
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -8, -6
air.type = high
air.velocity = -8, -6
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = 0
fall.recovertime = 120
p1sprpriority = 5
fall = 1

[State 5]
type = Hitdef
trigger1 = var(54)=-7 || var(54)=-6 || var(54)=-3 || var(54)=-2 || var(54)=1 || var(54) = 2 || var(54)=5 || var(54) = 6 || var(54) = 9 || var(54)= 10 || var(54) = 13
trigger1 = var(54) < 10
attr = S, HP
damage = ceil(12 * root, fvar(10)), 3
animtype = Hard
guardflag = MA
pausetime = 0, 10
getpower = 0, 0
sparkxy = var(55), var(56)
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -8, -6
fall.animtype = Hard
air.velocity = -8, -6
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = 0
fall.recovertime = 120
p1sprpriority = 5
fall = 1

[State 5]
type = Hitdef
trigger1 = var(54) >= 8
attr = S, SP
damage = ceil(16 * root, fvar(10)), 2
animtype = Hard
guardflag = MA
pausetime = 0, 10
sparkxy = var(55), var(56)
guard.sparkno = 40; S9200
getpower = 0, 0
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -8, -6
air.type = high
air.velocity = -8, -6
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
trigger1 = ((Target, GetHitVar(hitcount)) % 3) = 1
var(17) = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1
channel = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP
time = 1
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1992
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(54) >= 9
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(54) < 9 && movecontact
value = 1992


;==============================================================================================
[Statedef 1013]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10170
velset = 2, 0
sprpriority = 5

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 1]
type = screenbound
trigger1 = time < 50
value = 0
movecamera = 1, 0

[State 5]
type = velset
trigger1 = !time && vel x < 9
x = 9.0

[State 5]
type = velset
trigger1 = movecontact
x = 2.0
persistent = 0

[State 5]
type = veladd
trigger1 = movecontact || vel x < 9
x = 0.5

[State Slow Motion]
type = Pause 
triggerall = roundstate = 2 && p2life > 0
trigger1 = p2movetype = H && movecontact = 0
trigger1 = p2dist x < 100
time = 2 
movetime = 0
ignorehitpause = 1

[State heartheswoosh!]
type = Playsnd
trigger1 = time = 0
value = 0, 14
freqmul = 0.7
channel = 1

[State heartheswoosh!]
type = Playsnd
trigger1 = (gametime%9) = 1
value = 0, 14
channel = 2

[State SuperLight] 
type = Explod
trigger1 = gametime%3 = 1
anim = 1031
pos = -10, 57
postype = p1
sprpriority = 4
supermovetime = -1
ownpal = 1
removeongethit = 1
scale = 1, 0.7

[State SuperLight] 
type = Explod
trigger1 = gametime%5 = 1
anim = 1032
pos = -5, -4
postype = p1
sprpriority = 4
supermovetime = -1
ownpal = 1
removeongethit = 1
scale = 0.6, 0.6

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -9, -18

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -3, -6

[State FireB]
type = Explod
trigger1 = vel x != 0
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -4
scale = 1, 1
random = 20, 30
sprpriority = 5
ownpal = 1
vel = var(51), 0
accel = var(52)/10, 0

[State FireB]
type = Explod
trigger1 = vel x != 0
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -4
scale = 1, 1
random = 20, 30
sprpriority = 5
ownpal = 1
vel = var(51), 0
accel = var(52)/10, 0

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 20
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.80, .80, .80
Timegap = 1
FrameGap = 1
Trans = add

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
persistent = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -40
random = 50, 40
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
persistent = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -80
random = 50, 40
bindtime = -1
sprpriority = 2
ownpal = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1013
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP
time = -1
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State Randomizer]
type = varrandom
trigger1 = 1
v = 55
range = -25, 25

[State Randomizer]
type = varrandom
trigger1 = 1
v = 56
range = -25, 25

[State 5]
type = Hitdef
trigger1 = 1
attr = S, HP
damage = ceil((60.0 * root, fvar(10)) / (hitcount + 1)), 2
animtype = Hard
fall.animtype = Hard
getpower = 0, 0
givepower = 80
guardflag = MA
pausetime = 4, 6
sparkxy = var(55), var(56)
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = high
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall.recover = 0
fall.recovertime = 120
air.fall = 1
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = random < 500
attr = S, HP
damage = ceil((60.0 * root, fvar(10)) / (hitcount + 1)), 2
animtype = Hard
fall.animtype = Hard
getpower = 0, 0
givepower = 80
guardflag = MA
pausetime = 4, 6
sparkxy = var(55), var(56)
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = low
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall.recover = 0
fall.recovertime = 120
air.fall = 1
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
trigger1 = ((Target, GetHitVar(hitcount)) % 3) = 1
var(17) = 1

[State Dissipate]
type = Changestate
trigger1 = time > 200
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1993


;==============================================================================================
[Statedef 1993]
type = S
movetype = A
physics = S
ctrl = 0
anim = 1011
velset = 2, 0
sprpriority = 5

[State PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 2, 7
persistent = 0
freqmul = 1.2
ignorehitpause = 1
volume = -50

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -12, 12

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -12, 12

[State FireB]
type = Explod
trigger1 = time < 13
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(53))
scale = 0.2, 1.5
accel = 1/2*(var(52)), 1/2*(var(53))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 13
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(53))
scale = 0.2, 1.5
accel = 1/2*(var(52)), 1/2*(var(53))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 13
persistent = 1
anim = 12213
id = 12212
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(53), (var(52))
scale = 0.2, 1.5
accel = 1/2*(var(53)), 1/2*(var(52))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 13
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(53), (var(52))
scale = 0.2, 1.5
accel = 1/2*(var(53)), 1/2*(var(52))
ignorehitpause = 1
pausemovetime = 9999

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = 0, 0, 0

[State Dissipate]
type = destroyself
trigger1 = time >= 18


;==============================================================================================
[Statedef 1010]
type = S
movetype = A
physics = S
poweradd = (Var(10)=0) * 10
ctrl = 0
anim = 10440
velset = 2, 0
sprpriority = 5

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State 5]
type = velset
trigger1 = 1
y = 10

[State 5]
type = Hitdef
trigger1 = 1
attr = S, HP
damage = 100, 10
animtype = Hard
guardflag = MA
pausetime = 0, 8
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2
air.type = Low
air.velocity = -2, -6
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall.recover = 0
fall.recovertime = 120
p1sprpriority = 5

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = 230, 50, -190
sinadd = 48, 48, 40, 40

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 4
PalBright = 0, 0, 0
PalContrast = 258, 48, 18
PalAdd = 200, -100, -100
FrameGap = 1
Trans = add1

[State Dissipate]
type = destroyself
trigger1 = time >= 26


;==============================================================================================
[Statedef 1026]
type = S
movetype = A
physics = N
poweradd = (parent, Var(10)=0) * 10
ctrl = 0
anim = 1015
sprpriority = 5
juggle = 10

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -1, 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -1, 0

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
time = -1
value = SCA, AP
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1012
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = projhit = 1
trigger2 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 5]
type = velset
trigger1 = time = 0
persistent = 0
x = 4 + (Parent, vel x)/3

[State 5]
type = Hitdef
trigger1 = 1
attr = S, SP
damage = ceil(100 * root, fvar(10)), 10
animtype = Light
guardflag = MA
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
pausetime = 0, 9
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2 - (vel x)
air.type = Low
air.velocity = -2 - (vel x), -2
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall.recover = (var(10) <= 0)
fall.recovertime = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 5
PalBright = 0, 0, 0
PalContrast = 0, 30, 100
PalMul = .66, .66, .66
Timegap = 1
FrameGap = 1
Trans = add

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Dissipate]
type = Changestate
trigger1 = movecontact
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012


;==============================================================================================
[Statedef 1027]
type = S
movetype = A
physics = N
poweradd = (parent, Var(10)=0) * 10
ctrl = 0
anim = 1015
sprpriority = 5
juggle = 10

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
v = 55
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 5]
type = velset
trigger1 = time = 0
persistent = 0
x = 5 + (Parent, vel x)/3

[State 5]
type = Hitdef
trigger1 = var(55) < 3
attr = S, SP
damage = ceil(60 * root, fvar(10)), 10
animtype = Hard
guardflag = MA
pausetime = 0, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(55) >= 3
attr = S, SP
damage = ceil(60 * root, fvar(10)), 10
animtype = Hard
guardflag = MA
pausetime = 0, 10
guard.sparkno = 40; S9200
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -6, -5
air.type = Low
air.velocity = -6, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 5
PalBright = 0, 0, 0
PalContrast = 0, 30, 100
PalMul = .66, .66, .66
Timegap = 1
FrameGap = 1
Trans = add

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
time = -1
value = SCA, AP
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1012
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(55) >= 3
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(55) < 3 && movecontact
value = 1025


;==============================================================================================
[Statedef 1025]
type = S
movetype = A
physics = N
poweradd = (parent, Var(10)=0) * 10
ctrl = 0
sprpriority = 5

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
v = 55
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -20, 20

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -20, 20

[State 5]
type = Hitdef
trigger1 = var(55) < 2
attr = S, SP
damage = ceil(60 * root, fvar(10)), 10
animtype = Hard
guardflag = MA
pausetime = 0, 5
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(55) >= 2
attr = S, SP
damage = ceil(60 * root, fvar(10)), 10
animtype = Hard
guardflag = MA
pausetime = 0, 5
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
ground.velocity = -6, -5
air.type = Low
air.velocity = -6, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 5
PalBright = 0, 0, 0
PalContrast = 0, 30, 100
PalMul = .66, .66, .66
Timegap = 1
FrameGap = 1
Trans = add

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1025
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP
time = -1
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(55) >= 3
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(55) < 3 && movecontact
value = 1025


;==============================================================================================
[Statedef 1028]
type = S
movetype = A
physics = N
poweradd = (parent, Var(10)=0) * 10
ctrl = 0
anim = 1015
sprpriority = 5
juggle = 10

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
persistent = 1
v = 54
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 5]
type = velset
trigger1 = time = 0
persistent = 0
x = 6 + (Parent, vel x)/3

[State 5]
type = Hitdef
trigger1 = var(54) < 4
attr = S, SP
damage = ceil(60 * root, fvar(10)), 10
animtype = Hard
guardflag = MA
pausetime = 0, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(54) >= 4
attr = S, SP
damage = ceil(60 * root, fvar(10)), 10
animtype = Hard
guardflag = MA
pausetime = 0, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -6, -5
air.type = Low
air.velocity = -6, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 5
PalBright = 0, 0, 0
PalContrast = 0, 30, 100
PalMul = .66, .66, .66
Timegap = 1
FrameGap = 1
Trans = add

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State NHB]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1024
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP
time = -1
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(54) >= 4
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(54) < 4 && movecontact
value = 1024


;==============================================================================================
[Statedef 1024]
type = S
movetype = A
physics = N
poweradd = (parent, Var(10)=0) * 10
ctrl = 0
sprpriority = 5

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
persistent = 1
v = 54
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -20, 20

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -20, 20

[State 5]
type = Hitdef
trigger1 = var(54) < 3
attr = S, SP
damage = ceil(60 * root, fvar(10)), 10
animtype = Hard
guardflag = MA
pausetime = 0, 10
sparkxy = var(52), var(53)
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(54) >= 3
attr = S, SP
damage = ceil(60 * root, fvar(10)), 10
animtype = Hard
guardflag = MA
pausetime = 0, 7
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
ground.velocity = -6, -5
air.type = Low
air.velocity = -6, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 5
PalBright = 0, 0, 0
PalContrast = 0, 30, 100
PalMul = .66, .66, .66
Timegap = 1
FrameGap = 1
Trans = add

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State NHB]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1024
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP
time = -1
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(54) >= 4
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(54) < 4 && movecontact
value = 1024


;==============================================================================================
[Statedef 1016]
type = S
movetype = A
physics = N
poweradd = (Var(10)=0) * 10
ctrl = 0
anim = 1018
velset = 2, 2
sprpriority = 5

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 11241
id = 12213
postype = p1
pos = -20, -17
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -1, -1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 11240
id = 12213
postype = p1
pos = -20, -17
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -1, -1

[State 5]
type = Hitdef
trigger1 = 1
attr = A, SP
damage = ceil(35 * root, fvar(10)), 4
animtype = Light
hitflag = MAFD
guardflag = MA
pausetime = 0, 9
guard.sparkno = 40; S9200
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4
air.type = High
air.velocity = -4, 4
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall.recover = (var(10) <= 0)
fall.recovertime = 120
air.fall = 1
down.velocity = 0, 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State FireB]
type = Explod
trigger1 = projHit = 1
trigger1 = numexplod(2500) < 1
persistent = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -40
random = 50, 40
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = projHit = 1
trigger1 = numexplod(2500) < 1
persistent = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -80
random = 50, 40
bindtime = -1
sprpriority = 2
ownpal = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
time = -1
value = SCA, AP
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1022
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = projhit = 1
trigger2 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State Dissipate]
type = Changestate
trigger1 = movecontact
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1022

[State Dissipate]
type = changestate
trigger1 = pos y >= 2
value = 1023


;==============================================================================================
[Statedef 1017]
type = S
movetype = A
physics = N
poweradd = (Var(10)=0) * 10
ctrl = 0
anim = 1018
velset = 3, 3
sprpriority = 5
juggle = 0

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
v = 55
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 11241
id = 12213
postype = p1
pos = -20, -17
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -1, -1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 11240
id = 12213
postype = p1
pos = -20, -17
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -1, -1

[State 5]
type = Hitdef
trigger1 = var(55) < 3
attr = A, SP
damage = ceil(35 * root, fvar(10)), 4
animtype = Hard
hitflag = MAFD
guardflag = MA
pausetime = 0, 10
guard.sparkno = 40; S9200
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2
air.type = High
air.velocity = -2, -2
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
air.fall = 1
down.velocity = 0, 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(55) >= 3
attr = A, SP
damage = ceil(35 * root, fvar(10)), 4
animtype = Hard
hitflag = MAFD
guardflag = MA
pausetime = 0, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
ground.hittime = 18
ground.velocity = -6
air.type = Low
air.velocity = -6, -5
air.fall = 1
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
fall = 1
down.velocity = 0, 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
time = -1
value = SCA, AP
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1022
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = projhit = 1
trigger2 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State Dissipate]
type = Changestate
trigger1 = Var(55) < 3 && movecontact
value = ifelse(numtarget, 1890, 1022)

[State Dissipate]
type = changestate
trigger1 = pos y >= 2
value = 1023


;==============================================================================================
[Statedef 1890]
type = S
movetype = A
physics = N
poweradd = (Var(10)=0) * 10
ctrl = 0
velset = 3, 3
sprpriority = 5

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
v = 55
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 11241
id = 12213
postype = p1
pos = -20, -17
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -1, -1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 11240
id = 12213
postype = p1
pos = -20, -17
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -1, -1

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP
time = 1
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1022
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = projhit = 1
trigger2 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -20, 20

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -20, 20

[State 5]
type = Hitdef
trigger1 = var(55) < 2
attr = A, SP
damage = ceil(18 * root, fvar(10)), 2
animtype = Hard
hitflag = MAFD
guardflag = MA
pausetime = 0, 10
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4
air.type = High
air.velocity = -4, 5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
down.velocity = 0, 0
ground.cornerpush.veloff = 0
air.fall = 1
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(55) >= 2
attr = A, SP
damage = ceil(18 * root, fvar(10)), 2
animtype = Hard
hitflag = MAFD
guardflag = MA
pausetime = 0, 4
pausetime = 0, 10
sparkxy = var(52), var(53)
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4
air.type = High
air.velocity = -4, 5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
air.fall = 1
down.velocity = 0, 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(55) >= 3
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1022

[State Dissipate]
type = Changestate
trigger1 = Var(55) < 3 && movecontact
value = ifelse(numtarget, 1890, 1022)

[State Dissipate]
type = changestate
trigger1 = pos y >= 2
value = 1023


;==============================================================================================
[Statedef 1019]
type = S
movetype = A
physics = N
poweradd = (Var(10)=0) * 10
ctrl = 0
anim = 1018
velset = 4, 4
sprpriority = 5
juggle = 0

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
persistent = 1
v = 54
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 11241
id = 12213
postype = p1
pos = -20, -17
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -1, -1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 11240
id = 12213
postype = p1
pos = -20, -17
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -1, -1

[State 5]
type = Hitdef
trigger1 = var(54) < 4
attr = A, HP
damage = ceil(35 * root, fvar(10)), 4
animtype = Hard
hitflag = MAFD
guardflag = MA
pausetime = 0, 10
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2
air.type = High
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
down.velocity = 0, 0
ground.cornerpush.veloff = 0
air.fall = 1
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(54) >= 4
attr = A, HP
damage = ceil(35 * root, fvar(10)), 4
animtype = Hard
hitflag = MAFD
guardflag = MA
pausetime = 0, 10
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -6
air.type = Low
air.velocity = -6, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
down.velocity = 0, 0
air.fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
time = -1
value = SCA, AP
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1022
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = projhit = 1
trigger2 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(54) >= 4
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1022

[State Dissipate]
type = Changestate
trigger1 = Var(54) < 4 && movecontact
value = ifelse(numtarget, 1891, 1022)

[State Dissipate]
type = changestate
trigger1 = pos y >= 2
value = 1023


;==============================================================================================
[Statedef 1891]
type = S
movetype = A
physics = N
poweradd = (Var(10)=0) * 10
ctrl = 0
sprpriority = 5

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
persistent = 1
v = 54
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 11241
id = 12213
postype = p1
pos = -20, -17
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -1, -1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 11240
id = 12213
postype = p1
pos = -20, -17
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -1, -1

[State 5]
type = velset
trigger1 = 1
x = 3

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -20, 20

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -20, 20

[State 5]
type = Hitdef
trigger1 = var(54) < 3
attr = A, HP
damage = ceil(14 * root, fvar(10)), 2
animtype = Hard
hitflag = MAFD
guardflag = MA
pausetime = 0, 10
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4
air.type = High
air.velocity = -4, 5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
air.fall = 1
Supermovetime = 99
down.velocity = 0, 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(54) >= 3
attr = A, HP
damage = ceil(14 * root, fvar(10)), 2
animtype = Hard
hitflag = MAFD
guardflag = MA
pausetime = 0, 6
sparkxy = var(52), var(53)
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4
air.type = High
air.velocity = -4, 5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
down.velocity = 0, 0
ground.cornerpush.veloff = 0
air.fall = 1
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP
time = 1
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1022
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = projhit = 1
trigger2 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(54) >= 4
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1022

[State Dissipate]
type = Changestate
trigger1 = Var(54) < 4 && movecontact
value = ifelse(numtarget, 1891, 1022)

[State Dissipate]
type = changestate
trigger1 = pos y >= 2
value = 1023


;==============================================================================================
[Statedef 1070]
type = S
movetype = A
physics = S
ctrl = 0
anim = 1017
velset = 2, 0
sprpriority = 5

[State Slow Motion]
type = Pause 
triggerall = roundstate = 2 && p2life > 0
trigger1 = p2movetype = H && movecontact = 0
trigger1 = p2dist x < 100
time = 2 
movetime = 0
ignorehitpause = 1

[State heartheswoosh!]
type = Playsnd
trigger1 = time = 0
value = 0, 14
freqmul = 0.7
channel = 1

[State heartheswoosh!]
type = Playsnd
trigger1 = (gametime%9) = 1
value = 0, 14
channel = 2

[State Randomizer1]
type = varrandom
trigger1 = 1
v = 53
range = -3, 3

[State Randomizer2]
type = varrandom
trigger1 = 1
v = 54
range = -4, -9

[State FireB]
type = Explod
trigger1 = random <= 500
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 0, -10
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(54), (var(53))
scale = 0.2, 1.5
accel = -(var(54))/4, -(var(53))/4

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -5, 5

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 36
range = -5, 10

[State FireB]
type = Explod
trigger1 = random <= 500
persistent = 1
anim = 12216
id = 12213
postype = p1
pos = 0, -10
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(36), (var(35))
scale = 0.2, 1.5
accel = -(var(36))/5, -(var(35))/5

[State Randomizer4]
type = varrandom
trigger1 = 1
v = 37
range = -10, 10

[State Randomizer5]
type = varrandom
trigger1 = 1
v = 38
range = -6, 10

[State FireB]
type = Explod
trigger1 = random <= 500
persistent = 1
anim = 12216
id = 12213
postype = p1
pos = 0, -10
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(38), (var(37))
scale = 0.2, 1.5
accel = -(var(38))/6, -(var(37))/6

[State SuperLight] 
type = Explod
triggerall = movecontact = 0
trigger1 = gametime%5 = 1
anim = 1032
pos = -5, -4
postype = p1
sprpriority = 4
supermovetime = -1
ownpal = 1
removeongethit = 1
scale = 0.6, 0.6

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -3, 3

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = 3, 9

[State FireB]
type = Explod
trigger1 = time = [0, 6]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -9
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1.5
accel = -1/3*(var(51)), 0

[State FireB]
type = Explod
trigger1 = time = [0, 6]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = -45, -9
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1.5
accel = -1/3*(var(52)), 0

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -3

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 500
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -9
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 500
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -9
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 15
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.70, .70, .70
Timegap = 1
FrameGap = 1
Trans = add

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
persistent = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -40
random = 50, 40
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
persistent = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -80
random = 50, 40
bindtime = -1
sprpriority = 2
ownpal = 1

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1
channel = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP
time = 1
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1071
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 5]
type = velset
trigger1 = 1
x = 8

[State 5]
type = Hitdef
trigger1 = var(54) < 12
attr = A, HP
damage = ceil(12 * root, fvar(10)), 3
animtype = Hard
getpower = 0, 0
givepower = 80
guardflag = MA
pausetime = 0, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = high
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall.recover = 0
fall.recovertime = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(54)=-7 || var(54)=-6 || var(54)=-3 || var(54)=-2 || var(54)=1 || var(54) = 2 || var(54)=5 || var(54) = 6 || var(54) = 9 || var(54)= 10 || var(54) = 13
trigger1 = var(54) < 10
attr = A, HP
damage = ceil(12 * root, fvar(10)), 3
animtype = Hard
guardflag = MA
pausetime = 0, 10
getpower = 0, 0
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -8, -6
fall.animtype = Hard
air.velocity = -8, -6
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = 0
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(54) >= 11
attr = A, HP
damage = ceil(12 * root, fvar(10)), 3
animtype = Hard
getpower = 0, 0
givepower = 80
guardflag = MA
pausetime = 0, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall.recover = 0
fall.recovertime = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
trigger1 = ((Target, GetHitVar(hitcount)) % 3) = 1
var(17) = 1

[State Dissipate]
type = Changestate
trigger1 = Var(54) >= 12
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(54) < 12 && movecontact
value = 1071


;==============================================================================================
[Statedef 1071]
type = S
movetype = A
physics = S
ctrl = 0
sprpriority = 5

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
persistent = 1
v = 54
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 0.8
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 0.8
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 5]
type = velset
trigger1 = time > 3
x = 8

[State 5]
type = velset
trigger1 = time <= 3
x = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -20, 20

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -20, 20

[State 5]
type = Hitdef
trigger1 = var(54) < 12
attr = A, HP
damage = ceil(12 * root, fvar(10)), 3
animtype = Hard
guardflag = MA
pausetime = 0, 10
getpower = 0, 0
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -8, -6
air.type = Low
air.velocity = -8, -6
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = 0
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(54)=-7 || var(54)=-6 || var(54)=-3 || var(54)=-2 || var(54)=1 || var(54) = 2 || var(54)=5 || var(54) = 6 || var(54) = 9 || var(54)= 10 || var(54) = 13
trigger1 = var(54) < 10
attr = A, HP
damage = ceil(12 * root, fvar(10)), 3
animtype = Hard
guardflag = MA
pausetime = 0, 10
getpower = 0, 0
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = Low
fall.animtype = Hard
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -8, -6
air.velocity = -8, -6
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = 0
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(54) >= 8
attr = A, HP
damage = ceil(12 * root, fvar(10)), 3
animtype = Hard
guardflag = MA
pausetime = 0, 10
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
getpower = 0, 0
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -8, -6
air.type = Low
air.velocity = -8, -6
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = 0
fall.recovertime = 120
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
trigger1 = ((Target, GetHitVar(hitcount)) % 3) = 1
var(17) = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1
channel = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP
time = 1
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1071
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(54) >= 9
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(54) < 9 && movecontact
value = 1071


;==============================================================================================
[Statedef 1020]
type = S
movetype = A
physics = N
poweradd = 0
ctrl = 0
anim = 1013
sprpriority = 5
juggle = 10

[State 1]
type = bgpalfx
trigger1 = 1
time = 4
color = 0 + 32 * (time % 8)
mul = 0 + (16 * (time % 8)), 16 + (16 * (time % 8)), 64 + (16 * (time % 8))
ignorehitpause = 1

[State heartheswoosh!]
type = Playsnd
trigger1 = (gametime%9) = 1
value = 0, 14
channel = 2

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 900
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 0, 0
scale = 0.1, 0.75
random = 10, 10
sprpriority = 5
ownpal = 1
vel = -vel x, -Vel Y

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 900
persistent = 1
anim = 12216
id = 12216
postype = p1
pos = 0, 0
scale = 0.1, 0.75
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -vel x, -Vel Y

[State 5]
type = posset
trigger1 = pos x >= 320
x = 320

[State 5]
type = posset
trigger1 = pos x <= -320
x = -320

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
time = -1
value = SCA, AP
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1072
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = projhit = 1
trigger2 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 51]
type = velset
trigger1 = time = 0
x = 6

[State 5]
type = angleset
trigger1 = root, command = "holdfwd"
value = ifelse((root, facing != facing), 180, 0)

[State 5]
type = angleset
trigger1 = root, command = "holdback"
value = ifelse((root, facing != facing), 0, 180)

[State 5]
type = angleset
trigger1 = root, command = "holdup"
value = 90

[State 5]
type = angleset
trigger1 = root, command = "holddown"
value = 270

[State 5]
type = angleset
trigger1 = root, command = "holdfwd"
trigger1 = root, command = "holdup"
value = ifelse((root, facing != facing), 135, 45)

[State 5]
type = angleset
trigger1 = root, command = "holdback"
trigger1 = root, command = "holdup"
value = ifelse((root, facing != facing), 45, 135)

[State 5]
type = angleset
trigger1 = root, command = "holdfwd"
trigger1 = root, command = "holddown"
value = ifelse((root, facing != facing), 225, 315)

[State 5]
type = angleset
trigger1 = root, command = "holdback"
trigger1 = root, command = "holddown"
value = ifelse((root, facing != facing), 315, 225)

[State 5]
type = velmul
trigger1 = 1
x = 1.05
y = 1.05

[State 5]
type = velset
triggerall = movecontact = 0
trigger1 = root, command = "holdfwd"
x = ifelse((root, facing != facing), -6, 6)
y = 0

[State 5]
type = velset
triggerall = movecontact = 0
trigger1 = root, command = "holdback"
x = ifelse((root, facing != facing), 6, -6)
y = 0

[State 5]
type = velset
triggerall = movecontact = 0
trigger1 = root, command = "holdup"
y = -6
x = 0

[State 5]
type = velset
triggerall = movecontact = 0
trigger1 = root, command = "holddown"
y = 6
x = 0

[State 5]
type = velset
trigger1 = root, command = "holdfwd"
trigger1 = root, command = "holdup"
trigger2 = AILevel
trigger2 = p2bodydist x > 0 && p2dist y < 0
trigger2 = random < (1000 * (AIlevel ** 2 / 64.0))
x = ifelse((root, facing != facing) && !(root, AILevel), -6, 6)
y = -6

[State 5]
type = velset
trigger1 = root, command = "holdback"
trigger1 = root, command = "holdup"
trigger2 = AILevel
trigger2 = p2bodydist x < 0 && p2dist y < 0
trigger2 = random < (1000 * (AIlevel ** 2 / 64.0))
x = ifelse((root, facing != facing) && !(root, AILevel), 6, -6)
y = -6

[State 5]
type = velset
trigger1 = root, command = "holdfwd"
trigger1 = root, command = "holddown"
trigger2 = AILevel
trigger2 = p2bodydist x > 0 && p2dist y > 0
trigger2 = random < (1000 * (AIlevel ** 2 / 64.0))
x = ifelse((root, facing != facing) && !(root, AILevel), -6, 6)
y = 6

[State 5]
type = velset
trigger1 = root, command = "holdback"
trigger1 = root, command = "holddown"
trigger2 = AILevel
trigger2 = p2bodydist x < 0 && p2dist y > 0
trigger2 = random < (1000 * (AIlevel ** 2 / 64.0))
x = ifelse((root, facing != facing) && !(root, AILevel), 6, -6)
y = 6

[State Angle]
type= angledraw
trigger1 = 1
ignorehitpause= 1

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 5]
type = Hitdef
trigger1 = 1
attr = A, HP
damage = ceil(50 * root, fvar(10)), 6
animtype = Light
hitflag = MAFD
guardflag = MA
getpower = 0, 0
pausetime = 0, 0
sparkxy = -10, 0
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 0, -8
down.velocity = 0, -8
air.type = Low
air.velocity = 0, -8
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall.recover = (var(10) <= 0)
fall.recovertime = 120
air.fall = 1
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Dissipate]
type = Changestate
trigger1 = root, movetype=H
value = 1012

[State Dissipate]
type = Changestate
trigger1 = movecontact
trigger2 = pos y > -10
trigger3 = time >= 120
trigger4 = !AILevel
trigger4 = root, command = "a" || root, command = "b" || root, command = "c" || root, command = "x" || root, command = "y" || root, command = "z"
trigger5 = AILevel
trigger5 = random < (1000 * (AIlevel ** 2 / 64.0))
trigger5 = (p2bodydist x = [-10, 10]) && (p2dist y = [-10, 10])
value = 1072


;==============================================================================================
[Statedef 1072]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10442
velset = 0, 0
sprpriority = 5

[State Flash]
type = bgpalfx
trigger1 = !time
time = 8
add = 255, 255, 255
sinadd = -255, -255, -255, 32
ignorehitpause = 1

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 1]
type = playsnd
trigger1 = time = 0
value = 8, 5

[State 1]
type = playsnd
trigger1 = time = 0
value = 8, 7

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State 7]
type = HitDef
trigger1 = !time
attr = A, HP
damage = ceil(200 * root, fvar(10)), 25
animtype = Up 
getpower = 0, 0
givepower = 20
priority = 5, Hit
hitflag = MAFD
guardflag = MA
pausetime = 2, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = Hard
air.type = Hard
fall = 1
air.hittime = 50
ground.slidetime = 40
ground.hittime = 50
ground.velocity = 0, -10
air.velocity = 0, -10
air.fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
p1sprpriority = 5

[State Slow Motion]
type = Pause 
trigger1 = roundstate = 2
trigger1 = (movehit=[1, 16]) && numtarget
time = 1 
movetime = 0
ignorehitpause = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -20, 20

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -20, 20

[State FireB]
type = Explod
trigger1 = time < 10
persistent = 1
anim = 12061
id = 12213
postype = p1
pos = 0, 0
random = 30, 30
sprpriority = -5
ownpal = 1
vel = var(52), (var(53))
accel = 1/2*(var(52)), 1/2*(var(53))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 10
persistent = 1
anim = 12061
id = 12212
postype = p1
pos = 0, 0
random = 30, 30
sprpriority = -5
ownpal = 1
vel = var(52), (var(53))
accel = 1/2*(var(52)), 1/2*(var(53))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 10
persistent = 1
anim = 12061
id = 12212
postype = p1
pos = 0, 0
random = 30, 30
sprpriority = -5
ownpal = 1
vel = var(53), (var(52))
accel = 1/2*(var(53)), 1/2*(var(52))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 10
persistent = 1
anim = 12061
id = 12212
postype = p1
pos = 0, 0
random = 30, 30
sprpriority = -5
ownpal = 1
vel = var(53), (var(52))
accel = 1/2*(var(53)), 1/2*(var(52))
ignorehitpause = 1
pausemovetime = 9999

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 18


;==============================================================================================
[Statedef 1022]
type = S
movetype = I
physics = N
ctrl = 0
anim = 1019
velset = 2, 2
sprpriority = 5

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 2, 7
persistent = 0
freqmul = 1.2
ignorehitpause = 1
volume = -50

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -9, 9

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -9, 9

[State FireB]
type = Explod
trigger1 = time < 4
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(53))
scale = 0.2, 1.5
accel = 1/2*(var(52)), 1/2*(var(53))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 4
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(53))
scale = 0.2, 1.5
accel = 1/2*(var(52)), 1/2*(var(53))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 4
persistent = 1
anim = 12213
id = 12212
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(53), (var(52))
scale = 0.2, 1.5
accel = 1/2*(var(53)), 1/2*(var(52))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 4
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(53), (var(52))
scale = 0.2, 1.5
accel = 1/2*(var(53)), 1/2*(var(52))
ignorehitpause = 1
pausemovetime = 9999

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = 0, 0, 0

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State Dissipate]
type = destroyself
trigger1 = time >= 18


;==============================================================================================
[Statedef 1018]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1018
velset = 6, 6
sprpriority = 5

[State Randomizer]
type = varrandom
trigger1 = time = 0
v = 35
range = 7, 15

[State Randomizer]
type = varrandom
trigger1 = time = 0
v = 36
range = 7, 15

[State velarc]
type = Veladd
trigger1 = time = 0
x = var(35)
y = var(36)

[State velarc]
type = Veladd
trigger1 = time = [1, 11]
x = -(var(35))*0.1
y = -(var(36))*0.1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 11241
id = 12213
postype = p1
pos = -20, -17
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -1, -1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 11240
id = 12213
postype = p1
pos = -20, -17
random = 20, 20
sprpriority = 5
ownpal = 1
vel = -1, -1

[State 5]
type = Hitdef
trigger1 = 1
attr = A, HP
damage = ceil(24 * root, fvar(10)), 3
animtype = Light
hitflag = MAFD
guardflag = MA
pausetime = 0, 9
guard.sparkno = 40; S9200
getpower = 0, 0
guardsound = S0, 100
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4
air.type = High
air.velocity = -4, 4
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall.recover = 0
fall.recovertime = 120
air.fall = 1
fall = 1
pausemovetime = 99
Supermovetime = 99
down.velocity = 0, 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = random < 500
attr = A, HP
damage = ceil(24 * root, fvar(10)), 3
animtype = Hard
hitflag = MAFD
guardflag = MA
pausetime = 0, 9
guard.sparkno = 40; S9200
getpower = 0, 0
guardsound = S0, 100
ground.type = low
fall.animtype = Hard
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4
air.velocity = -4, 4
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall.recover = 0
fall.recovertime = 120
air.fall = 1
fall = 1
pausemovetime = 99
Supermovetime = 99
down.velocity = 0, 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p1sprpriority = 5

[State FireB]
type = Explod
trigger1 = projHit = 1
trigger1 = numexplod(2500) < 1
persistent = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -40
random = 50, 40
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = projHit = 1
trigger1 = numexplod(2500) < 1
persistent = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -80
random = 50, 40
bindtime = -1
sprpriority = 2
ownpal = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 15
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.70, .70, .70
Timegap = 1
FrameGap = 1
Trans = add

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP
time = 1
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1022
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = projhit = 1
trigger2 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State Dissipate]
type = Changestate
trigger1 = movecontact
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1022

[State Dissipate]
type = changestate
trigger1 = pos y >= 2
value = 1023


;==============================================================================================
[Statedef 1012]
type = S
movetype = I
physics = S
poweradd = 0
ctrl = 0
anim = 1011
velset = 2, 0
sprpriority = 5

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Angle]
type= angledraw
trigger1 = 1
ignorehitpause= 1

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 2, 7
persistent = 0
freqmul = 1.2
ignorehitpause = 1
volume = -50

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -9, 9

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -9, 9

[State FireB]
type = Explod
trigger1 = time < 4
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(53))
scale = 0.2, 1.5
accel = 1/2*(var(52)), 1/2*(var(53))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 4
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(53))
scale = 0.2, 1.5
accel = 1/2*(var(52)), 1/2*(var(53))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 4
persistent = 1
anim = 12213
id = 12212
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(53), (var(52))
scale = 0.2, 1.5
accel = 1/2*(var(53)), 1/2*(var(52))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 4
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(53), (var(52))
scale = 0.2, 1.5
accel = 1/2*(var(53)), 1/2*(var(52))
ignorehitpause = 1
pausemovetime = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 18


;==============================================================================================
[Statedef 1023]
type = S
movetype = I
physics = N
ctrl = 0
anim = 11243
velset = 0, 0
sprpriority = 5

[State Scale]
type = angledraw
trigger1 = 1
value = 0
scale = 0.7, 0.7

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 128
ignorehitpause = 1

[State PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 2, 7
persistent = 0
freqmul = 1.2
ignorehitpause = 1
volume = -50

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -9, 9

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State charge sound]
type = playsnd
trigger1 = time = 0
value = 2, 7
freqmul = 0.6

[State charge sound]
type = playsnd
trigger1 = time = 0
value = 2, 7

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -9, 9

[State FireB]
type = Explod
trigger1 = time < 4
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(53))
scale = 0.2, 1.5
accel = 1/2*(var(52)), 1/2*(var(53))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 4
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(53))
scale = 0.2, 1.5
accel = 1/2*(var(52)), 1/2*(var(53))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 4
persistent = 1
anim = 12213
id = 12212
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(53), (var(52))
scale = 0.2, 1.5
accel = 1/2*(var(53)), 1/2*(var(52))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 4
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(53), (var(52))
scale = 0.2, 1.5
accel = 1/2*(var(53)), 1/2*(var(52))
ignorehitpause = 1
pausemovetime = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 24


;==============================================================================================
[Statedef 1060]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12222
velset = 0, 0
sprpriority = 3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State bind]
type = Bindtoroot
trigger1 = 1
value = 1
facing = 1

[State FireB]
type = Explod
trigger1 = random <= 300 && time <= 10
persistent = 1
anim = 11241
id = 12213
postype = p1
pos = 50, -20
random = 10, 10
sprpriority = 5
ownpal = 1
vel = -1, -1

[State FireB]
type = Explod
trigger1 = random <= 300 && time <= 10
persistent = 1
anim = 11240
id = 12213
postype = p1
pos = 50, -20
random = 10, 10
sprpriority = 5
ownpal = 1
vel = -1, -1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 15
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.70, .70, .70
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = parent, pos y >= 5
trigger2 = parent, stateno != 1862


;==============================================================================================
[Statedef 1061]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12222
velset = 0, 0
sprpriority = 3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State bind]
type = Bindtoroot
trigger1 = 1
facing = 1

[State FireB]
type = Explod
trigger1 = 1
persistent = 1
anim = 11241
id = 12213
postype = p1
pos = 50, -20
random = 10, 10
sprpriority = 5
ownpal = 1
vel = -1, -1

[State FireB]
type = Explod
trigger1 = 1
persistent = 1
anim = 11240
id = 12213
postype = p1
pos = 50, -20
random = 10, 10
sprpriority = 5
ownpal = 1
vel = -1, -1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 20
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.80, .80, .80
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = parent, pos y >= 5
trigger2 = parent, stateno != 4050


;==============================================================================================
[Statedef 10610]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12233
velset = 0, 0
sprpriority = 5

[State Pos]
type = posset
trigger1 = 1
x = 0

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 20
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.80, .80, .80
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State Dissipate]
type = destroyself
trigger1 = time >= 10


;==============================================================================================
[Statedef 10611]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12234
velset = 0, 0
sprpriority = 5

[State Sound]
type = playsnd
trigger1 = time = 0
value = 2, 8

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = 3, -3

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -6, -9

[State FireB]
type = Explod
trigger1 = time = [0, 4]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 65, -70
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.1, 0.75
accel = -1/3*(var(51)), -(var(51))/6

[State FireB]
type = Explod
trigger1 = time = [0, 4]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = 65, -70
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.1, 0.75
accel = -1/3*(var(52)), -(var(51))/6

[State FireB]
type = Explod
trigger1 = time = [0, 4]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 65, -70
random = 35, 5
sprpriority = 4
ownpal = 1
vel = var(52), (var(51))
scale = 0.1, 0.75
accel = -1/3*(var(51)), -(var(51))/6

[State FireB]
type = Explod
trigger1 = time = [0, 4]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = 65, -70
random = 35, 5
sprpriority = 4
ownpal = 1
vel = var(52), (var(51))
scale = 0.1, 0.75
accel = -1/3*(var(52)), -(var(51))/6

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 10


;==============================================================================================
[Statedef 1062]
type = S
movetype = A
physics = N
ctrl = 0
anim = 2603
velset = 0, 0
sprpriority = 3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 8014]
type = Explod
trigger1 = time = 0
pausemovetime = 100
supermovetime = 100
removetime = 20
bindtime = -1
anim = 2603
pos = 0, 0
scale = 1, 1
sprpriority = -5
id = 2603

[State Sound]
type = playsnd
trigger1 = time = 0
value = 2, 8

[State bind]
type = Bindtoparent
trigger1 = 1
value = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = 3, 9

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -6, 6

[State FireB]
type = Explod
trigger1 = time < 12
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 18, -64
random = 5, 70
sprpriority = 5
ownpal = 1
vel = var(52), (var(51))
scale = 0.1, 0.75
accel = -1/3*(var(51)), -(var(51))/6

[State FireB]
type = Explod
trigger1 = time < 12
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = 18, -64
random = 5, 70
sprpriority = 5
ownpal = 1
vel = var(52), (var(51))
scale = 0.1, 0.75
accel = -1/3*(var(52)), -(var(51))/6

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 18


;==============================================================================================
[Statedef 1063]
type = S
movetype = A
physics = N
ctrl = 0
anim = 13010
velset = 0, 0
sprpriority = -3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State bind]
type = Bindtoparent
trigger1 = 1
value = 1
pos = 24, -59

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = 3, -3

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -6, -9

[State FireB]
type = Explod
trigger1 = time = [2, 8]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.1, 0.75
accel = -1/3*(var(51)), -(var(51))/6

[State FireB]
type = Explod
trigger1 = time = [2, 8]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.1, 0.75
accel = -1/3*(var(52)), -(var(51))/6

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 16


;==============================================================================================
[Statedef 1064]
type = S
movetype = A
physics = N
ctrl = 0
anim = 13012
velset = 0, 0
sprpriority = 3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State bind]
type = Bindtoparent
trigger1 = 1
value = 1
pos = -24, -59

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = 3, -3

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = 6, 9

[State FireB]
type = Explod
trigger1 = time = [2, 8]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = 5
ownpal = 1
vel = var(52), (var(51))
scale = 0.1, 0.75
accel = -1/3*(var(51)), -(var(51))/6

[State FireB]
type = Explod
trigger1 = time = [2, 8]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = 5
ownpal = 1
vel = var(52), (var(51))
scale = 0.1, 0.75
accel = -1/3*(var(52)), -(var(51))/6

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 16


;==============================================================================================
[Statedef 1065]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12030
velset = 0, 0
sprpriority = 3

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 13


;==============================================================================================
[Statedef 1067]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10440
velset = 0, 0
sprpriority = 5

[State 1]
type = posadd
trigger1 = time = 0
y = -pos y

[State 1]
type = playsnd
trigger1 = time = 0
value = 2, 9
freqmul = 0.8

[State 1]
type = playsnd
trigger1 = time = 0
value = 2, 9
freqmul = 1.2

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 14


;==============================================================================================
[Statedef 10670]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10440
velset = 0, 0
sprpriority = 5

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, ifelse((time % 2), 128, 256)
ignorehitpause = 1

[State 1]
type = posadd
trigger1 = time = 0
y = -pos y

[State 1]
type = playsnd
trigger1 = time = 0
value = 2, 9
freqmul = 0.8

[State 1]
type = playsnd
trigger1 = time = 0
value = 2, 9
freqmul = 1.2

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 14


;==============================================================================================
[Statedef 10671]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10441
velset = -10, 0
sprpriority = 5

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, ifelse((time % 2), 128, 256)
ignorehitpause = 1

[State 2]
type = Velmul
trigger1 = 1
x = 0.92

[State 1]
type = posset
trigger1 = time = 0
y = 0

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State Dissipate]
type = destroyself
trigger1 = time >= 30


;==============================================================================================
[Statedef 10672]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10444
velset = 0, 0
sprpriority = 5

[State SuperLight] 
type = Explod
triggerall = movecontact = 0
trigger1 = gametime%10 = 1
anim = 10320
id = 1010
pos = 0, -6
postype = p1
sprpriority = 4
supermovetime = -1
ownpal = 1
removeongethit = 1
scale = 0.6, 0.6
vel = 0, (-1 -(time+50)/10)
pausemovetime = 9999
supermovetime = 9999

[State 0]
type = ModifyExplod
trigger1 = 1
ID = 1010
scale = 1.2 - (0.003*time) , 1

[State 1]
type = bindtoparent
trigger1 = 1
time = 1
pos = 0, 3

[State skin fadeout]
type = PalFx
trigger1 = time = 0
add = -255, -255, -255
sinadd = -255, -255, 255, 200
time = 50
ignorehitpause = 1
persistent = 0

[State 1]
type = palfx
trigger1 = time = 50
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 15
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.70, .70, .70
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = parent, movetype = H
trigger2 = parent, stateno != 3930
trigger3 = parent, movecontact


;==============================================================================================
[Statedef 1068]
type = S
movetype = A
physics = N
ctrl = 0
anim = 13010
velset = 0, 0
sprpriority = 4

[State bind]
type = Bindtoparent
trigger1 = 1
value = 1
pos = 74, -69

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = 3, -3

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -6, -9

[State FireB]
type = Explod
trigger1 = time = [2, 8]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = 4
ownpal = 1
vel = var(52), (var(51))
scale = 0.1, 0.75
accel = -1/3*(var(51)), -(var(51))/6

[State FireB]
type = Explod
trigger1 = time = [2, 8]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = 4
ownpal = 1
vel = var(52), (var(51))
scale = 0.1, 0.75
accel = -1/3*(var(52)), -(var(51))/6

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 15
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.70, .70, .70
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 16


;==============================================================================================
[Statedef 1069]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10440
velset = 0, 0
sprpriority = 3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, ifelse((time % 2), 128, 256)
ignorehitpause = 1

[State 1]
type = playsnd
trigger1 = time = 0
value = 2, 9
freqmul = 0.8

[State 1]
type = playsnd
trigger1 = time = 0
value = 2, 9
freqmul = 1.2

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State 7]
type = HitDef
trigger1 = animelem = 1
attr = A, HA
damage = ceil(20 * root, fvar(10)), 3
animtype = Up
getpower = 0, 0
givepower = 20
priority = 5, Hit
hitflag = MAFD
guardflag = MA
pausetime = 2, 1
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = Hard
air.type = Hard
fall = 1
air.hittime = 50
ground.slidetime = 40
ground.hittime = 50
ground.velocity = 0, -6
air.velocity = 0, -6
air.fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 15
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.70, .70, .70
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State Dissipate]
type = destroyself
trigger1 = time >= 14


;==============================================================================================
[Statedef 1050]
type = S
movetype = I
physics = S
anim = 10900
velset = 0
ctrl = 0
sprpriority = 2

[State End] 
type = ChangeState 
trigger1 = time >= 20
value = 1051
ctrl = 0


;==============================================================================================
[Statedef 1051]
type = S
movetype = I
physics = S
velset = 0
ctrl = 0
sprpriority = 1

[State Shinryuken]
type = PlaySnd
trigger1 = numhelper(2502) > 0
trigger1 = (gametime%15) = 1
persistent = 1
ignorehitpause = 1
value = 2, 7

[State charge sound]
type = playsnd
trigger1 = time = 0
value = 7, 4
volume = -50

[State 2]
type = Playsnd
trigger1 = time = 0
value = 3, 5
channel = 0
volume = 255

[State Randomizer1]
type = varrandom
trigger1 = 1
v = 51
range = -2, -4

[State Randomizer2]
type = varrandom
trigger1 = 1
v = 52
range = 3, 9

[State FireB]
type = Explod
trigger1 = random <= 600
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 14, -6
random = 95, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(51))
scale = 0.1, 0.75
accel = -(var(52))/3, (var(51))/10

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -2, -4

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 36
range = -3, -9

[State FireB]
type = Explod
trigger1 = random <= 600
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 2, -6
random = 95, 10
sprpriority = 5
ownpal = 1
vel = var(36), (var(35))
scale = 0.1, 0.75
accel = -(var(36))/3, (var(35))/10

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 37
range = -20, -60

[State FireB]
type = Helper
triggerall = random <= 600
trigger1 = numhelper(2502) < 1
ignorehitpause = 1
stateno = ifelse(random>500, 94061, 94062)
id = 2502
size.xscale = 0.4
size.yscale = 0.5
postype = p1
pos = 0, var(37)
sprpriority = 2
ownpal = 1

[State FireB]
type = Helper
triggerall = random <= 600
trigger1 = numhelper(2503) < 1
ignorehitpause = 1
stateno = 94063
id = 2503
postype = p1
pos = 0, 0
sprpriority = 2
ownpal = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = 2, 10

[State PowerAdd]
type = PowerAdd 
trigger1 = 1
value = ifelse(time>80, 12, ifelse(time>60, 10, ifelse(time>40, 8, ifelse(time>20, 6, 4))))

[State Blink] 
type = PalFX 
trigger1 = power >= powermax
time = 24
add = 155, 155, 155 
sinadd = -155, -155, -155, 100
persistent= 0

[State Remove Flaming Aura]
type = RemoveExplod
trigger1 = power >= powermax
trigger2 = time > 50
trigger2 = command != "hold_b" ||command != "hold_y" 
id = 9406

[State Remove Windy2]
type = RemoveExplod
trigger1 = power >= powermax
trigger2 = time > 50
trigger2 = command != "hold_b" ||command != "hold_y" 
id = 10

[State End] 
type = ChangeState 
trigger1 = power >= powermax
trigger2 = time > 50
trigger2 = command != "hold_b" ||command != "hold_y" 
value = 1052
ctrl = 0


;==============================================================================================
[Statedef 1052]
type = S
movetype = I
physics = S
anim = 10901
velset = 0
ctrl = 0
sprpriority = 2

[State Remove Windy2]
type = RemoveExplod
trigger1 = power = 3000
id = 10

[State End] 
type = ChangeState 
trigger1 = animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 94061]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0, 0
anim = 2505

[State 01]
type = sprpriority
trigger1 = 1
value = 3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State Dissipate]
type = destroyself
trigger1 = animtime = 0


;==============================================================================================
[Statedef 94062]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0, 0
anim = 2506

[State 01]
type = sprpriority
trigger1 = 1
value = 3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State Dissipate]
type = destroyself
trigger1 = animtime = 0


;==============================================================================================
[Statedef 94063]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0, 0
anim = 2507

[State 01]
type = sprpriority
trigger1 = 1
value = 3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State Dissipate]
type = destroyself
trigger1 = animtime = 0


;==============================================================================================
[Statedef 1200]
type = S
movetype = I
physics = N
ctrl = 0
anim = 1200
velset = 4, 0

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State HB]
type = HitBy
trigger1 = 1
value = SCA, AA, AP
time = 1

[State 0]
type = posset
trigger1 = 1
y = 0

[State 1]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 9]
type = changestate
trigger1 = animtime = 0
value = 1201


;==============================================================================================
[Statedef 1201]
type = S
movetype = I
physics = N
anim = 1201
velset = 4, 0

[State 0]
type = posset
trigger1 = 1
y = 0

[State 1]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State HB]
type = HitBy
trigger1 = 1
value = SCA, AA, AP
time = 1

[State 3]
type = MakeDust
trigger1 = 1
pos = -10, -2
spacing = 5

[State 9]
type = ChangeState
trigger1 = animtime = 0
value = 1202
ctrl = 0


;==============================================================================================
[Statedef 1202]
type = S
movetype = I
physics = C
ctrl = 0
anim = 11

[State 9]
type = changestate
trigger1 = time >= 5
value = 11
ctrl = 1 


;==============================================================================================
[Statedef 1210]
type = S
movetype = I
physics = N
ctrl = 0
anim = 1200
velset = 4, 0

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State 0]
type = posset
trigger1 = time = 0
y = 0

[State HB]
type = HitBy
trigger1 = 1
value = SCA, AA, AP
time = 1

[State 1]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 9]
type = changestate
trigger1 = animtime = 0
value = 1211


;==============================================================================================
[Statedef 1211]
type = S
movetype = I
physics = N
anim = 1211
velset = 4, 0

[State 0]
type = posset
trigger1 = time = 0
y = 0

[State 1]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State HB]
type = HitBy
trigger1 = 1
value = SCA, AA, AP
time = 1

[State 3]
type = MakeDust
trigger1 = 1
pos = -10, -2
spacing = 5

[State 9]
type = ChangeState
trigger1 = animtime = 0
value = 1202
ctrl = 0


;==============================================================================================
[Statedef 1220]
type = S
movetype = I
physics = N
ctrl = 0
anim = 1200
velset = 4, 0

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State 0]
type = posset
trigger1 = time = 0
y = 0

[State 1]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State HB]
type = HitBy
trigger1 = 1
value = SCA, AA, AP
time = 1

[State 9]
type = changestate
trigger1 = animtime = 0
value = 1221


;==============================================================================================
[Statedef 1221]
type = S
movetype = I
physics = N
anim = 1221
velset = 4, 0

[State 0]
type = posset
trigger1 = time = 0
y = 0

[State 1]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State HB]
type = HitBy
trigger1 = 1
value = SCA, AA, AP
time = 1

[State 3]
type = MakeDust
trigger1 = 1
pos = -10, -2
spacing = 5

[State 9]
type = ChangeState
trigger1 = animtime = 0
value = 1202
ctrl = 0


;==============================================================================================
[Statedef 3960]
type = S
movetype = I
physics = S
juggle = 0
poweradd = 0
ctrl = 0
anim = 3960
velset = 0, 0
sprpriority = -1

[State 2]
type = Playsnd
trigger1 = time = 0
value = 4, 5

[State 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State Shadows]
type = Afterimage
triggerall = var(10) = 0
trigger1 = time = 0
time = 300
length = 21
PalBright = 0, 0, 0
PalContrast = 128, 128, 128
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = add1

[State 6]
type = Velset
trigger1 = time = 0
x = 3

[State 6]
type = Velset
trigger1 = animelem = 5
x = -3

[State 3]
type = ChangeState
trigger1 = Animtime = 0
value = 3961


;==============================================================================================
[Statedef 3961]
type = S
movetype = I
physics = N
juggle = 0
poweradd = (Var(10)=0) * 0
ctrl = 0
anim = 3961
velset = 9, 0
sprpriority = -1

[State 2]
type = Width
trigger1 = 1
value = 10, 0

[State 5]
type = PlaySnd
trigger1 = time = 0
value = 2, 4
volume = 255

[State 2]
type = Playsnd
trigger1 = time = 0
value = 21, 6

[State 2]
type = Turn
trigger1 = p2dist x < 0

[State 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2]
type = Velmul
trigger1 = Time >= 25
x = 0.92

[State 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3]
type = Velset
trigger1 = time = 45
trigger2 = frontedgedist <= 10
x = 0

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 33
trigger2 = frontedgedist <= 10
trigger3 = backedgedist <= 0
trigger3 = time > 4
time = 0

[State 3]
type = ChangeState
trigger1 = time = 45
trigger2 = frontedgedist <= 10
value = 3962
ctrl = 0

[State 3]
type = ChangeState
trigger1 = backedgedist <= 0
trigger1 = time > 4
value = 3962
ctrl = 0


;==============================================================================================
[Statedef 3970]
type = S
movetype = I
physics = S
juggle = 0
poweradd = 0
ctrl = 0
anim = 3960
velset = 0, 0
sprpriority = -1

[State 2]
type = Playsnd
trigger1 = time = 0
value = 4, 5

[State 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State Shadows]
type = Afterimage
triggerall = var(10) = 0
trigger1 = time = 0
time = 999
length = 21
PalBright = 0, 0, 0
PalContrast = 128, 128, 128
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State 6]
type = Velset
trigger1 = time = 0
x = 3

[State 6]
type = Velset
trigger1 = animelem = 5
x = -3

[State 3]
type = ChangeState
trigger1 = Animtime = 0
value = 3971


;==============================================================================================
[Statedef 3971]
type = S
movetype = I
physics = N
juggle = 0
poweradd = (Var(10)=0) * 0
ctrl = 0
anim = 3961
velset = 6.5, 0
sprpriority = -1

[State 2]
type = Width
trigger1 = 1
value = 10, 0

[State 5]
type = PlaySnd
trigger1 = time = 0
value = 2, 4
volume = 255

[State 2]
type = Playsnd
trigger1 = time = 0
value = 21, 6

[State 2]
type = Turn
trigger1 = p2dist x < 0

[State 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2]
type = Velmul
trigger1 = Time >= 15
trigger1 = vel x > 0
x = 0.92

[State 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3]
type = Velset
trigger1 = time = 25
trigger2 = frontedgedist <= 10
x = 0

[State 3]
type = Turn
trigger1 = time = 25
trigger1 = anim = 3962

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 13
trigger2 = frontedgedist <= 10
trigger3 = backedgedist <= 0
trigger3 = time > 4
time = 0

[State 3]
type = ChangeState
trigger1 = time = 25
trigger2 = frontedgedist <= 10
value = 3962
ctrl = 0

[State 3]
type = ChangeState
trigger1 = backedgedist <= 0
trigger1 = time > 4
value = 3962
ctrl = 0


;==============================================================================================
[Statedef 3980]
type = S
movetype = I
physics = S
juggle = 0
poweradd = 0
ctrl = 0
anim = 3960
velset = 0, 0
sprpriority = -1

[State 2]
type = Playsnd
trigger1 = time = 0
value = 4, 5

[State 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State Shadows]
type = Afterimage
triggerall = var(10) = 0
trigger1 = time = 0
time = 999
length = 21
PalBright = 0, 0, 0
PalContrast = 128, 128, 128
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State 6]
type = Velset
trigger1 = time = 0
x = -3

[State 6]
type = Velset
trigger1 = animelem = 5
x = 3

[State 3]
type = ChangeState
trigger1 = Animtime = 0
value = 3981


;==============================================================================================
[Statedef 3981]
type = S
movetype = I
physics = N
juggle = 0
poweradd = (Var(10)=0) * 0
ctrl = 0
anim = 3961
velset = -9, 0
sprpriority = -1

[State 2]
type = Width
trigger1 = 1
value = 10, 0

[State 2]
type = Playsnd
trigger1 = time = 0
value = 21, 6

[State 5]
type = PlaySnd
trigger1 = time = 0
value = 2, 4
volume = 255

[State 2]
type = Turn
trigger1 = p2dist x < 0

[State 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2]
type = Velmul
trigger1 = Time >= 25
trigger1 = vel x < 0
x = 0.92

[State 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3]
type = Velset
trigger1 = time = 45
trigger2 = frontedgedist <= 10
x = 0

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 33
trigger2 = frontedgedist <= 10
trigger3 = backedgedist <= 0
time = 0

[State 3]
type = ChangeState
trigger1 = time = 45
trigger2 = frontedgedist <= 10
value = 3962
ctrl = 0

[State 3]
type = ChangeState
trigger1 = backedgedist <= 0
trigger1 = time > 4
value = 3962
ctrl = 0


;==============================================================================================
[Statedef 3990]
type = S
movetype = I
physics = S
juggle = 0
poweradd = 0
ctrl = 0
anim = 3960
velset = 0, 0
sprpriority = -1

[State 2]
type = Playsnd
trigger1 = time = 0
value = 4, 5

[State 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State Shadows]
type = Afterimage
triggerall = var(10) = 0
trigger1 = time = 0
time = 999
length = 21
PalBright = 0, 0, 0
PalContrast = 128, 128, 128
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State 6]
type = Velset
trigger1 = time = 0
x = -3

[State 6]
type = Velset
trigger1 = animelem = 5
x = 3

[State 3]
type = ChangeState
trigger1 = Animtime = 0
value = 3991


;==============================================================================================
[Statedef 3991]
type = S
movetype = I
physics = N
juggle = 0
poweradd = (Var(10)=0) * 0
ctrl = 0
anim = 3961
velset = -6.5, 0
sprpriority = -1

[State 2]
type = Width
trigger1 = 1
value = 10, 0

[State 2]
type = Playsnd
trigger1 = time = 0
value = 21, 6

[State 2]
type = Turn
trigger1 = p2dist x < 0

[State 5]
type = PlaySnd
trigger1 = time = 0
value = 2, 4
volume = 255

[State 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2]
type = Velmul
trigger1 = Time >= 15
trigger1 = vel x < 0
x = 0.92

[State 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3]
type = Velset
trigger1 = time = 25
trigger2 = frontedgedist <= 10
x = 0

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 13
trigger2 = frontedgedist <= 10
trigger3 = backedgedist <= 0
time = 0

[State 3]
type = ChangeState
trigger1 = time = 25
trigger2 = frontedgedist <= 10
value = 3962
ctrl = 0

[State 3]
type = ChangeState
trigger1 = backedgedist <= 0
trigger1 = time > 4
value = 3962
ctrl = 0

;======================< SHUN GOKU SATSU >=============================
[Statedef 4000]
type = S
physics = S
movetype = A
anim = 4000
ctrl = 0
velset = 0, 0
juggle = 15
facep2 = 1
poweradd = -3000
sprpriority = 1

[State 4000, Strength]
type = varset
trigger1 = var(10) != 7
var(10) = 7

[State 4000, Snd]
type = playsnd
trigger1 = !time
value = 1, 7
channel = 0
volume = 200
[State 4000, ECreset]
type = palfx
trigger1 = !time
trigger1 = !(var(20) := 0)
time = 1

[State 4000, Super Pause]
type = superpause
trigger1 = !time
time = 60
anim = -1
sound = s7, 0
p2defmul = 1
darken = 1

[State Corner Push]
type = varset
trigger1 = !time
fvar(5) = 0

[State 4000, NHB]
type = nothitby
trigger1 = time < 10
time = 1
value = SCA

[State 4000, Vel]
type = velset
trigger1 = 1
x = 8
[State 4000, Snd]
type = playsnd
trigger1 = animelemtime(1) > 1
value = 5, 6
persistent = 0

[State 4000, Miss]
type = hitdef
trigger1 = time
attr = S, HT
hitflag = 

[State 4000, Hit]
type = hitdef
trigger1 = time
trigger1 = !var(38)
trigger1 = p2dist x >= 0 && p2bodydist x <= 20
attr = S, HT
hitflag = M-
priority = 6, Miss
numhits = 0
sparkno = -1
p1facing = 1
p1stateno = 4001
fall = 1 
fall.recover = 0

[State 4000, End]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1


;--- PLAYER ---
[Statedef 4001]
type = S
physics = N
movetype = A
anim = 4001
ctrl = 0
velset = 0, 0
sprpriority = 1

[State 4001, throw]
type = targetstate
trigger1 = !time
value = 1114002
[State 4001, throw]
type = targetfacing
trigger1 = !time
value = -1

[State 4001, Snd]
type = playsnd
trigger1 = !time
value = 4, 10
channel = 0

[State 4001, grabsound]
type = playsnd
trigger1 = !time
value = 0, 800

[State 4001, Snd]
type = playsnd
trigger1 = !time
value = 5, 8

[State 4001, vsothers]
type = varset
trigger1 = !time
var(30) = 345

[State 4001, Recover]
type = varadd
triggerall = animelemtime(2) > 0 && animelemtime(35) < 0
triggerall = (var(30) = [1, 99]) && numtarget
triggerall = target, life >= 0.33 * (target, lifemax)
trigger1 = (target, command = "x") || (target, command = "y") || (target, command = "z")
trigger2 = (target, command = "a") || (target, command = "b") || (target, command = "c")
trigger3 = (target, command = "holdup") || (target, command = "holddown") || (target, command = "holdback") || (target, command = "holdfwd")
var(30) = -1

[State 4001, preventrecover]
type = varadd
triggerall = animelemtime(2) > 0 && animelemtime(35) < 0
triggerall = (var(30) = [1, 98]) && numtarget
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = command = "a" || command = "b" || command = "c"
trigger3 = command = "holdup" || command = "holddown" || command = "holdback" || command = "holdfwd"
var(30) = 1

[State 4001, Debug]
type = displaytoclipboard
trigger1 = var(30) < 100
text = " %d button presses to recover"
params = var(30)
[State 4001, Debug]
type = displaytoclipboard
trigger1 = var(30) = 345
text = "Normal Damage"
[State 4001, Debug]
type = displaytoclipboard
trigger1 = var(30) = 456
text = "Extra Damage"

[State 4001, Pause]
type = pause
trigger1 = animelemtime(2) >= 0 && animelemtime(35) < 0
time = 2
movetime = 2
[State 4001, Push]
type = playerpush
trigger1 = 1
value = 0
[State 4001, nothitby]
type = nothitby
trigger1 = animelemtime(35) < 0
value = SCA
time = 1
[State 4001, imageoff]
type = afterimagetime
trigger1 = animelemtime(5) > 0
time = 0

[State 4001, fadeout]
type = allpalfx
trigger1 = animelemtime(1) = 10
time = 30
sinadd = -255, -255, -255, 120
[State 4001, black]
type = envcolor
trigger1 = animelemtime(2) >= 0 && animelemtime(35) < 0
time = 4
value = 0, 0, 0

[State 4001, Assert]
type = assertspecial
trigger1 = animelemtime(2) >= 0 && animelemtime(35) < 0
flag = nobardisplay
flag2 = noFG
[State 4001, spr]
type = sprpriority
trigger1 = animelemtime(35) >= 0
value = 1
[State 4001, Bind]
type = targetbind
trigger1 = animelemtime(35) < 0
pos = 45, 0

[State 4001, hitadd]
type = hitadd
triggerall = var(30) > 0
trigger1 = animelem = 2 || animelem = 3 || animelem = 4 || animelem = 5 || animelem = 6 || animelem = 7 || animelem = 8 || animelem = 9
trigger2 = animelem = 10 || animelem = 11 || animelem = 12 || animelem = 13 || animelem = 14 || animelem = 15
trigger3 = animelem = 16 || animelem = 17 || animelem = 18 || animelem = 19 || animelem = 20 || animelem = 21 || animelem = 22 || animelem = 23 || animelem = 24 || animelem = 25
trigger4 = animelem = 26 || animelem = 27 || animelem = 28 || animelem = 29 || animelem = 30 || animelem = 31 || animelem = 32 || animelem = 33 || animelem = 34
value = 1

[State 4001, hitdamage]
type = targetlifeadd
triggerall = numtarget
trigger1 = animelem = 2 || animelem = 3 || animelem = 4 || animelem = 5 || animelem = 6 || animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10
trigger2 = animelem = 10 || animelem = 11 || animelem = 12 || animelem = 13 || animelem = 14 || animelem = 15 || animelem = 16 || animelem = 17
trigger3 = animelem = 18 || animelem = 19 || animelem = 20 || animelem = 21 || animelem = 22 || animelem = 23 || animelem = 24 || animelem = 25 || animelem = 26
trigger4 = animelem = 27 || animelem = 28 || animelem = 29 || animelem = 30 || animelem = 31 || animelem = 32 || animelem = 33 || animelem = 34
value = -17 -(var(30) = 456) * 4 + (!var(30)) * 12
;-ceil(ifelse((var(30) = 456), (target, lifemax * 0.8), (target, lifemax * 0.6)) / 33)
kill = animelem = 34
absolute = 1

[State 4001, givepower]
type = targetpoweradd
triggerall = numtarget
trigger1 = animelem = 2 || animelem = 3 || animelem = 4 || animelem = 5 || animelem = 6 || animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10
trigger2 = animelem = 10 || animelem = 11 || animelem = 12 || animelem = 13 || animelem = 14 || animelem = 15 || animelem = 16 || animelem = 17
trigger3 = animelem = 18 || animelem = 19 || animelem = 20 || animelem = 21 || animelem = 22 || animelem = 23 || animelem = 24 || animelem = 25 || animelem = 26
trigger4 = animelem = 27 || animelem = 28 || animelem = 29 || animelem = 30 || animelem = 31 || animelem = 32 || animelem = 33 || animelem = 34
value = 36

[State 4001, HitSound]
type = playsnd
trigger1 = animelem = 2 || animelem = 3 || animelem = 4 || animelem = 5 || animelem = 6 || animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10
trigger2 = animelem = 10 || animelem = 11 || animelem = 12 || animelem = 13 || animelem = 14 || animelem = 15 || animelem = 16 || animelem = 17
trigger3 = animelem = 18 || animelem = 19 || animelem = 20 || animelem = 21 || animelem = 22 || animelem = 23 || animelem = 24 || animelem = 25 || animelem = 26
trigger4 = animelem = 27 || animelem = 28 || animelem = 29 || animelem = 30 || animelem = 31 || animelem = 32 || animelem = 33 || animelem = 34
value = 2, ifelse(!var(30), 0, ifelse((animelem = 34), 10, 3))
channel = 2

[State 4001, Sparks]
type = explod
trigger1 = animelem = 2 || animelem = 3 || animelem = 4 || animelem = 5 || animelem = 6 || animelem = 7 || animelem = 8 || animelem = 9
trigger2 = animelem = 10 || animelem = 11 || animelem = 12 || animelem = 13 || animelem = 14 || animelem = 15
trigger3 = animelem = 16 || animelem = 17 || animelem = 18 || animelem = 19 || animelem = 20 || animelem = 21 || animelem = 22 || animelem = 23 || animelem = 24 || animelem = 25
trigger4 = animelem = 26 || animelem = 27 || animelem = 28 || animelem = 29 || animelem = 30 || animelem = 31 || animelem = 32 || animelem = 33 || animelem = 34
anim = ifelse(!var(30), 7001, 7030 + (random % 8))
ID = 7000
sprpriority = 5
postype = p2
pos = 0, (target, const(size.mid.pos.y));-70
random = 60, 60
facing = -1
ownpal = 1
ontop = 1
pausemovetime = 300
supermovetime = 300

[State 4001, Shake]
type = envshake
trigger1 = animelem = 2 || animelem = 3 || animelem = 4 || animelem = 5 || animelem = 6 || animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10
trigger2 = animelem = 10 || animelem = 11 || animelem = 12 || animelem = 13 || animelem = 14 || animelem = 15 || animelem = 16 || animelem = 17
trigger3 = animelem = 18 || animelem = 19 || animelem = 20 || animelem = 21 || animelem = 22 || animelem = 23 || animelem = 24 || animelem = 25 || animelem = 26
trigger4 = animelem = 27 || animelem = 28 || animelem = 29 || animelem = 30 || animelem = 31 || animelem = 32 || animelem = 33 || animelem = 34
time = 6
freq = 120
ampl = -4

[State 4001, Kanji]
type = explod
trigger1 = animelem = 35
anim = 6013
ID = 6013
sprpriority = 2
postype = p1
facing = ifelse(facing = 1, 1, -1)
pos = ifelse(facing = 1, 0, 32)
bindtime = -1
removeongethit = 1
ownpal = 1

[State 4001, Snd]
type = playsnd
trigger1 = animelemtime(35) = 10
value = 4, 9
channel = 0

[State 4001, throw]
type = targetstate
trigger1 = animelemtime(34) >= 0 && numtarget
value = 1114003
persistent = 0

[State 4001, interrupt]
type = changestate
triggerall = animelemtime(2) > 0 && animelemtime(35) < 0
trigger1 = !var(30) && numtarget
trigger2 = target, stateno = 1114010
value = 4009

[State 4001, End]
type = changestate
trigger1 = animelemtime(34) >= 0 && winko
value = 181
[State 4001, End]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1


;--- TARGET ---
[Statedef 1114002]
type = S
physics = N
movetype = H
velset = 0, 0
ctrl = 0
[State 1114002, Anim]
type = changeanim2
trigger1 = !time
value = 4002

[Statedef 1114003]
type = L
physics = C
movetype = H
velset = 0, 0
ctrl = 0
[State 1114003, Anim]
type = changeanim2
trigger1 = !time
value = 4003
[State 1114003, End]
type = selfstate
trigger1 = !alive
value = 5150
[State 1114003, End]
type = selfstate
trigger1 = time >= 97 && alive
value = 5120


;--- PLAYER ---
[Statedef 4009]
type = S
physics = S
movetype = H
anim = 5910
velset = -5, 0
ctrl = 0
[State 4009, target]
type = targetstate
trigger1 = !time && numtarget
value = 1114010
[State 4009, imageoff]
type = afterimagetime
trigger1 = 1
time = 0
[State 4009, Snd]
type = playsnd
trigger1 = !time
value = 5000, 4
channel = 0
[State 4009, Anim]
type = changeanim
trigger1 = anim = 5910 && time = 45
value = 5911

[State 4009, Flash]
type = palfx
trigger1 = !time
add = 30, 30, 100
sinadd = 30, 30, 100, 8
time = 8
[State 4009, Snd]
type = playsnd
trigger1 = !time
value = 7, 1
[State 4009, lightning]
type = helper
trigger1 = !time
helpertype = normal
stateno = 4012
ID = 4012
postype = p1
pos = 0, -60
ownpal = 1
persistent = 0
pausemovetime = 99
supermovetime = 99

[State 4009, End]
type = changestate
trigger1 = anim = 5911 && !animtime
value = 0
ctrl = 1


;--- PLAYER ---
[Statedef 1114010]
type = S
physics = S
movetype = H
anim = 0
velset = -5, 0
ctrl = 0
[State 1114010, Anim]
type = changeanim
trigger1 = !time && selfanimexist(150)
value = 150
[State 1114010, Anim]
type = changeanim
trigger1 = anim = 150 && selfanimexist(140) && time >= 45
value = 140
[State 1114010, Flash]
type = palfx
trigger1 = !time
add = 30, 30, 100
sinadd = 30, 30, 100, 8
time = 8
[State 1114010, End]
type = selfstate
trigger1 = anim = 140 && !animtime
trigger2 = anim = 0 && time >= 54
value = 0
ctrl = 1
;==============================================================================================
[Statedef 1500]
type = S
movetype = A
physics = S
juggle = 11
poweradd = (Var(10)=0) * 100
anim = 1500
velset = 0, 0
ctrl = 0

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State 0]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State Shoryuken]
type = PlaySnd
trigger1 = animelem = 1
value = 4, 1
channel = 0
volume = 255

[State 3]
type = HitDef
trigger1 = animelem = 2
attr = S, SA
damage = 30, 5
animtype = Medium
getpower = (Var(10)=0) * 30
givepower = 15
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 10, 10
sparkxy = -10, -45
hitsound = S6, 5
guardsound = S0, 100
ground.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -0.5, -9
air.velocity = -0.5, -9
fall.animtype = Hard
fall.recover = (var(10) <= 0)
fall.recovertime = 120
fall = 1
forcestand = 1

[State 3]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
damage = 30, 5
animtype = Hard
getpower = (Var(10)=0) * 25
givepower = 15
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 11, 13
sparkxy = -10, -60
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -0.5, -9
air.velocity = -0.5, -9
fall.animtype = Hard
fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 120
forcestand = 1

[State 5]
type = ChangeState
trigger1 = animelem = 4
value = 1510


;==============================================================================================
[Statedef 1510]
type = A
movetype = A

[State NHB]
type = NotHitBy
trigger1 = anim = 1500
value = , AP
time = 1

[State 1]
type = VelSet
trigger1 = time = 0
x = 2
y = -6

[State 4]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
damage = 30, 5
animtype = Diagup
getpower = (Var(10)=0) * 30
givepower = 15
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 12, 12
sparkxy = -10, -80
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = High
air.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -1, -8
air.velocity = -1, -8
fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 120
forcestand = 1

[State 2]
type = VelMul
trigger1 = 1
x = 0.88

[State 3]
type = VelAdd
trigger1 = 1
y = 0.40

[State 5]
type = ChangeAnim
trigger1 = vel y > -1
value = 1510
persistent = 0

[State 8]
type = velset
trigger1 = anim = 1510
x = 0
persistent = 0

[State Idle]
type = statetypeset
trigger1 = anim != 1500
movetype = I

[State 9]
trigger1 = vel y > 0
trigger1 = pos y >= 0
type = ChangeState
value = 1520


;==============================================================================================
[Statedef 1520]
type = S
movetype = I
physics = S
anim = 1520
velset = 0, 0

[State 3]
type = PosSet
trigger1 = time = 0
y = 0

[State 52, Land SOund]
type = PlaySnd
trigger1 = time = 0
value = 0, 0

[State 9]
type = ChangeState
trigger1 = time = 3
value = 0
ctrl = 1


;==============================================================================================
[Statedef 1600]
type = S
movetype = A
juggle = 11
poweradd = (Var(10)=0) * 110
anim = 1500
velset = 0, 0
ctrl = 0

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State 3]
type = VarSet
trigger1 = time = 0
v = 34
value = 0

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State Shoryuken]
type = PlaySnd
trigger1 = animelem = 1
value = 4, 1
channel = 0
volume = 255

[State 3]
type = HitDef
trigger1 = animelem = 2
attr = S, SA
damage = 35, 5
animtype = Medium
getpower = (Var(10)=0) * 30
givepower = 15
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 10, 10
sparkxy = -10, -45
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -0.5, -9
air.velocity = -0.5, -9
fall.animtype = Hard
fall.recover = (var(10) <= 0)
fall.recovertime = 120
fall = 1
forcestand = 1

[State 3]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
damage = 35, 5
animtype = Hard
getpower = (Var(10)=0) * 25
givepower = 15
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 11, 13
sparkxy = -0, -60
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -0.5, -9
air.velocity = -0.5, -9
fall.animtype = Hard
fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 120
fall = 1
forcestand = 1

[State 9]
type = ChangeState
trigger1 = animelem = 4
value = 1610


;==============================================================================================
[Statedef 1610]
type = A
movetype = A

[State 1]
type = VelSet
trigger1 = time = 0
x = 3
y = -7.5

[State 2]
type = VelMul
trigger1 = 1
x = 0.86

[State 3]
type = VelAdd
trigger1 = 1
y = 0.42

[State 9]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
damage = 35, 5
animtype = Hard
getpower = (Var(10)=0) * 25
givepower = 15
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 13, 13
sparkxy = -10, -80
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = High
air.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -1, -8.5
air.velocity = -1, -8.5
fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 120
forcestand = 1

[State 5]
type = ChangeAnim
trigger1 = vel y > -1
value = 1510
persistent = 0

[State 6]
type = velset
trigger1 = anim = 1510
x = 0
persistent = 0

[State Idle]
type = statetypeset
trigger1 = anim != 1500
movetype = I

[State 9]
trigger1 = vel y > 0
trigger1 = pos y >= 0
type = ChangeState
value = 1520


;==============================================================================================
[Statedef 1700]
type = S
movetype = A
juggle = 11
poweradd = (Var(10)=0) * 120
anim = 1500
velset = 0, 0
ctrl = 0
sprpriority = 2

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State 3]
type = VarSet
trigger1 = time = 0
v = 34
value = 0

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State Fist Fire Frame 1 & 2]
type = explod
trigger1 = animelem = 1 || animelem = 2
anim = ifelse(animelemtime(1)=0, 2600, 2601)
id = ifelse(animelemtime(1)=0, 2600, 2601)
pos = 0, 0
postype = p1
bindtime = -1
removetime = 15
sprpriority = 3
ownpal = 1
removeongethit = 1
supermovetime = 10

[State Fist Fire 3 & 4]
type = explod
trigger1 = animelem = 3
anim = 2602
id = 2602
pos = 0, 0
postype = p1
bindtime = -1
removetime = 31
sprpriority = 3
ownpal = 1
scale = ifelse(animelemtime(3)=0, 1, 0.8), 1
removeongethit = 1

[State Fist Fire 3]
type = explod
trigger1 = animelem = 3
anim = 2602
id = 2602
pos = 0, 0
postype = p1
bindtime = -1
removetime = 15
sprpriority = 3
scale = ifelse(animelemtime(3)=0, 1, 0.8), 1
ownpal = 1
removeongethit = 1

[State Remove Fist Fire 1 & 2]
type = RemoveExplod
trigger1 = anim = 1500
trigger1 = animelem = 2 || animelem = 3
id = ifelse(animelemtime(2)=0, 2600, 2601)

[State Remove Fist Fire 3]
type = RemoveExplod
trigger1 = animelem = 4 && anim = 1500
id = 2602

[State Shoryuken]
type = PlaySnd
trigger1 = animelem = 1
value = 4, 1
channel = 0
volume = 255

[State 3]
type = HitDef
trigger1 = animelem = 2
attr = S, SA
damage = 40, 5
animtype = Medium
getpower = (Var(10)=0) * 30
givepower = 15
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 10, 10
sparkxy = -10, -45
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -0.5, -9
air.velocity = -0.5, -9
fall.animtype = Hard
fall.recover = (var(10) <= 0)
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
forcestand = 1

[State 4]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
damage = 40, 5
animtype = medium
getpower = (Var(10)=0) * 30
givepower = 15
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 11, 13
sparkxy = -10, -60
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = High
air.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -0.5 , -9
air.velocity = -0.5, -9
fall.recover = (var(10) <= 0)
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
forcestand = 1

[State 9]
type = ChangeState
trigger1 = animelem = 4
value = 1710


;==============================================================================================
[Statedef 1710]
type = A
movetype = A
velset = 4, -9
sprpriority = 2

[State 1]
type = envcolor
trigger1 = movehit
value = 255, 255, 255
under = 1
ignorehitpause = 1
persistent = 0
time = 1

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State hadouken hit helper]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "hand fire"
pos = 0, 0
postype = p1
stateno =1062
ownpal = 1

[State 2]
type = VelMul
trigger1 = 1
x = 0.84

[State 3]
type = VelAdd
trigger1 = 1
y = 0.44

[State 4]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
damage = 40, 5
animtype = Hard
getpower = (Var(10)=0) * 30
givepower = 15
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 12, 12
sparkxy = -10, -80
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = High
air.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -1, -9
air.velocity = -1, -9
fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State 7]
type = ChangeAnim
trigger1 = vel y > -1
value = 1510
persistent = 0

[State 8]
type = velset
trigger1 = anim = 1510
x = 0
persistent = 0

[State Idle]
type = statetypeset
trigger1 = anim != 1500
movetype = I

[State 9]
trigger1 = vel y > 0
trigger1 = pos y >= 0
type = ChangeState
value = 1520


;==============================================================================================
[Statedef 1800]
type = S
movetype = A
juggle = 4
poweradd = (Var(10)=0) * 110
anim = 1800
velset = 0, 0
ctrl = 0
sprpriority = 2

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State TATSUMAKI!]
type = PlaySnd
trigger1 = animelem = 1
value = 6, 11
channel = 0
volume = 255

[State 9]
type = ChangeState
trigger1 = animelem = 2
value = 1801


;==============================================================================================
[Statedef 1801]
type = A
movetype = A
velset = 2, -2
sprpriority = 2

[State 0]
type = posadd
trigger1 = animelem = 3
y = -7

[State 9]
type = ChangeState
trigger1 = time = 6
value = 1802


;==============================================================================================
[Statedef 1802]
type = A
movetype = A
anim = 1810
velset = 2, 0
sprpriority = 2

[State 5]
type = ChangeAnim
trigger1 = animtime = 0
value = 1810

[State Sound]
type = playsnd
trigger1 = animelem = 1 || animelem = 3
value = 0, 4

[State 2]
type = HitDef
trigger1 = animelem = 1 || animelem = 3
attr = A, SA
damage = 80, 10
animtype = Hard
getpower = (Var(10)=0) * 30
givepower = 20
priority = 5, Hit
hitflag = HAF
guardflag = MA
pausetime = 9, 11
sparkxy = -10, -50
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
air.type = Low
fall.animtype = Hard
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -4.4
air.velocity = -2, -4.4
fall.recover = (var(10) <= 0)
fall.recovertime = 120
air.fall = 1
fall = 1
forcestand = 1

[State 9]
type = ChangeState
trigger1 = time = 16
value = 1804


;==============================================================================================
[Statedef 1803]
type = A
movetype = I
physics = N

[State 6]
type = VelAdd
trigger1 = 1
y = 0.44

[State 1]
type = changeanim
trigger1 = time = 0
value = 1820

[State 1]
type = posadd
trigger1 = pos y >= -5
x = -10

[State 1]
type = changestate
trigger1 = pos y >= -5
value = 1864


;==============================================================================================
[Statedef 1804]
type = A
movetype = I
physics = N

[State 6]
type = VelAdd
trigger1 = 1
y = 0.44

[State 1]
type = changeanim
trigger1 = time = 0
value = 1820

[State 1]
type = posadd
trigger1 = pos y >= -5
x = 10

[State 1]
type = changestate
trigger1 = pos y >= -5
value = 52


;==============================================================================================
[Statedef 1810]
type = S
movetype = A
juggle = 4
poweradd = (Var(10)=0) * 115
anim = 1800
velset = 0, 0
ctrl = 0
sprpriority = 2

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State TATSUMAKI]
type = PlaySnd
trigger1 = animelem = 1
value = 6, 11
channel = 0
volume = 255

[State 9]
type = ChangeState
trigger1 = animelem = 2
value = 1811


;==============================================================================================
[Statedef 1811]
type = A
movetype = A
velset = 2, -3
sprpriority = 2

[State 0]
type = posadd
trigger1 = animelem = 3
y = -7

[State 9]
type = ChangeState
trigger1 = time = 6
value = 1812


;==============================================================================================
[Statedef 1812]
type = A
movetype = A
anim = 1810
velset = 2, 0
sprpriority = 2

[State 5]
type = ChangeAnim
trigger1 = animtime = 0
value = 1810

[State Sound]
type = playsnd
trigger1 = animelem = 1 || animelem = 3
value = 0, 4

[State 9]
type = HitDef
trigger1 = animelem = 1 || animelem = 3
attr = A, SA
damage = 50, 10
animtype = Hard
getpower = (Var(10)=0) * 30
givepower = 20
priority = 5, Hit
hitflag = HAF
guardflag = MA
pausetime = 11, 9
sparkxy = -10, -50
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
air.type = Low
fall.animtype = Hard
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2.5, -4.75
air.velocity = -2.5, -4.75
fall.recover = (var(10) <= 0)
fall.recovertime = 120
air.fall = 1
fall = 1
forcestand = 1

[State 5]
type = ChangeState
trigger1 = time = 32
value = 1804


;==============================================================================================
[Statedef 1820]
type = S
movetype = A
juggle = 4
poweradd = (Var(10)=0) * 120
anim = 1800
velset = 0, 0
ctrl = 0
sprpriority = 2

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State TATSUMAKI!]
type = PlaySnd
trigger1 = animelem = 1
value = 6, 11
channel = 0
volume = 255

[State 9]
type = ChangeState
trigger1 = animelem = 2
value = 1821


;==============================================================================================
[Statedef 1821]
type = A
movetype = A
velset = 3, -4
sprpriority = 2

[State 0]
type = posadd
trigger1 = animelem = 3
y = -7

[State 5]
type = ChangeState
trigger1 = time = 6
value = 1822


;==============================================================================================
[Statedef 1822]
type = A
movetype = A
anim = 1810
velset = 3, 0
sprpriority = 2

[State 5]
type = ChangeAnim
trigger1 = animtime = 0
value = 1810

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 3 && time < 38
helpertype = normal
name = "leg fire"
pos = 24, -59
postype = p1
stateno =1063
ownpal = 1

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 1 && time < 38
helpertype = normal
name = "leg fire"
pos = -24, -59
postype = p1
stateno =1064
ownpal = 1

[State Sound]
type = playsnd
trigger1 = animelem = 1 || animelem = 3
value = 0, 4

[State Sound]
type = playsnd
trigger1 = animelem = 1 || animelem = 3
trigger1 = time < 38
channel = 1
value = 3, 2

[State 9]
type = HitDef
trigger1 = animelem = 1 || animelem = 3
attr = A, SA
damage = 40, 10
animtype = Hard
getpower = (Var(10)=0) * 30
givepower = 20
priority = 5, Hit
hitflag = HAF
guardflag = MA
pausetime = 11, 9
sparkxy = -10, -50
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
air.type = Low
fall.animtype = Hard
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -3, -4.75
air.velocity = -3, -4.75
fall.recover = (var(10) <= 0)
fall.recovertime = 120
air.fall = 1
fall = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 5]
type = ChangeState
trigger1 = time = 48
value = 1804


;==============================================================================================
[Statedef 2800]
type = S
movetype = A
juggle = 4
poweradd = (Var(10)=0) * 110
anim = 2800
velset = 0, 0
ctrl = 0
sprpriority = 2

[State TATSUMAKI]
type = PlaySnd
trigger1 = animelem = 5
value = 2, 2
channel = 0
volume = 255

[State 1]
type = PlaySnd
trigger1 = animelem = 5
value = 0, 4

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State 1]
type = HitDef
trigger1 = animelem = 1
attr = S, SA
damage = 80, 10
animtype = Hard
getpower = (Var(10)=0) * 30
givepower = 20
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 12, 12
sparkxy = -10, -60
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = low
air.type = low
fall.animtype = Hard
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -6, -3
air.velocity = -6, -3
fall.recover = (var(10) <= 0)
fall.recovertime = 120
fall = 1
forcestand = 1

[State 1]
type = posadd
trigger1 = animelem = 9
x = 7

[State 1]
type = posadd
trigger1 = animelem = 10
x = 10

[State Idle]
type = statetypeset
trigger1 = animelemtime(7) >= 0
movetype = I

[State 9]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 2810]
type = S
movetype = A
juggle = 4
poweradd = (Var(10)=0) * 110
anim = 2810
velset = 0, 0
ctrl = 0
sprpriority = 2

[State TATSUMAKI]
type = PlaySnd
trigger1 = animelem = 5
value = 2, 2
channel = 0
volume = 255

[State 1]
type = PlaySnd
trigger1 = animelem = 5
value = 0, 4

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State 1]
type = HitDef
trigger1 = animelem = 1
attr = S, SA
damage = ifelse(var(10), 60, 100), 12
animtype = Hard
getpower = (Var(10)=0) * 30
givepower = 20
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 13, 13
sparkxy = -10, -60
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = low
air.type = low
fall.animtype = Hard
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -6.5, -3
air.velocity = -7.5, -2
fall.recover = (var(10) <= 0)
fall.recovertime = 120
fall = 1
forcestand = 1

[State 1]
type = posadd
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
trigger6 = animelem = 6
x = 7

[State 1]
type = posadd
trigger1 = animelem = 9
x = 7

[State 1]
type = posadd
trigger1 = animelem = 10
x = 10

[State Idle]
type = statetypeset
trigger1 = animelemtime(7) >= 0
movetype = I

[State 9]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 2820]
type = S
movetype = A
juggle = 4
poweradd = (Var(10)=0) * 110
anim = 2820
velset = 0, 0
ctrl = 0
sprpriority = 2

[State 1]
type = envcolor
trigger1 = movehit
value = 255, 255, 255
under = 1
ignorehitpause = 1
persistent = 0
time = 1

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 6
helpertype = normal
name = "leg fire"
pos = 0, 0
postype = p1
stateno =10611
ownpal = 1

[State TATSUMAKI]
type = PlaySnd
trigger1 = animelem = 5
value = 2, 2
channel = 0
volume = 255

[State 1]
type = PlaySnd
trigger1 = animelem = 5
value = 0, 4

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State 1]
type = HitDef
trigger1 = animelem = 1
attr = S, SA
damage = 120, 15
animtype = Hard
getpower = (Var(10)=0) * 30
givepower = 20
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 14, 14
sparkxy = -10, -60
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = low
air.type = low
fall.animtype = Hard
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -7.5, -3
air.velocity = -9, -1
fall.recover = (var(10) <= 0)
fall.recovertime = 120
fall = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State 1]
type = posadd
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
trigger6 = animelem = 6
x = 14

[State 1]
type = posadd
trigger1 = animelem = 9
x = 7

[State 1]
type = posadd
trigger1 = animelem = 10
x = 10

[State Idle]
type = statetypeset
trigger1 = animelemtime(7) >= 0
movetype = I

[State 9]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 1850]
type = A
movetype = A
anim = 1850
ctrl = 0
poweradd = (Var(10)=0) * 100
sprpriority = 2

[State 5]
type = ChangeAnim
trigger1 = animtime = 0
value = 1810

[State TATSUMAKI]
type = PlaySnd
trigger1 = time = 1
value = 1, 2
channel = 0
volume = 255

[State Wind Sound]
type = playsnd
trigger1 = animelem = 1 || animelem = 3 || animelem = 5
value = 0, 4

[State 5]
type = Velset
trigger1 = time = 0
x = ifelse(vel x < 0, -1.5, 1.5)
y = 0

[State 7]
type = HitDef
trigger1 = animelem = 1 || animelem = 3 || animelem = 5
attr = A, SA
damage = 40, 10
animtype = Hard
getpower = (Var(10)=0) * 30
givepower = 20
priority = 5, Hit
hitflag = HAF
guardflag = MA
pausetime = 10, 10
sparkxy = -10, -50
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
air.type = Low
fall.animtype = Hard
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5.5
air.velocity = -2, -5.5
air.fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 120
fall = 1
air.cornerpush.veloff = -10
forcestand = 1

[State 5]
type = Veladd
trigger1 = Time > 12
y = 0.54

[State 9]
type = ChangeState
trigger1 = pos y >= -5 && vel y > 0
value = 1803


;==============================================================================================
[Statedef 1950]
type = A
movetype = A
anim = 1850
ctrl = 0
poweradd = (Var(10)=0) * 100
sprpriority = 2

[State 5]
type = ChangeAnim
trigger1 = animtime = 0
value = 1810

[State TATSUMAKI]
type = PlaySnd
trigger1 = time = 1
value = 1, 2
channel = 0
volume = 255

[State Wind Sound]
type = playsnd
trigger1 = animelem = 1 || animelem = 3 || animelem = 5
value = 0, 4

[State 7]
type = HitDef
trigger1 = animelem = 1 || animelem = 3 || animelem = 5
attr = A, SA
damage = 40, 10
animtype = Hard
getpower = (Var(10)=0) * 30
givepower = 20
priority = 5, Hit
hitflag = HAF
guardflag = MA
pausetime = 10, 10
sparkxy = -10, -50
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
air.type = Low
fall.animtype = Hard
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5.5
air.velocity = -2, -5.5
air.fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 120
fall = 1
air.cornerpush.veloff = -10
forcestand = 1

[State 5]
type = Velmul
trigger1 = time = 0
x = 0.8
y = 0.9

[State 5]
type = Veladd
trigger1 = time = 0
x = 1
y = 0

[State 5]
type = Veladd
trigger1 = Time > 0
y = 0.54

[State 9]
type = ChangeState
trigger1 = pos y >= -5 && vel y > 0
value = 1803


;==============================================================================================
[Statedef 1851]
type = A
movetype = A
anim = 1850
poweradd = (Var(10)=0) * 115
ctrl = 0
sprpriority = 2

[State 5]
type = Velset
trigger1 = time = 0
x = ifelse(vel x < 0, -2, 2)
y = 0

[State 5]
type = ChangeAnim
trigger1 = animtime = 0
value = 1810

[State TATSUMAKI]
type = PlaySnd
trigger1 = time = 1
value = 1, 2
channel = 0
volume = 255

[State wind sound]
type = playsnd
trigger1 = animelem = 1 || animelem = 3 || animelem = 5
value = 0, 4

[State 7]
type = HitDef
trigger1 = animelem = 3
trigger2 = animelem = 5
attr = A, SA
damage = 40, 10
animtype = Hard
getpower = (Var(10)=0) * 30
givepower = 20
priority = 5, Hit
hitflag = HAF
guardflag = MA
pausetime = 10, 10
sparkxy = -10, -50
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
air.type = Low
fall.animtype = Hard
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2.5, -5.5
air.velocity = -2.5, -5.5
air.fall = 1
fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 120
air.cornerpush.veloff = -10
forcestand = 1

[State 5]
type = Veladd
trigger1 = Time > 28
y = 0.54

[State 8]
type = ChangeState
trigger1 = pos y >= -5 && vel y > 0
value = 1803


;==============================================================================================
[Statedef 1951]
type = A
movetype = A
anim = 1850
poweradd = (Var(10)=0) * 115
ctrl = 0
sprpriority = 2

[State 5]
type = ChangeAnim
trigger1 = animtime = 0
value = 1810

[State TATSUMAKI]
type = PlaySnd
trigger1 = time = 1
value = 1, 2
channel = 0
volume = 255

[State wind sound]
type = playsnd
trigger1 = animelem = 1 || animelem = 3 || animelem = 5
value = 0, 4

[State 7]
type = HitDef
trigger1 = animelem = 3
trigger2 = animelem = 5
attr = A, SA
damage = 40, 10
animtype = Hard
getpower = (Var(10)=0) * 30
givepower = 20
priority = 5, Hit
hitflag = HAF
guardflag = MA
pausetime = 10, 10
sparkxy = -10, -50
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
air.type = Low
fall.animtype = Hard
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2.5, -5.5
air.velocity = -2.5, -5.5
air.fall = 1
fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 120
air.cornerpush.veloff = -10
forcestand = 1

[State 5]
type = Velmul
trigger1 = time = 0
x = 0.8
y = 0.9

[State 5]
type = Veladd
trigger1 = time = 0
x = 1
y = -1

[State 5]
type = Veladd
trigger1 = Time > 0
y = 0.54

[State 8]
type = ChangeState
trigger1 = pos y >= -5
value = 1803


;==============================================================================================
[Statedef 1852]
type = A
movetype = A
poweradd = (Var(10)=0) * 120
anim = 1850
ctrl = 0
sprpriority = 2

[State 5]
type = ChangeAnim
trigger1 = animtime = 0
value = 1810

[State TATSUMAKI]
type = PlaySnd
trigger1 = time = 1
value = 1, 2
channel = 0
volume = 255

[State wind sound]
type = playsnd
trigger1 = animelem = 1 || animelem = 3 || animelem = 5
value = 0, 4

[State Sound]
type = playsnd
trigger1 = animelem = 1 || animelem = 3 || animelem = 5
trigger1 = time = [3, 48]
channel = 1
value = 3, 2

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State hadouken hit helper]
type = Helper
trigger1 = time = 16 || time = 32 || time = 48
helpertype = normal
name = "leg fire"
pos = 24, -59
postype = p1
stateno =1063
ownpal = 1

[State hadouken hit helper]
type = Helper
trigger1 = time = 8 || time = 24 || time = 40
helpertype = normal
name = "leg fire"
pos = -24, -59
postype = p1
stateno =1064
ownpal = 1

[State 5]
type = Velset
trigger1 = time = 0
x = ifelse(vel x < 0, -2.5, 2.5)
y = 0

[State 7]
type = HitDef
trigger1 = animelem = 1 || animelem = 3 || animelem = 5
attr = A, SA
damage = 40, 10
animtype = Hard
getpower = (Var(10)=0) * 30
givepower = 20
priority = 5, Hit
hitflag = HAF
guardflag = MA
pausetime = 10, 10
sparkxy = -10, -50
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
air.type = Low
fall.animtype = Hard
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -3, -5.5
air.velocity = -3, -5.5
fall = 1
air.fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 120
air.cornerpush.veloff = -10
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State 5]
type = Veladd
trigger1 = Time > 44
y = 0.54

[State 8]
type = ChangeState
trigger1 = pos y >= -5
value = 1803


;==============================================================================================
[Statedef 1952]
type = A
movetype = A
poweradd = (Var(10)=0) * 120
anim = 1850
ctrl = 0
sprpriority = 2

[State 5]
type = ChangeAnim
trigger1 = animtime = 0
value = 1810

[State TATSUMAKI]
type = PlaySnd
trigger1 = time = 1
value = 1, 2
channel = 0
volume = 255

[State wind sound]
type = playsnd
trigger1 = animelem = 1 || animelem = 3 || animelem = 5
value = 0, 4

[State Sound]
type = playsnd
trigger1 = animelem = 1 || animelem = 3 || animelem = 5
trigger1 = time = [3, 48]
channel = 1
value = 3, 2

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State hadouken hit helper]
type = Helper
trigger1 = time = 16 || time = 32 || time = 48
helpertype = normal
name = "leg fire"
pos = 24, -59
postype = p1
stateno =1063
ownpal = 1

[State hadouken hit helper]
type = Helper
trigger1 = time = 8 || time = 24 || time = 40
helpertype = normal
name = "leg fire"
pos = -24, -59
postype = p1
stateno =1064
ownpal = 1

[State 7]
type = HitDef
trigger1 = animelem = 1 || animelem = 3 || animelem = 5
attr = A, SA
damage = 40, 10
animtype = Hard
getpower = (Var(10)=0) * 30
givepower = 20
priority = 5, Hit
hitflag = HAF
guardflag = MA
pausetime = 10, 10
sparkxy = -10, -50
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
air.type = Low
fall.animtype = Hard
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -3, -5.5
air.velocity = -3, -5.5
fall = 1
air.fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 120
air.cornerpush.veloff = -10
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State 5]
type = Velmul
trigger1 = time = 0
x = 0.8
y = 0.9

[State 5]
type = Veladd
trigger1 = time = 0
x = 1
y = -2

[State 5]
type = Veladd
trigger1 = Time > 0
y = 0.54

[State 8]
type = ChangeState
trigger1 = pos y >= -5
value = 1803


;==============================================================================================
[Statedef 1864]
type = C
movetype = I
physics = C
Anim = 13033
ctrl = 0

[State 1]
type = posadd
trigger1 = time = 0
x = 20

[State 1]
type = posset
trigger1 = time = 0
y = 0

[State 1]
type = velset
trigger1 = time = 0
y = 0

[State 52, Land SOund]
type = PlaySnd
trigger1 = time = 0
value = 0, 0

[State 1]
type = changestate
trigger1 = time = 4
value = 12
ctrl = 1


;==============================================================================================
[Statedef 1860]
type = A
movetype = A
poweradd = (Var(10)=0) * 120
anim = 13005
ctrl = 0
sprpriority = 2

[State TATSUMAKI]
type = PlaySnd
trigger1 = animelem = 1
value = 2, 2
channel = 0
volume = 255

[State wind sound]
type = playsnd
trigger1 = animelem = 3
value = 0, 4

[State 6]
type = Velmul
trigger1 = time = [0, 9]
x = 0.83
y = 0.83

[State 6]
type = Velset
trigger1 = animelem = 2
x = 6
y = 6

[State 6]
type = VelAdd
trigger1 = Time >= 9
x = 0.20
y = 0.20

[State 7]
type = HitDef
trigger1 = animelem = 3
attr = A, SA
damage = 40, 5
animtype = medium
getpower = (Var(10)=0) * 30
givepower = 10
priority = 5, Hit
hitflag = MAFD
guardflag = HA
pausetime = 8, 8
sparkxy = -10, -16
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = High
air.type = Trip
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -5
air.velocity = -5, 3
fall.recover = (var(10) <= 0)
fall.recovertime = 120
down.velocity = 0, 0
air.fall = 1
forcestand = 1

[State 8]
type = ctrlset
trigger1 = movecontact
value = 1
ignorehitpause = 1

[State 8]
type = ChangeState
trigger1 = pos y >= 5
value = 1864


;==============================================================================================
[Statedef 1861]
type = A
movetype = A
poweradd = (Var(10)=0) * 120
anim = 13005
ctrl = 0
sprpriority = 2

[State TATSUMAKI]
type = PlaySnd
trigger1 = animelem = 1
value = 2, 2
channel = 0
volume = 255

[State wind sound]
type = playsnd
trigger1 = animelem = 3
value = 0, 4

[State 6]
type = Velmul
trigger1 = time = [0, 9]
x = 0.83
y = 0.83

[State 6]
type = Velset
trigger1 = animelem = 2
x = 6.5
y = 6.5

[State 6]
type = VelAdd
trigger1 = Time >= 9
x = 0.20
y = 0.20

[State 7]
type = HitDef
triggerall = Var(10) = 0
trigger1 = animelem = 3
attr = A, SA
damage = 50, 6
animtype = medium
getpower = (Var(10)=0) * 30
givepower = 20
priority = 5, Hit
hitflag = MAFD
guardflag = HA
pausetime = 8, 10
sparkxy = -10, -15
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = High
air.type = Trip
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5
air.velocity = -5, 3
fall.recover = (var(10) <= 0)
fall.recovertime = 120
down.velocity = 0, 0
air.fall = 1
forcestand = 1

[State 7]
type = HitDef
triggerall = var(10) >= 1
trigger1 = animelem = 3
attr = A, SA
damage = 50, 6
animtype = medium
getpower = (Var(10)=0) * 30
givepower = 20
priority = 5, Hit
hitflag = HAF
guardflag = HA
pausetime = 8, 10
sparkxy = -10, -0
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = High
air.type = Light
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5
air.velocity = -5, -6
fall.recover = (var(10) <= 0)
fall.recovertime = 120
down.velocity = 0, 0
air.fall = 1
forcestand = 1

[State 8]
type = ChangeState
trigger1 = pos y >= 5
value = 1864

[State 8]
type = ChangeState
trigger1 = movecontact
value = 1863


;==============================================================================================
[Statedef 1863]
type = A
movetype = I
physics = N
anim = 13007
ctrl = 0
sprpriority = 2

[State 6]
type = VelAdd
trigger1 = 1
y = 0.30

[State 6]
type = Velset
trigger1 = time = 0
x = 5.2
y = -7

[State 8]
type = turn
trigger1 = animelem = 2
persistent = 0

[State 8]
type = ChangeState
trigger1 = pos y >= 0
value = 1803


;==============================================================================================
[Statedef 1862]
type = A
movetype = A
poweradd = (Var(10)=0) * 120
anim = 13005
ctrl = 0
sprpriority = 2

[State Sound]
type = playsnd
trigger1 = animelem = 3
value = 2, 8

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "leg fire"
pos = 0, 0
postype = p1
stateno =1060
ownpal = 1

[State TATSUMAKI]
type = PlaySnd
trigger1 = animelem = 1
value = 2, 2
channel = 0
volume = 255

[State wind sound]
type = playsnd
trigger1 = animelem = 3
value = 0, 4

[State 6]
type = Velmul
trigger1 = time = [0, 9]
x = 0.83
y = 0.83

[State 6]
type = Velset
trigger1 = animelem = 2
x = 7
y = 7

[State 6]
type = VelAdd
trigger1 = Time >= 9
x = 0.20
y = 0.20

[State 7]
type = HitDef
trigger1 = animelem = 3
attr = A, SA
damage = 80, 10
animtype = medium
getpower = (Var(10)=0) * 30
givepower = 20
priority = 5, Hit
hitflag = MAFD
guardflag = HA
pausetime = 8, 10
sparkxy = -10, -15
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = High
air.type = Trip
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -5
air.velocity = -5, 3
fall.recover = (var(10) <= 0)
fall.recovertime = 120
down.velocity = 0, 0
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
air.fall = 1
forcestand = 1

[State 8]
type = ChangeState
triggerall = movecontact = 0
trigger1 = pos y >= 5
value = 1864

[State 8]
type = ChangeState
triggerall = movecontact
trigger1 = pos y >= 5
value = 1803


;==============================================================================================
[Statedef 1865]
type = A
movetype = A
juggle = 4
poweradd = (Var(10)=0) * 120
anim = 1022
ctrl = 0
sprpriority = 2

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State 6]
type = Velmul
trigger1 = time = 15
x = 0.53

[State FireA]
type = Explod
trigger1 = animelem = 5
ignorehitpause = 1
anim = 11242
scale = 0.5, 0.5
id = 2505
postype = p1
pos = 46, -59
sprpriority = 5
ownpal = 1

[State 6]
type = veladd
trigger1 = 1
y = 0.4

[State 6]
type = posfreeze
trigger1 = time = [15, 17]
value = 1

[State Hadoken!]
type = PlaySnd
trigger1 = animelem = 5
value = 2, 3
channel = 0
volume = 255

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 5
helpertype = normal
name = "hadouken"
id = 3
pos = 49, -59
postype = p1
stateno =1016
ownpal = 1

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 6]
type = posadd
trigger1 = pos y >= 17
x = -20

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 5
value = 0, 7
volume = 50

[State 8]
type = ChangeState
trigger1 = pos y >= 17
value = 1864


;==============================================================================================
[Statedef 1550]
type = A
movetype = A
juggle = 4
anim = 1023
ctrl = 0
sprpriority = 2

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State 6]
type = VelAdd
trigger1 = time = 13
y = -3.5
x = -0.5

[State 6]
type = Velmul
trigger1 = time = 13
x = 0.53

[State FireA]
type = Explod
trigger1 = animelem = 3
ignorehitpause = 1
anim = 11242
scale = 0.5, 0.5
id = 2505
postype = p1
pos = 46, -59
sprpriority = 5
ownpal = 1

[State 6]
type = veladd
trigger1 = 1
y = 0.4

[State 6]
type = posfreeze
trigger1 = time = [10, 12]
value = 1

[State Hadoken!]
type = PlaySnd
trigger1 = animelem = 3
value = 2, 3
channel = 0
volume = 255

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "hadouken"
id = 3
pos = 46, -56
postype = p1
stateno =1016
ownpal = 1

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 6]
type = posadd
trigger1 = pos y >= 17
x = -20

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 3
value = 0, 7
volume = 50

[State 8]
type = ChangeState
trigger1 = pos y >= 17
value = 1864


;==============================================================================================
[Statedef 1866]
type = A
movetype = A
juggle = 4
poweradd = (Var(10)=0) * 120
anim = 1022
ctrl = 0
sprpriority = 2

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State FireA]
type = Explod
trigger1 = animelem = 5
ignorehitpause = 1
anim = 11242
scale = 0.5, 0.5
id = 2505
postype = p1
pos = 46, -59
sprpriority = 5
ownpal = 1

[State 6]
type = VelAdd
trigger1 = time = 15
y = -3.5
x = -0.5

[State 6]
type = veladd
trigger1 = 1
y = 0.35

[State 6]
type = posfreeze
trigger1 = time = [15, 17]
value = 1

[State Hadoken!]
type = PlaySnd
trigger1 = animelem = 5
value = 2, 3
channel = 0
volume = 255

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 5
helpertype = normal
name = "hadouken"
id = 3
pos = 49, -59
postype = p1
stateno =1017
ownpal = 1

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 6]
type = posadd
trigger1 = pos y >= 17
x = -20

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 5
value = 0, 7
volume = 50

[State 8]
type = ChangeState
trigger1 = pos y >= 17
value = 1864


;==============================================================================================
[Statedef 1650]
type = A
movetype = A
juggle = 4
anim = 1023
ctrl = 0
sprpriority = 2

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 6]
type = VelAdd
trigger1 = time = 13
y = -4.5
x = -1.5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State 6]
type = Velmul
trigger1 = time = 13
x = 0.53

[State FireA]
type = Explod
trigger1 = animelem = 3
ignorehitpause = 1
anim = 11242
scale = 0.5, 0.5
id = 2505
postype = p1
pos = 46, -59
sprpriority = 5
ownpal = 1

[State 6]
type = veladd
trigger1 = 1
y = 0.35

[State 6]
type = posfreeze
trigger1 = time = [10, 12]
value = 1

[State Hadoken!]
type = PlaySnd
trigger1 = animelem = 3
value = 2, 3
channel = 0
volume = 255

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "hadouken"
id = 3
pos = 46, -56
postype = p1
stateno =1017
ownpal = 1

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 6]
type = posadd
trigger1 = pos y >= 17
x = -20

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 3
value = 0, 7
volume = 50

[State 8]
type = ChangeState
trigger1 = pos y >= 17
value = 1864


;==============================================================================================
[Statedef 1867]
type = A
movetype = A
juggle = 4
poweradd = (Var(10)=0) * 120
anim = 1022
ctrl = 0
sprpriority = 2

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State FireA]
type = Explod
trigger1 = animelem = 5
ignorehitpause = 1
anim = 11242
scale = 0.5, 0.5
id = 2505
postype = p1
pos = 46, -59
sprpriority = 5
ownpal = 1

[State 8]
type = veladd
trigger1 = 1
y = 0.3

[State 9]
type = VelAdd
trigger1 = time = 15
y = -4.5
x = -1.5

[State 10]
type = posfreeze
trigger1 = time = [15, 17]
value = 1

[State Hadoken!]
type = PlaySnd
trigger1 = animelem = 5
value = 2, 3
channel = 0
volume = 255

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 5
helpertype = normal
name = "hadouken"
id = 3
pos = 49, -59
postype = p1
stateno =1019
ownpal = 1

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 6]
type = posadd
trigger1 = pos y >= 15
x = -20

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 5
value = 0, 7
volume = 50

[State 8]
type = ChangeState
trigger1 = pos y >= 15
value = 1864


;==============================================================================================
[Statedef 1750]
type = A
movetype = A
juggle = 4
anim = 1023
ctrl = 0
sprpriority = 2

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Hadoken!]
type = PlaySnd
trigger1 = time = 0 && var(28) > 0
value = 0, 12
volume = 255
freqmul = 1.5

[State 1]
type = Pause
trigger1 = time = 0 && var(28) > 0
time = 5
movetime = 5

[State skin fadeout]
type = PalFx
trigger1 = time = 0 && var(28) > 0
time = 24
add = 155, 55, 55 
sinadd = -155, -55, -55, 100

[State 1]
type = envcolor
trigger1 = time = 0 && var(28) > 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 5

[State 9]
type = VelAdd
trigger1 = time = 13
y = -5.5
x = -2.5

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State 6]
type = Velmul
trigger1 = time = 13
x = 0.53

[State FireA]
type = Explod
trigger1 = animelem = 3
ignorehitpause = 1
anim = 11242
scale = 0.5, 0.5
id = 2505
postype = p1
pos = 46, -59
sprpriority = 5
ownpal = 1

[State 6]
type = veladd
trigger1 = 1
y = 0.3

[State 6]
type = posfreeze
trigger1 = time = [10, 12]
value = 1

[State Hadoken!]
type = PlaySnd
trigger1 = animelem = 3
value = 2, 3
channel = 0
volume = 255

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "hadouken"
id = 3
pos = 46, -56
postype = p1
stateno =1019
ownpal = 1

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 6]
type = posadd
trigger1 = pos y >= 17
x = -20

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 3
value = 0, 7
volume = 50

[State 8]
type = ChangeState
trigger1 = pos y >= 17
value = 1864


;==============================================================================================
[Statedef 1868]
type = A
movetype = A
juggle = 4
poweradd = (Var(10)=0) * 120
anim = 12220
ctrl = 0
sprpriority = 2

[State fly]
type = Veladd
trigger1 = time = 8
x = -2

[State fly]
type = Velmul
trigger1 = time = 8
y = 0.3

[State fly]
type = Veladd
trigger1 = time = [0, 8]
y = 0

[State fly]
type = Veladd
trigger1 = time >= 8
y = 0.3

[State 0]
type = posadd
trigger1 = time = 30
x = 10
y = 8

[State 10]
type = posfreeze
trigger1 = time = [5, 8]
value = 1

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Hadoken!]
type = PlaySnd
trigger1 = time = 8
value = 4, 3
channel = 0
volume = 255

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 4
value = 0, 7
volume = 50

[State SuperLight] 
type = Explod
trigger1 = anim = 12220 && animelem = 3
anim = 4803
pos = -17, -15
postype = p1
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = anim = 12220 && animelem = 3
anim = 4803
pos = -17, -14
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State hadouken hit helper]
type = Helper
trigger1 = time = 8
helpertype = normal
name = "hadouken"
id = 3
pos = 64, -69
postype = p1
stateno =1026
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 9]
type = ChangeAnim
trigger1 = time = 30
value = 10503
ctrl = 0

[State 1]
type = posadd
trigger1 = pos y >= 2
x = -10

[State 9]
trigger1 = pos y >= 2
type = ChangeState
value = 1864
ctrl = 0


;==============================================================================================
[Statedef 1869]
type = A
movetype = A
juggle = 4
poweradd = (Var(10)=0) * 120
anim = 12220
ctrl = 0
sprpriority = 2

[State fly]
type = Veladd
trigger1 = time = 8
x = -3

[State fly]
type = Velmul
trigger1 = time = 8
y = 0.3

[State fly]
type = Veladd
trigger1 = time = [0, 8]
y = 0

[State fly]
type = Veladd
trigger1 = time >= 8
y = 0.3

[State 0]
type = posadd
trigger1 = time = 30
x = 10
y = 8

[State 10]
type = posfreeze
trigger1 = time = [5, 8]
value = 1

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Hadoken!]
type = PlaySnd
trigger1 = time = 8
value = 4, 3
channel = 0
volume = 255

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 4
value = 0, 7
volume = 50

[State SuperLight] 
type = Explod
trigger1 = anim = 12220 && animelem = 3
anim = 4803
pos = -17, -15
postype = p1
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = anim = 12220 && animelem = 3
anim = 4803
pos = -17, -14
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State hadouken hit helper]
type = Helper
trigger1 = time = 8
helpertype = normal
name = "hadouken"
id = 3
pos = 68, -69
postype = p1
stateno =1027
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 9]
type = ChangeAnim
trigger1 = time = 30
value = 10503
ctrl = 0

[State 1]
type = posadd
trigger1 = pos y >= 2
x = -10

[State 9]
trigger1 = pos y >= 2
type = ChangeState
value = 1864
ctrl = 0


;==============================================================================================
[Statedef 1870]
type = A
movetype = A
juggle = 4
poweradd = (Var(10)=0) * 120
anim = 12220
ctrl = 0
sprpriority = 2

[State fly]
type = Veladd
trigger1 = time = 8
x = -4

[State fly]
type = Velmul
trigger1 = time = 8
y = 0.3

[State fly]
type = Veladd
trigger1 = time = [0, 8]
y = 0

[State fly]
type = Veladd
trigger1 = time >= 8
y = 0.3

[State 0]
type = posadd
trigger1 = time = 30
x = 10
y = 8

[State 10]
type = posfreeze
trigger1 = time = [5, 8]
value = 1

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Hadoken!]
type = PlaySnd
trigger1 = time = 8
value = 4, 3
channel = 0
volume = 255

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 4
value = 0, 7
volume = 50

[State SuperLight] 
type = Explod
trigger1 = anim = 12220 && animelem = 3
anim = 4803
pos = -17, -15
postype = p1
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = anim = 12220 && animelem = 3
anim = 4803
pos = -17, -14
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State hadouken hit helper]
type = Helper
trigger1 = time = 8
helpertype = normal
name = "hadouken"
id = 3
pos = 68, -69
postype = p1
stateno =1028
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 9]
type = ChangeAnim
trigger1 = time = 30
value = 10503
ctrl = 0

[State 1]
type = posadd
trigger1 = pos y >= 2
x = -10

[State 9]
trigger1 = pos y >= 2
type = ChangeState
value = 1864
ctrl = 0


;==============================================================================================
[Statedef 2001]
type = C
physics = N
movetype = I
anim = 2001
velset = 0, 0
sprpriority = 2

[State 1]
type = Posset
trigger1 = time = 0
y = 0

[State 2]
type = PlayerPush
trigger1 = 1
value = 0

[State 3]
type = turn
trigger1 = time >= 8
trigger1 = p2dist x < 0

[State 4]
type = ChangeState
trigger1 = time >= 8
value = 11
ctrl = 1


;==============================================================================================
[Statedef 2002]
type = C
physics = N
movetype = I
anim = 2001
velset = 0, 0
sprpriority = 2

[State 1]
type = Posset
trigger1 = time = 0
y = 0

[State 1]
type = velset
trigger1 = time = 5
x = 7

[State 2]
type = PlayerPush
trigger1 = 1
value = 0

[State Dust]
type = MakeDust
trigger1 = time >= 5
pos = 0, 0
spacing = 4

[State 3]
type = turn
trigger1 = time >= 16
trigger1 = p2dist x < 0

[State 4]
type = ChangeState
trigger1 = time >= 16
value = 11
ctrl = 1


;==============================================================================================
[Statedef 2003]
type = C
physics = N
movetype = I
anim = 2001
velset = 0, 0
sprpriority = 2

[State 1]
type = Posset
trigger1 = time = 0
y = 0

[State 1]
type = velset
trigger1 = time = 5
x = 7

[State 2]
type = PlayerPush
trigger1 = 1
value = 0

[State Dust]
type = MakeDust
trigger1 = time >= 5
pos = 0, 0
spacing = 4

[State 3]
type = turn
trigger1 = time >= 24
trigger1 = p2dist x < 0

[State 4]
type = ChangeState
trigger1 = time >= 24
value = 11
ctrl = 1


;============================================================================================== 
[Statedef 2004]
type = A
movetype = H
physics = N

[State Anim]
type = changeanim
trigger1 = anim = 5035 && !animtime
value = 5050

[State Vel]
type = veladd
trigger1 = 1
y = gethitvar(yaccel)

[State End]
type = SelfState
trigger1 = vel y > 0 && pos y >= -10
value = 2001


;============================================================================================== 
[Statedef 2005]
type = A
movetype = H
physics = N

[State Anim]
type = changeanim
trigger1 = anim = 5035 && !animtime
value = 5050

[State Vel]
type = veladd
trigger1 = 1
y = gethitvar(yaccel)

[State End]
type = SelfState
trigger1 = vel y > 0 && pos y >= -10
value = 2002


;============================================================================================== 
[Statedef 2006]
type = A
movetype = H
physics = N

[State Anim]
type = changeanim
trigger1 = anim = 5035 && !animtime
value = 5050

[State Vel]
type = veladd
trigger1 = 1
y = gethitvar(yaccel)

[State End]
type = SelfState
trigger1 = vel y > 0 && pos y >= -10
value = 2003


;==============================================================================================
[Statedef 2100]
type = S
movetype = A
physics = S
juggle = 0
poweradd = -2000
ctrl = 0
anim = 2100
velset = 0, 0
sprpriority = 1
facep2 = 1

[State 1]
type = envcolor
trigger1 = time = 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 1

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 1]
type = Pause
trigger1 = time = 0
time = 20
movetime = 20

[State CounterSound]
type = PlaySnd
trigger1 = time = 0
value = 0, 9
volume = 255

[State 4]
type = explod
trigger1 = time = 0
anim = 2102
id = 9400
postype = p1
pos = 3, -46
sprpriority = 3
ownpal = 1
pausemovetime = -1

[State Damage Scaling]
type = varadd
trigger1 = animelem =3, =9
var(17) = 16

[State 9]
type = ChangeState
trigger1 = animelem =3, =9
value = 1700


;==============================================================================================
[Statedef 2200]
type = S
movetype = A
physics = S
juggle = 0 
poweradd = -2000
ctrl = 0
anim = 2100
velset = 0, 0
sprpriority = 1
facep2 = 1

[State 1]
type = envcolor
trigger1 = time = 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 1

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 20

[State 1]
type = Pause
trigger1 = time = 0
time = 20
movetime = 20

[State CounterSound]
type = PlaySnd
trigger1 = time = 0
value = 0, 9
volume = 255

[State 4]
type = explod
trigger1 = time = 0
anim = 2102
id = 9400
postype = p1
pos = 3, -46
sprpriority = 3
ownpal = 1
pausemovetime = -1

[State Damage Scaling]
type = varadd
trigger1 = animelem =3, =9
var(17) = 16

[State 9]
type = ChangeState
trigger1 = animelem =3, =9
value = 1820


;==============================================================================================
[Statedef 2210]
type = A
movetype = A
physics = N
juggle = 0 
poweradd = -2000
ctrl = 0
anim = 2101
velset = 0, 0
sprpriority = 1
facep2 = 1

[State 1]
type = envcolor
trigger1 = time = 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 1

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 20

[State 1]
type = Pause
trigger1 = time = 0
time = 20
movetime = 20

[State CounterSound]
type = PlaySnd
trigger1 = time = 0
value = 0, 9
volume = 255

[State 4]
type = explod
trigger1 = time = 0
anim = 2102
id = 9400
postype = p1
pos = 8, -84
sprpriority = 2
ownpal = 1
pausemovetime = -1

[State Damage Scaling]
type = varadd
trigger1 = animelem =3, =9
var(17) = 16

[State 9]
type = ChangeState
trigger1 = animelem =3, =9
value = 1862


;==============================================================================================
[Statedef 2211]
type = A
movetype = A
physics = N
juggle = 0 
poweradd = -2000
ctrl = 0
anim = 2101
velset = 0, 0
sprpriority = 1
facep2 = 1

[State 1]
type = envcolor
trigger1 = time = 0
value = 255, 10, 10
under = 1
ignorehitpause = 1
persistent = 0
time = 1

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 20

[State 1]
type = Pause
trigger1 = time = 0
time = 20
movetime = 20

[State CounterSound]
type = PlaySnd
trigger1 = time = 0
value = 0, 9
volume = 255

[State 4]
type = explod
trigger1 = time = 0
anim = 2102
id = 9400
postype = p1
pos = 8, -84
sprpriority = 2
ownpal = 1
pausemovetime = -1

[State 9]
type = posadd
trigger1 = animelem =3, =9
x = -6
y = -22

[State Damage Scaling]
type = varadd
trigger1 = animelem =3, =9
var(17) = 16

[State 9]
type = ChangeState
trigger1 = animelem =3, =9
value = 1867


;==============================================================================================
[Statedef 3480]
type = S
movetype = A
physics = S
juggle = 3
poweradd = (Var(10)=0) * -1000
anim = 1550
velset = 0, 0
ctrl = 0
sprpriority = 2
facep2 = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = 2, 10

[State FireBa]
type = Explod
triggerall = movecontact = 1
triggerall = time > 35 && random <= (200 + 4*time)
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
persistent = 1
anim = 12212
id = 12212
postype = p1
pos = 0, -6
random = 200, 0
sprpriority = 5
ownpal = 1
vel = 0, -var(51)
scale = 1, 0.2

[State FireB]
type = Explod
triggerall = movecontact
triggerall = time > 35 && random <= (4*time)
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
persistent = 1
anim = 12215
id = 12212
postype = p1
pos = 0, -8
random = 600, 0
sprpriority = -5
ownpal = 1
vel = 0, -var(51)
scale = 1, 0.2

[State Randomizer]
type = varrandom
trigger1 = time = 0
v = 46
range = 0, 100

[State 0]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State 0]
type = VarSet
trigger1 = time = 0
v = 21
value = 0

[State NHB]
type = NotHitBy
trigger1 = animelemtime(1) <= 0
trigger2 = Prevstateno != [3960, 3991]
trigger2 = animelemtime(4) < 0
value = SCA
time = 1

[State Ikuze]
type = PlaySnd
trigger1 = time = 0
value = 1, 1
volume = 255
channel = 0

[State Push]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State red fadeout]
type = BGPalFx
triggerall = var(28) = 0
trigger1 = animelem = 1
add = 100, 100, 100
mul = 200, 200, 300
sinadd = 100, 100, 100, 340
time = 53
ignorehitpause = 1
invertall = 1

[State red fadein]
type = BGPalFx
triggerall = var(28) = 1
trigger1 = animelem = 1
add = 100, 100, 150
sinadd = 305, -255, -355, 180
time = 32
invertall = 1
ignorehitpause = 1

[State white fadein]
type = BGPalFx
triggerall = var(28) > 1
trigger1 = animelem = 1
add = 255, -155, -155
sinadd = -255, -255, -255, 180
time = 32
ignorehitpause = 1
invertall = 1

[State Freeze]
type = superpause
trigger1 = animelem = 1
anim = S ifelse(var(28) > 0, 10061, 10060)
pos = 34, -39
time = ifelse(var(28) > 0, 33, 53)
movetime = 4
p2defmul = 1
darken = 0
sound = S ifelse(var(28) > 0, 0, 7), ifelse(var(28) > 0, 12, 3)

[State Wind effect]
type = Explod
triggerall = var(28) = 0
trigger1 = animelem = 1
anim = 9402
scale = 0.7, 0.7
pos = 0, 0
sprpriority = 0
postype = p1
supermovetime = -1
bindtime = 18
ownpal = 1
pausemovetime = 9999

[State 0]
type = Varadd
trigger1 = time = 0
v = 28
value = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 400
length = 21
PalBright = 0, 0, 0
PalContrast = 148, 148, 148
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State Shadows]
type = Afterimage
triggerall = time = 0
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
time = 400
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State Rings] 
type = explod
trigger1 = movehit = 1 && animelemtime(4) < 0
persistent = 0
ignorehitpause = 1
anim = 12223
pos = 0, -50
sprpriority = 5
postype = p2
supermovetime = -1
ownpal = 1
id = 12223
pausemovetime = 9999
supermovetime = 9999

[State Rings] 
type = explod
trigger1 = movehit = 1 && animelemtime(5) >= 0 && animelemtime(6) < 0
persistent = 0
ignorehitpause = 1
anim = 12223
pos = 0, -50
sprpriority = 5
postype = p2
supermovetime = -1
ownpal = 1
pausemovetime = 9999
supermovetime = 9999

[State HitDefa]
type = HitDef
trigger1 = animelem = 3
attr = S, HA
damage = 80, 10
animtype = Hard
priority = 6, Hit
hitflag = MAFD
guardflag = MA
pausetime = 20, 20
sparkxy = -10, -50
sparkno = 3
getpower = 0, 0
guard.sparkno = 40; S9300
hitsound = S7, 2
guardsound = S0, 100
ground.type = Low
ground.slidetime = 190
ground.hittime = 190
ground.velocity = 1, -3
air.velocity = 1, -3
air.hittime = 190
snap = 50, 0
ground.cornerpush.veloff = 0
fall.animtype = Hard
fall.recover = 0
fall.recovertime = 120
air.fall = 1
fall = 1
down.velocity = 1, -3.5
fall.recover = (var(10) <= 0)
fall.recovertime = 120
yaccel = 0.22
kill = 0
forcestand = 1

[State HitDefa]
type = HitDef
trigger1 = animelem = 5
attr = S, HA
damage = 80, 10
animtype = Hard
priority = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 20, 20
sparkxy = -10, -50
sparkno = 3
getpower = 0, 0
guard.sparkno = 40; S9300
hitsound = S7, 2
guardsound = S0, 100
ground.type = Low
ground.slidetime = 20
ground.hittime = 90
ground.velocity = -1, -6
air.velocity = -1, -6
air.hittime = 90
ground.cornerpush.veloff = 0
fall.animtype = Hard
air.fall = 1
fall.recover = 0
fall.recovertime = 120
down.velocity = 0, -2
fall.recover = (var(10) <= 0)
fall.recovertime = 120
yaccel = 0.22
kill = 0
forcestand = 1

[State 9]
type = EnvShake
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 20
ampl = -5
freq = 100
phase = 1

[State 1]
type = envcolor
trigger1 = movehit
value = 255, 255, 255
under = 1
ignorehitpause = 1
persistent = 0
time = 3

[State 9]
type = EnvShake
trigger1 = movehit && animelem = 5
trigger1 = var(46) < 90
trigger1 = var(28) < 3
ignorehitpause = 1
persistent = 0
time = 20
ampl = -5
freq = 100
phase = 1

[State 1]
type = envcolor
trigger1 = movehit && animelem = 5
value = 255, 255, 255
under = 1
ignorehitpause = 1
persistent = 0
time = 3

[State Slow Motion]
type = Pause 
triggerall = roundstate = 2 && p2life > 0
trigger1 = movecontact
time = 1 
movetime = 1 
ignorehitpause = 1

[State Ikuze]
type = PlaySnd
triggerall = movecontact && timemod = 10, 9 && time > 30
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
persistent = 1
value = 5, 1
volume = -100 + time
freqmul = 0.9

[State Ikuze]
type = PlaySnd
triggerall = movecontact && timemod = 15, 14 && time > 30
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
persistent = 1
value = 5, 1
volume = -100 + time
freqmul = 1.1

[State 3]
type = BGPalfx
triggerall = movecontact && time = 50
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
supermovetime = -1
time = 150
add = 0, 0, 0
sinadd = -400, -400, -400, 800

[State 9]
type = EnvShake
triggerall = movecontact && time = 40
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
ignorehitpause = 1
persistent = 1
time = 155
ampl = -4
freq = 100
phase = 90

[State Ikuze]
type = PlaySnd
trigger1 = movecontact
persistent = 0
value = 1, 6
volume = 255
channel = 0

[State 3]
type = PlaySnd
trigger1 = movecontact && time = 25
trigger1 = var(46) < 90
trigger1 = var(28) < 3
persistent = 0
value = 0, 16
volume = 255
freqmul = 0.4

[State Idle]
type = statetypeset
trigger1 = anim = 1510
movetype = I

[State 9]
type = ChangeAnim
trigger1 = time = 10 && movehit = 0
value = 1500
elem = 4

[State 9]
type = ChangeState
trigger1 = animelem = 4 && movehit = 0
value = 3490

[State 9]
type = ChangeState
trigger1 = animelem = 6 && movehit
value = 3481


;==============================================================================================
[Statedef 3481]
type = A
movetype = A
ctrl = 0

[State Dragon] 
type = Explod
triggerall = time = 0
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
anim = 10070
pos = ceil(ifelse(facing = -1, frontedgedist - 30, 30 - frontedgedist)), -14
sprpriority = 5
postype = front
supermove = 1
bindtime = -1
ownpal = 1
scale = 1.20, 1.20
pausemovetime = -1

[State Dust] 
type = Explod
trigger1 = time = 0
trigger1 = var(46) < 90 && var(28) < 3
anim = 12080
postype = p1
pos = 0, 15
sprpriority = 5
scale = -0.75, 0.75
ownpal = 1

[State 3]
type = BGPalfx
triggerall = time = 0
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
supermovetime = -1
time = 100
add = -255, -255, -255
sinadd = 255, 255, 255, 400

[State Ikuze]
type = PlaySnd
triggerall = time = 0
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
value = 2, 10
volume = 255

[State Ikuze]
type = PlaySnd
trigger1 = time = 0
value = 4, 1
volume = 255
channel = 0

[State hadouken hit helper]
type = Helper
trigger1 = movehit
helpertype = normal
ignorehitpause = 1
persistent = 0
name = "Foot flash!"
id = 6
pos = 0, ceil(-pos y)
postype = p2
stateno =1067
ownpal = 1
shadow = 0
size.xscale = 1.2
facing = -1

[State 9]
type = EnvShake
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 20
ampl = -5
freq = 100
phase = 1

[State 1]
type = envcolor
trigger1 = movehit
value = 255, 255, 255
under = 1
ignorehitpause = 1
persistent = 0
time = 3

[State 1]
type = VelSet
trigger1 = time = 0
x = 4
y = -15

[State 0]
type = Varadd
triggerall = time = 0
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
v = 21
value = 1

[State HitDefb]
type = HitDef
triggerall = animelem = 6
trigger1 = var(46) < 90
trigger1 = var(28) < 3
attr = A, HA
damage = 80, 10
animtype = Up
priority = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 0, 0
sparkxy = -10, -75
sparkno = 3
guard.sparkno = 40; S9300
hitsound = S7, 2
guardsound = S0, 100
ground.type = high
ground.slidetime = 20
ground.hittime = 27
ground.velocity = -3, -15
getpower = 0, 0
air.velocity = -3, -15
air.type = high
air.fall = 1
fall = 1
down.velocity = 0, -2
fall.recover = 0
fall.recovertime = 120
forcestand = 1

[State Rings] 
type = explod
trigger1 = movehit = 1
persistent = 0
ignorehitpause = 1
anim = 12223
pos = 0, -50
sprpriority = 5
postype = p2
supermovetime = -1
ownpal = 1
id = 12223
pausemovetime = 9999
supermovetime = 9999

[State HitDefb]
type = HitDef
triggerall = animelem = 6
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
attr = S, HA
damage = 140, 18
animtype = Up
priority = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 0, 0
sparkxy = -10, -75
sparkno = 3
guard.sparkno = 40; S9300
hitsound = S7, 2
guardsound = S0, 100
ground.type = high
ground.slidetime = 20
ground.hittime = 27
ground.velocity = -1, -25
getpower = 0, 0
air.velocity = -1, -25
air.type = high
air.fall = 1
fall = 1
down.velocity = 0, -2
fall.recover = 0
fall.recovertime = 120
forcestand = 1

[State 2]
type = VelMul
trigger1 = 1
x = 0.88

[State 3]
type = VelAdd
trigger1 = 1
y = 0.44

[State 5]
type = ChangeAnim
trigger1 = vel y > -1
value = 1551
persistent = 0

[State 0]
type = Varset
trigger1 = vel y > 0
trigger1 = pos y >= 0
v = 28
value = 0

[State 1]
type = AfterImageTime
trigger1 = vel y > 0
trigger1 = pos y >= 0
time = 0

[State Idle]
type = statetypeset
trigger1 = anim = 1551
movetype = I

[State 9]
trigger1 = vel y > 0
trigger1 = pos y >= 0
type = ChangeState
value = 1874


;==============================================================================================
[Statedef 3482]
type = S
movetype = I
physics = S
anim = 1520
velset = 1, 0
ctrl = 0

[State 3]
type = PosSet
trigger1 = time = 0
y = 0

[State 9]
type = ChangeState
trigger1 = time = 3
value = 3455
ctrl = 0


;==============================================================================================
[Statedef 3490]
type = A
movetype = A

[State NHB]
type = NotHitBy
trigger1 = time = 0
value = , AP
time = 8

[State Ikuze]
type = PlaySnd
trigger1 = time = 0
value = 4, 1
volume = 255
channel = 0

[State 1]
type = VelSet
trigger1 = time = 0
x = 4
y = -12.5

[State 2]
type = VelMul
trigger1 = 1
x = 0.86

[State 3]
type = VelAdd
trigger1 = 1
y = 0.42

[State 9]
type = HitDef
trigger1 = timemod = 3, 2
attr = S, SA
damage = 20, 3
animtype = Hard
getpower = (Var(10)=0) * 25
givepower = 15
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 3, 2
sparkxy = -10, -80
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = High
air.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -2, -8
air.velocity = -2, -8
fall = 1
fall.recover = (var(10) <= 0)
fall.recovertime = 120
forcestand = 1

[State 5]
type = ChangeAnim
trigger1 = vel y > -1
value = 1510
persistent = 0

[State 6]
type = velset
trigger1 = anim = 1510
x = 0
persistent = 0

[State 0]
type = Varset
trigger1 = vel y > 0
trigger1 = pos y >= 0
v = 28
value = 0

[State 1]
type = AfterImageTime
trigger1 = vel y > 0
trigger1 = pos y >= 0
time = 0

[State 9]
trigger1 = vel y > 0
trigger1 = pos y >= 0
type = ChangeState
value = 1520


;==============================================================================================
[Statedef 4480]
type = S
movetype = A
juggle = 4
poweradd = (Var(10)=0) * -1000
anim = 4480
velset = 0, 0
ctrl = 0
sprpriority = 2
facep2 = 1

[State Randomizer]
type = varrandom
trigger1 = time = 0
v = 46
range = 0, 100

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 6
helpertype = normal
name = "leg fire"
pos = 0, 0
postype = p1
stateno =10611
ownpal = 1

[State 5]
type = Screenbound
trigger1 = 1
movecamera = 1, 1
value = 0

[State NHB]
type = NotHitBy
trigger1 = animelemtime(1) <= 0
trigger2 = Prevstateno != [3960, 3991]
trigger2 = animelemtime(6) < 0
value = SCA
time = 1

[State Ikuze]
type = PlaySnd
trigger1 = time = 0
value = 3, 9
volume = 255
channel = 0

[State red fadeout]
type = BGPalFx
triggerall = var(28) = 0
trigger1 = animelem = 1
add = 100, 100, 100
mul = 200, 200, 300
sinadd = 100, 100, 100, 340
time = 53
ignorehitpause = 1
invertall = 1

[State red fadein]
type = BGPalFx
triggerall = var(28) = 1
trigger1 = animelem = 1
add = 100, 100, 150
sinadd = 305, -255, -355, 180
time = 32
invertall = 1
ignorehitpause = 1

[State white fadein]
type = BGPalFx
triggerall = var(28) > 1
trigger1 = animelem = 1
add = 255, -155, -155
sinadd = -255, -255, -255, 180
time = 32
ignorehitpause = 1
invertall = 1

[State Freeze]
type = superpause
trigger1 = animelem = 1
anim = S ifelse(var(28) > 0, 10061, 10060)
pos = 40, -27
time = ifelse(var(28) > 0, 33, 53)
movetime = 10
p2defmul = 1
darken = 0
sound = S ifelse(var(28) > 0, 0, 7), ifelse(var(28) > 0, 12, 3)

[State Wind effect] 
type = Explod
triggerall = var(28) = 0
trigger1 = animelem = 1
anim = 9402
scale = 0.7, 0.7
pos = 0, 0
sprpriority = 0
postype = p1
supermovetime = -1
bindtime = 18
ownpal = 1
pausemovetime = 9999

[State 0]
type = Varadd
trigger1 = time = 0
v = 28
value = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 93
length = 21
PalBright = 0, 0, 0
PalContrast = 148, 148, 148
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State Shadows]
type = Afterimage
triggerall = time = 0
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
time = 153
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State TATSUMAKI]
type = PlaySnd
trigger1 = animelem = 5
value = 2, 2
channel = 0
volume = 255

[State 1]
type = PlaySnd
trigger1 = animelem = 5
value = 0, 4

[State 1]
type = HitDef
triggerall = animelem = 1
trigger1 = var(46) < 90
trigger1 = var(28) < 3
p2facing = 1
attr = S, HA
damage = 170, 21
animtype = Hard
getpower = 0, 0
givepower = 20
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 18, 18
guard.pausetime = 12, 12
sparkxy = -20, -60
sparkno = 3
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = low
air.type = low
fall.animtype = Hard
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -16, -4
air.velocity = -16, -4
yaccel = 0.25
fall.recover = 0
fall.recovertime = 120
fall = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
p2stateno = 4490
forcestand = 1

[State 1]
type = HitDef
triggerall = animelem = 1
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
p2facing = 1
attr = S, HA
damage = 140, 18
animtype = Hard
getpower = 0, 0
givepower = 20
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 24, 24
guard.pausetime = 12, 12
sparkxy = -20, -60
sparkno = 3
guard.sparkno = 40; S9200
hitsound = S2, 9
guardsound = S0, 100
ground.type = low
air.type = low
fall.animtype = Hard
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -20, -4
air.velocity = -20, -4
yaccel = 0.25
fall.recover = 0
fall.recovertime = 120
fall = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State hadouken hit helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "leg fire"
ignorehitpause = 1
persistent = 0
pos = 0, -73
postype = p1
stateno = 10610
ownpal = 1

[State 1]
type = envcolor
trigger1 = movehit = 1
trigger1 = var(46) < 90 && var(28) < 3
value = 255, 255, 255
under = 1
ignorehitpause = 1
persistent = 0
time = 1

[State 1]
type = bgpalfx
trigger1 = movehit = 1
trigger1 = var(46) >= 90 || var(28) >= 3
time = 16
add = 255, 255, 255
sinadd = -255, -255, -255, 64
ignorehitpause = 1
persistent = 0

[State P1]
type = changestate
trigger1 = movehit = 1
trigger1 = var(46) >= 90 || var(28) >= 3
value = 4485
ignorehitpause = 0

[State 1]
type = posadd
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
x = ifelse((p2dist y = [-32, 32]) && (p2dist x = [0, 10]), floor(p2dist x), 10)

[State 1]
type = posadd
trigger1 = animelem = 5
trigger2 = animelem = 6
x = 10

[State 1]
type = posadd
trigger1 = animelem = 9
x = 7

[State 1]
type = posadd
trigger1 = animelem = 10
x = 10

[State 0]
type = Varset
trigger1 = animtime = 0
v = 28
value = 0

[State 1]
type = AfterImageTime
trigger1 = Animtime = 0
time = 0

[State Idle]
type = statetypeset
trigger1 = animelemtime(7) >= 0
movetype = I

[State 9]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 4485]
type = S
physics = N
movetype = A
ctrl = 0
anim = 4485
velset = 0, 0
sprpriority = 5

[State FireB]
type = Explod
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State Randomizer]
type = Varset
trigger1 = time = 0
v = 46
value = 0

[State hadouken hit helper]
type = Helper
trigger1 = numtarget
trigger1 = time = [4, 52]
trigger1 = !((time + 4) % 8)
helpertype = normal
name = "Thunderbolt"
id = 6
postype = p1
pos = 12 + ceil(target, pos x - pos x) * facing, ceil(-pos y)
stateno = 4486
ownpal = 1
size.xscale = 0.5
size.yscale = 1.0

[State FireBa]
type = Explod
trigger1 = time = [4, 52]
anim = 12212
id = 12212
postype = p1
pos = ceil(target, pos x - pos x) * facing, -6
random = 40, 0
sprpriority = 5
vel = -5 - (random / 200.0), -5 - (random / 200.0)
scale = 0.75, 0.15
ownpal = 1

[State 1]
type = posadd
trigger1 = animelem = 3
x = 7

[State 1]
type = posadd
trigger1 = animelem = 4
x = 10

[State 5]
type = Screenbound
trigger1 = 1
movecamera = 0, 1
value = 0

[State Shadows]
type = Afterimagetime
trigger1 = time = 0
time = 0

[State 9]
type = ChangeState
triggerall = Animtime = 0
trigger1 = BackEdgeBodyDist >= 0
value = 0
ctrl = 1

[State 9]
type = ChangeState
triggerall = Animtime = 0
trigger1 = BackEdgeBodyDist < 0
value = 3886
ctrl = 0


;==============================================================================================
[Statedef 4486]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10440
velset = 0, 0
sprpriority = 3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, ifelse((time % 2), 128, 256)
ignorehitpause = 1

[State 1]
type = playsnd
trigger1 = time = 0
value = 2, 9
freqmul = 1.2

[State 1]
type = palfx
trigger1 = time = 0
time = -1
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State 1]
type = bgpalfx
trigger1 = time = 0
time = 8
add = 64, 64, 64
sinadd = -64, -64, -64, 32
ignorehitpause = 1

[State 7]
type = HitDef
trigger1 = animelem = 1
attr = S, HA
damage = ceil(20 * root, fvar(10)), 3
animtype = Back
fall.animtype = Back
getpower = 0, 0
givepower = 20
priority = 5, Hit
hitflag = MAFD
guardflag = MA
pausetime = 2, 1
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = Low
air.type = Low
fall = 1
air.hittime = 50
ground.slidetime = 40
ground.hittime = 50
ground.velocity = -12.0, -2.0
air.velocity = -12.0, -2.0
yaccel = 0.35
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State 7]
type = HitDef
trigger1 = animelem = 1
trigger1 = (root, stateno = 4485) && (root, time >= 52)
attr = S, HA
damage = ceil(22 * root, fvar(10)), 6
animtype = Up
fall.animtype = Up
getpower = 0, 0
givepower = 20
priority = 5, Hit
hitflag = MAFD
guardflag = MA
pausetime = 2, 1
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = Low
air.type = Low
fall = 1
air.hittime = 50
ground.slidetime = 40
ground.hittime = 50
ground.velocity = -4.0, -8.0
air.velocity = -4.0, -8.0
yaccel = 0.35
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 15
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.70, .70, .70
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State Dissipate]
type = destroyself
trigger1 = time >= 14


;==============================================================================================
[Statedef 4490]
type = A
movetype = H
physics = N

[State 1]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1, 0

[State 1]
type = screenbound
trigger1 = vel y < 0
value = 1
movecamera = 0, 0

[State 2]
type = posfreeze
trigger1 = !Hitshakeover
value = 1

[State 1]
type = ChangeAnim
trigger1 = !Hitshakeover
value = 5030

[State 1]
type = ChangeAnim
trigger1 = anim = 5030 && animtime = 0
value = ifelse(selfanimexist(5035), 5035, 5050)

[State 1]
type = ChangeAnim
trigger1 = anim = 5035 && animtime = 0
value = 5050

[State 2]
type = Veladd
trigger1 = Hitshakeover
y = gethitvar(yaccel)

[State 2]
type = HitVelSet
trigger1 = Hitshakeover
x = 1
y = 1
persistent = 0

[State 6]
type = Changestate
trigger1 = Hitshakeover
trigger1 = backedgedist <= 10 && time > 5 && vel Y <= 0
value = 4491

[State 6]
type = SelfState
trigger1 = Hitshakeover
trigger1 = pos y >= 10
value = 5100


;==============================================================================================
[Statedef 4491]
type = A
movetype = H
physics = N

[State 8]
type = turn
trigger1 = time = 0
persistent = 0

[State 10]
type = PlaySnd
trigger1 = time = 0
value = F7, 0

[State 4] 
type = explod
trigger1 = time = 0
anim = F72
postype = p1
pos = ceil(frontedgedist), const(size.mid.pos.y)
sprpriority = -5
ownpal = 1

[State 1]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1, 0

[State 2]
type = Veladd
trigger1 = 1
y = 0.35

[State 2]
type = VelSet
trigger1 = time = 0
x = -1.0
y = -8.0

[State 1]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(selfanimexist(5051), 5051, 5030)

[State 1]
type = ChangeAnim
trigger1 = anim = 5030 && animtime = 0
value = ifelse(selfanimexist(5035), 5035, 5050)

[State 1]
type = ChangeAnim
trigger1 = anim = 5035 && animtime = 0
value = 5050

[State 1]
type = ChangeAnim
trigger1 = anim = 5051 && vel y > 0
value = 5061

[State 6]
type = SelfState
trigger1 = pos y >= ifelse(anim = 5061, 0, 25)
value = 5100


;==============================================================================================
[Statedef 4800]
type = S
movetype = A
physics = S
juggle = 3
poweradd = (Var(10)=0) * -1000
anim = 2900
velset = 0, 0
ctrl = 0
sprpriority = 2
facep2 = 1

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = 2, 10

[State Randomizer]
type = varrandom
trigger1 = time = 0
v = 46
range = 0, 100

[State 0]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State 0]
type = VarSet
trigger1 = time = 0
v = 21
value = 0

[State Ikuze]
type = PlaySnd
trigger1 = time = 0
value = 1, 1
volume = 255
channel = 0

[State red fadeout]
type = BGPalFx
triggerall = var(28) = 0
trigger1 = animelem = 4
add = 100, 100, 100
mul = 200, 200, 300
sinadd = 100, 100, 100, 340
time = 53
ignorehitpause = 1
invertall = 1

[State red fadein]
type = BGPalFx
triggerall = var(28) = 1
trigger1 = animelem = 4
add = 100, 100, 150
sinadd = 305, -255, -355, 180
time = 32
invertall = 1
ignorehitpause = 1

[State white fadein]
type = BGPalFx
triggerall = var(28) > 1
trigger1 = animelem = 4
add = 255, -155, -155
sinadd = -255, -255, -255, 180
time = 32
ignorehitpause = 1
invertall = 1

[State 0]
type = Varadd
trigger1 = !time
v = 28
value = 1

[State 5]
type = ChangeAnim
triggerall = !time
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
value = 2922
elem = 1
persistent = 0

[State Freeze]
type = superpause
trigger1 = animelem = 4
anim = S ifelse(var(28) > 0, 10061, 10060)
pos = 0, -114
time = ifelse(var(28) > 0, 33, 53)
movetime = 0
p2defmul = 1
darken = 0
sound = S ifelse(var(28) > 0, 0, 7), ifelse(var(28) > 0, 12, 3)

[State Wind effect] 
type = Explod
triggerall = var(28) = 0
trigger1 = animelem = 4
anim = 9402
scale = 0.7, 0.7
pos = 0, 0
sprpriority = 0
postype = p1
supermovetime = -1
bindtime = 18
ownpal = 1
pausemovetime = 9999

[State Shadows]
type = Afterimage
trigger1 = animelem = 4
time = 400
length = 21
PalBright = 0, 0, 0
PalContrast = 148, 148, 148
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State Shadows]
type = Afterimage
triggerall = animelem = 4
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
time = 400
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State 9]
type = EnvShake
trigger1 = animelem = 7
ignorehitpause = 1
persistent = 0
time = 20
ampl = -12
freq = 100
phase = 1

[State 5]
type = PlaySnd
trigger1 = animelem = 7
value = 5, 3
volume = 255

[State 5]
type = PlaySnd
trigger1 = animelem = 7
value = 5, 3
volume = 255

[State 5]
type = PlaySnd
trigger1 = animelem = 7
value = 5, 3
volume = 255
freqmul = 1.2

[State NHB]
type = NotHitBy
triggerall = (Prevstateno != [3960, 3991]) || animelemtime(4) < 0
trigger1 = var(28) < 3 && var(46) < 90
trigger1 = animelemtime(7) < 0
trigger2 = var(46) >= 90 || var(28) >= 3
trigger2 = anim=2900 || animelemtime(7) < 0
value = SCA
time = 1
ignorehitpause = 1

[State 1]
type = PlayerPush
trigger1 = var(28) < 3 && var(46) < 90
trigger1 = animelemtime(15) < 0
trigger2 = var(46) >= 90 || var(28) >= 3
trigger2 = anim=2900 || animelemtime(38) < 0
value = 0
ignorehitpause = 1

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 7
helpertype = normal
name = "kongblast"
id = 8
pos = 0, 0
postype = p1
stateno =4801
ownpal = 1

[State hadouken hit helper]
type = Helper
triggerall = var(28) < 3
triggerall = var(46) < 90
trigger1 = animelem = 17
helpertype = normal
name = "kongblast"
id = 8
pos = 40, 0
postype = p1
stateno =4802
ownpal = 1
size.xscale = 0.40
size.yscale = 0.22

[State hadouken hit helper]
type = Helper
triggerall = var(28) < 3
triggerall = var(46) < 90
trigger1 = animelem = 17
helpertype = normal
name = "kongblast"
id = 8
pos = -40, 0
postype = p1
stateno =4803
ownpal = 1
size.xscale = 0.40
size.yscale = 0.22

[State hadouken hit helper]
type = Helper
triggerall = var(28) < 3
triggerall = var(46) < 90
trigger1 = animelem = 11
helpertype = normal
name = "kongblast"
id = 8
pos = 0, 20
postype = p1
stateno =4804
ownpal = 1
size.xscale = 0.40
size.yscale = 0.22

[State hadouken hit helper]
type = Helper
triggerall = var(28) < 3
triggerall = var(46) < 90
trigger1 = animelem = 11
helpertype = normal
name = "kongblast"
id = 8
pos = 0, -20
postype = p1
stateno =4805
ownpal = 1
size.xscale = 0.40
size.yscale = 0.22

[State hadouken hit helper]
type = Helper
triggerall = var(28) < 3
triggerall = var(46) < 90
trigger1 = animelem = 13
helpertype = normal
name = "kongblast"
id = 8
pos = 25, 10
postype = p1
stateno =4806
ownpal = 1
size.xscale = 0.40
size.yscale = 0.22

[State hadouken hit helper]
type = Helper
triggerall = var(28) < 3
triggerall = var(46) < 90
trigger1 = animelem = 15
helpertype = normal
name = "kongblast"
id = 8
pos = 15, -10
postype = p1
stateno =4807
ownpal = 1
size.xscale = 0.40
size.yscale = 0.22

[State hadouken hit helper]
type = Helper
triggerall = var(28) < 3
triggerall = var(46) < 90
trigger1 = animelem = 13
helpertype = normal
name = "kongblast"
id = 8
pos = -25, 10
postype = p1
stateno =4808
ownpal = 1
size.xscale = 0.40
size.yscale = 0.22

[State hadouken hit helper]
type = Helper
triggerall = var(28) < 3
triggerall = var(46) < 90
trigger1 = animelem = 15
helpertype = normal
name = "kongblast"
id = 8
pos = -15, -10
postype = p1
stateno =4809
ownpal = 1
size.xscale = 0.40
size.yscale = 0.22

[State hadouken hit helper]
type = Helper
triggerall = animelem = 7
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
helpertype = normal
name = "kongblast"
id = 8
pos = 0, 0; -15, -10
postype = p1
stateno =4810
ownpal = 1
size.xscale = 1
size.yscale = 1

[State Slow Motion]
type = Pause 
triggerall = roundstate = 2 && p2life > 0
triggerall = time > 13
triggerall = time < 43
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
time = 1
movetime = 1
ignorehitpause = 1

[State 3]
type = BGPalfx
triggerall = time = 13
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
supermovetime = -1
time = 60
add = 0, 0, 0
sinadd = -400, -400, -400, 400

[State 1]
type = AfterImageTime
trigger1 = Animtime = 0
time = 0

[State 0]
type = Varset
trigger1 = Animtime = 0
v = 28
value = 0

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 4801]
type = S
movetype = A
physics = N
ctrl = 0
anim = 2910
velset = 0, 0
sprpriority = 5

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State HitDefb]
type = HitDef
trigger1 = animelem = 1
attr = S, HP
damage = ceil(90 * root, fvar(10)), 10
animtype = Hard
air.animtype = Hard
fall.animtype = Hard
priority = 6, Hit
hitflag = MAFDP
guardflag = MA
pausetime = 0, 3
sparkxy = -10, -75
sparkno = 2
guard.sparkno = 40; S9300
hitsound = S6, 5
guardsound = S0, 100
ground.type = Low
ground.slidetime = 20
ground.hittime = 27
ground.velocity = -1, -6
getpower = 0, 0
air.velocity = -1, -6
air.type = Low
air.fall = 1
fall = 1
down.velocity = 0, -2
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
sprpriority = 3
forcestand = 1

[State HitDefb]
type = HitDef
trigger1 = animelem = 1
trigger1 = root, var(46) >= 90 || root, var(28) >= 3
attr = S, HP
damage = ceil(120 * root, fvar(10)), 15
animtype = Hard
air.animtype = Hard
fall.animtype = Hard
priority = 6, Hit
hitflag = MAFDP
guardflag = MA
pausetime = 0, 3
sparkxy = -10, -75
sparkno = 2
guard.sparkno = 40; S9300
hitsound = S6, 5
guardsound = S0, 100
ground.type = Low
ground.slidetime = 20
ground.hittime = 27
ground.velocity = (p2dist x / 14.0), -6
getpower = 0, 0
air.velocity = (p2dist x / 14.0), -6
air.type = Low
air.fall = 1
fall = 1
down.velocity = 0, -2
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
sprpriority = 3
forcestand = 1

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -6, -12

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -6, 6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(51)), (var(51))/6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(52)), (var(51))/6

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1
ignorehitpause = 1

[State HitOverride]
type = hitoverride
trigger1 = 1
attr = SCA, AA, AP, AT
stateno = 4801
time = -1
ignorehitpause = 1

[State Dissipate]
type = destroyself
trigger1 = time >= 16


;==============================================================================================
[Statedef 4802]
type = S
movetype = A
physics = N
ctrl = 0
anim = 2920
velset = 8, 0
sprpriority = 3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Ikuze]
type = PlaySnd
trigger1 = time = 0
value = 8, 9
volume = -50

[State Randomizer]
type = varrandom
trigger1 = 1
v = 55
range = -20, 20

[State Randomizer]
type = VarSet
trigger1 = numenemy
var(56) = ceil(((enemynear, pos y + enemynear, const(size.mid.pos.y)) - pos y) + (random / 25.0) - 20)

[State HitDefb]
type = HitDef
trigger1 = hitcount < 3 && !moveguarded && !movereversed
attr = S, HP
damage = ceil(12 * root, fvar(10)), 6
animtype = Up
priority = 6, Hit
hitflag = MAFDP
guardflag = MA
pausetime = 0, 5
sparkxy = var(55), var(56)
sparkno = 2
guard.sparkno = 40; S9300
hitsound = S6, 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 20
ground.hittime = 27
ground.velocity = -1, -12
getpower = 0, 0
air.velocity = -1, -12
air.type = high
air.fall = 1
fall = 1
down.velocity = 0, -2
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
sprpriority = 3
forcestand = 1

[State 5]
type = velmul
trigger1 = 1
x = 0.8
y = 0.8

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -6, -12

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -6, 6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(51)), (var(51))/6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(52)), (var(51))/6

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 6
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.50, .50, .50
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 35


;==============================================================================================
[Statedef 4803]
type = S
movetype = A
physics = N
ctrl = 0
anim = 2920
velset = -8, 0
sprpriority = 3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 55
range = -20, 20

[State Randomizer]
type = VarSet
trigger1 = numenemy
var(56) = ceil(((enemynear, pos y + enemynear, const(size.mid.pos.y)) - pos y) + (random / 25.0) - 20)

[State HitDefb]
type = HitDef
trigger1 = hitcount < 3 && !moveguarded && !movereversed
attr = S, HP
damage = ceil(12 * root, fvar(10)), 6
animtype = Up
priority = 6, Hit
hitflag = MAFDP
guardflag = MA
pausetime = 0, 5
sparkxy = var(55), var(56)
sparkno = 2
guard.sparkno = 40; S9300
hitsound = S6, 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 20
ground.hittime = 27
ground.velocity = -1, -12
getpower = 0, 0
air.velocity = -1, -12
air.type = high
air.fall = 1
fall = 1
down.velocity = 0, -2
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
sprpriority = 3
forcestand = 1

[State 5]
type = velmul
trigger1 = 1
x = 0.8
y = 0.8

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -6, -12

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -6, 6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(51)), (var(51))/6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(52)), (var(51))/6

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 6
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.50, .50, .50
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 35


;==============================================================================================
[Statedef 4804]
type = S
movetype = A
physics = N
ctrl = 0
anim = 2920
velset = 0, 1.5
sprpriority = 3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Ikuze]
type = PlaySnd
trigger1 = time = 0
value = 8, 9
volume = -50

[State Randomizer]
type = varrandom
trigger1 = 1
v = 55
range = -20, 20

[State Randomizer]
type = VarSet
trigger1 = numenemy
var(56) = ceil(((enemynear, pos y + enemynear, const(size.mid.pos.y)) - pos y) + (random / 25.0) - 20)

[State HitDefb]
type = HitDef
trigger1 = hitcount < 3 && !moveguarded && !movereversed
attr = S, HP
damage = ceil(12 * root, fvar(10)), 6
animtype = Up
priority = 6, Hit
hitflag = MAFDP
guardflag = MA
pausetime = 0, 5
sparkxy = var(55), var(56)
sparkno = 2
guard.sparkno = 40; S9300
hitsound = S6, 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 20
ground.hittime = 27
ground.velocity = -1, -12
getpower = 0, 0
air.velocity = -1, -12
air.type = high
air.fall = 1
fall = 1
down.velocity = 0, -2
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
sprpriority = 3
forcestand = 1

[State 5]
type = velmul
trigger1 = 1
x = 0.8
y = 0.8

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -6, -12

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -6, 6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(51)), (var(51))/6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(52)), (var(51))/6

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 6
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.50, .50, .50
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 35


;==============================================================================================
[Statedef 4805]
type = S
movetype = A
physics = N
ctrl = 0
anim = 2920
velset = 0, -1.5
sprpriority = -3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 55
range = -20, 20

[State Randomizer]
type = VarSet
trigger1 = numenemy
var(56) = ceil(((enemynear, pos y + enemynear, const(size.mid.pos.y)) - pos y) + (random / 25.0) - 20)

[State HitDefb]
type = HitDef
trigger1 = hitcount < 3 && !moveguarded && !movereversed
attr = S, HP
damage = ceil(12 * root, fvar(10)), 6
animtype = Up
priority = 6, Hit
hitflag = MAFDP
guardflag = MA
pausetime = 0, 5
sparkxy = var(55), var(56)
sparkno = 2
guard.sparkno = 40; S9300
hitsound = S6, 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 20
ground.hittime = 27
ground.velocity = -1, -12
getpower = 0, 0
air.velocity = -1, -12
air.type = high
air.fall = 1
fall = 1
down.velocity = 0, -2
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
sprpriority = -3
forcestand = 1

[State 5]
type = velmul
trigger1 = 1
x = 0.8
y = 0.8

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -6, -12

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -6, 6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(51)), (var(51))/6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(52)), (var(51))/6

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 6
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.50, .50, .50
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 35


;==============================================================================================
[Statedef 4806]
type = S
movetype = A
physics = N
ctrl = 0
anim = 2920
velset = 4, 0.75
sprpriority = 3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Ikuze]
type = PlaySnd
trigger1 = time = 0
value = 8, 9
volume = -50

[State Randomizer]
type = varrandom
trigger1 = 1
v = 55
range = -20, 20

[State Randomizer]
type = VarSet
trigger1 = numenemy
var(56) = ceil(((enemynear, pos y + enemynear, const(size.mid.pos.y)) - pos y) + (random / 25.0) - 20)

[State HitDefb]
type = HitDef
trigger1 = hitcount < 3 && !moveguarded && !movereversed
attr = S, HP
damage = ceil(12 * root, fvar(10)), 6
animtype = Up
priority = 6, Hit
hitflag = MAFDP
guardflag = MA
pausetime = 0, 5
sparkxy = var(55), var(56)
sparkno = 2
guard.sparkno = 40; S9300
hitsound = S6, 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 20
ground.hittime = 27
ground.velocity = -1, -12
getpower = 0, 0
air.velocity = -1, -12
air.type = high
air.fall = 1
fall = 1
down.velocity = 0, -2
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
sprpriority = 3
forcestand = 1

[State 5]
type = velmul
trigger1 = 1
x = 0.8
y = 0.8

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -6, -12

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -6, 6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(51)), (var(51))/6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(52)), (var(51))/6

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 6
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.50, .50, .50
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 35


;==============================================================================================
[Statedef 4807]
type = S
movetype = A
physics = N
ctrl = 0
anim = 2920
velset = 4, -0.75
sprpriority = -3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 55
range = -20, 20

[State Randomizer]
type = VarSet
trigger1 = numenemy
var(56) = ceil(((enemynear, pos y + enemynear, const(size.mid.pos.y)) - pos y) + (random / 25.0) - 20)

[State HitDefb]
type = HitDef
trigger1 = hitcount < 3 && !moveguarded && !movereversed
attr = S, HP
damage = ceil(12 * root, fvar(10)), 6
animtype = Up
priority = 6, Hit
hitflag = MAFDP
guardflag = MA
pausetime = 0, 5
sparkxy = var(55), var(56)
sparkno = 2
guard.sparkno = 40; S9300
hitsound = S6, 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 20
ground.hittime = 27
ground.velocity = -1, -12
getpower = 0, 0
air.velocity = -1, -12
air.type = high
air.fall = 1
fall = 1
down.velocity = 0, -2
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
sprpriority = -3
forcestand = 1

[State 5]
type = velmul
trigger1 = 1
x = 0.8
y = 0.8

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -6, -12

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -6, 6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(51)), (var(51))/6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(52)), (var(51))/6

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 6
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.50, .50, .50
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 35


;==============================================================================================
[Statedef 4808]
type = S
movetype = A
physics = N
ctrl = 0
anim = 2920
velset = -3, 0.75
sprpriority = 3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Ikuze]
type = PlaySnd
trigger1 = time = 0
value = 8, 9
volume = -50

[State Randomizer]
type = varrandom
trigger1 = 1
v = 55
range = -20, 20

[State Randomizer]
type = VarSet
trigger1 = numenemy
var(56) = ceil(((enemynear, pos y + enemynear, const(size.mid.pos.y)) - pos y) + (random / 25.0) - 20)

[State HitDefb]
type = HitDef
trigger1 = hitcount < 3 && !moveguarded && !movereversed
attr = S, HP
damage = ceil(12 * root, fvar(10)), 6
animtype = Up
priority = 6, Hit
hitflag = MAFDP
guardflag = MA
pausetime = 0, 5
sparkxy = var(55), var(56)
sparkno = 2
guard.sparkno = 40; S9300
hitsound = S6, 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 20
ground.hittime = 27
ground.velocity = -1, -12
getpower = 0, 0
air.velocity = -1, -12
air.type = high
air.fall = 1
fall = 1
down.velocity = 0, -2
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
sprpriority = 3
forcestand = 1

[State 5]
type = velmul
trigger1 = 1
x = 0.8
y = 0.8

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -6, -12

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -6, 6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(51)), (var(51))/6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(52)), (var(51))/6

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 6
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.50, .50, .50
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 35


;==============================================================================================
[Statedef 4809]
type = S
movetype = A
physics = N
ctrl = 0
anim = 2920
velset = -3, -0.75
sprpriority = -3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 55
range = -20, 20

[State Randomizer]
type = VarSet
trigger1 = numenemy
var(56) = ceil(((enemynear, pos y + enemynear, const(size.mid.pos.y)) - pos y) + (random / 25.0) - 20)

[State HitDefb]
type = HitDef
trigger1 = hitcount < 3 && !moveguarded && !movereversed
attr = S, HP
damage = ceil(12 * root, fvar(10)), 6
animtype = Up
priority = 6, Hit
hitflag = MAFDP
guardflag = MA
pausetime = 0, 5
sparkxy = var(55), var(56)
sparkno = 2
guard.sparkno = 40; S9300
hitsound = S6, 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 20
ground.hittime = 27
ground.velocity = -1, -12
getpower = 0, 0
air.velocity = -1, -12
air.type = high
air.fall = 1
fall = 1
down.velocity = 0, -2
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
sprpriority = -3
forcestand = 1

[State 5]
type = velmul
trigger1 = 1
x = 0.8
y = 0.8

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -6, -12

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -6, 6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(51)), (var(51))/6

[State FireB]
type = Explod
trigger1 = time = [0, 12]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = 0, 0
random = 35, 5
sprpriority = -4
ownpal = 1
vel = var(52), (var(51))
scale = 0.2, 1
accel = -1/3*(var(52)), (var(51))/6

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 6
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.50, .50, .50
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 35


;==============================================================================================
[Statedef 4810]
type = S
movetype = A
physics = N
ctrl = 0
anim = 2921
velset = 0, 0
sprpriority = -1

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Ikuze]
type = PlaySnd
trigger1 = time = 0
value = 8, 5
volume = 255
freqmul = 0.6

[State Ikuze]
type = PlaySnd
trigger1 = time = 0
value = 8, 5
volume = 255
freqmul = 0.6

[State Ikuze]
type = PlaySnd
trigger1 = time = 17
value = 8, 10
volume = 255

[State Ikuze]
type = PlaySnd
trigger1 = time = 17
value = 8, 10
volume = 255

[State Ikuze]
type = PlaySnd
trigger1 = time = 17
value = 8, 10
volume = 255

[State Spr]
type = sprpriority
trigger1 = 1
value = ifelse(animelemtime(8) >= 0, 3, -1)

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -20, 20

[State Randomizer]
type = VarSet
trigger1 = numenemy
var(53) = ceil(((enemynear, pos y + enemynear, const(size.mid.pos.y)) - pos y) + (random / 25.0) - 20)

[State HitDefb]
type = HitDef
trigger1 = animelem = 8
attr = S, HP
damage = ceil(18 * root, fvar(10)), 3
animtype = Up
priority = 6, Hit
hitflag = MAFDP
guardflag = MA
pausetime = 0, 5
sparkxy = var(52), var(53)
sparkno = 2
guard.sparkno = 40; S9300
hitsound = S6, 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 20
ground.hittime = 27
ground.velocity = (p2dist x / 7.0), -8
getpower = 0, 0
air.velocity = (p2dist x / 7.0), -8
air.type = high
air.fall = 1
fall = 1
down.velocity = 0, -2
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
sprpriority = 3
ground.cornerpush.veloff = 0
forcestand = 1

[State HitDefb]
type = HitDef
trigger1 = animelemtime(12) >= 0
trigger1 = timemod = 2, 1
attr = S, HP
damage = ceil(18 * root, fvar(10)), 3
animtype = Up
priority = 6, Hit
hitflag = MAFDP
guardflag = MA
pausetime = 0, 0
sparkxy = var(52), var(53)
sparkno = 2
guard.sparkno = 40; S9300
hitsound = S6, 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 20
ground.hittime = 27
ground.velocity = -2, -12
getpower = 0, 0
air.velocity = -2, -12
air.type = high
air.fall = 1
fall = 1
down.velocity = 0, -2
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
sprpriority = 3
ground.cornerpush.veloff = 0
forcestand = 1

[State 5]
type = velmul
trigger1 = 1
x = 0.8
y = 0.8

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -10, -14

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 36
range = 4, 10

[State FireB]
type = Explod
trigger1 = time < 15
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 50, -10
random = 55, 10
sprpriority = 5
ownpal = 1
vel = var(36), (var(35))
scale = 0.1, 0.75
accel = -(var(36))/3, -(var(35))/5
supermovetime = 9999
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time = [15, 25]
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 50, -10
random = 55, 10
sprpriority = 5
ownpal = 1
vel = var(36), (var(35))
scale = 0.1, 0.75
accel = 0, 0
supermovetime = 9999
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time = [25, 45]
persistent = 1
anim = ifelse(random>500, 12212, 12215)
id = 12213
postype = p1
pos = 30, -15
random = 35, 10
sprpriority = 5
ownpal = 1
vel = 0, (var(35))
scale = 1, 1
accel = 0, (var(35))/10
supermovetime = 9999
pausemovetime = 9999

[State Randomizer4]
type = varrandom
trigger1 = 1
v = 37
range = -10, -14

[State Randomizer5]
type = varrandom
trigger1 = 1
v = 38
range = -4, -10

[State FireB]
type = Explod
trigger1 = time < 15
persistent = 1
anim = ifelse(random>500, 12213, 12216)
id = 12213
postype = p1
pos = -50, -10
random = 55, 10
sprpriority = 5
ownpal = 1
vel = var(38), (var(37))
scale = 0.1, 0.75
accel = -(var(38))/4, -(var(37))/5
supermovetime = 9999
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time = [15, 25]
persistent = 1
anim = ifelse(random>500, 12213, 12216)
id = 12213
postype = p1
pos = -50, -10
random = 55, 10
sprpriority = 5
ownpal = 1
vel = var(38), (var(37))
scale = 0.1, 0.75
accel = 0, 0
supermovetime = 9999
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time = [25, 45]
persistent = 1
anim = ifelse(random>500, 12212, 12215)
id = 12213
postype = p1
pos = -30, -10
random = 35, 15
sprpriority = 5
ownpal = 1
vel = 0, (var(37))
scale = 1, 1
accel = 0, (var(37))/10
supermovetime = 9999
pausemovetime = 9999

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 6
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.50, .50, .50
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 70


;==============================================================================================
[Statedef 4811]
type = S
movetype= I
physics = N
ctrl = 0
anim = 12203
velset = 0, 0
sprpriority = 3

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Sound]
type = playsnd
trigger1 = time = 0
value = 2, 7
freqmul = 0.85

[State bind]
type = Bindtoparent
trigger1 = 1
value = 1
pos = 0, 0

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = -50, -50, 0
sinadd = -40, -40, -40, 5

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 10
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.60, .60, .60
Timegap = 1
FrameGap = 1
Trans = add

[State NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 16


;==============================================================================================
[Statedef 3800]
type = S
movetype = A
juggle = 0
poweradd = (Var(10)=0) * -1000
anim = 3820
velset = 0, 0
ctrl = 0
sprpriority = 2
facep2 = 1

[State Randomizer]
type = varrandom
trigger1 = time = 0
v = 46
range = 0, 100

[State NHB]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 24

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 70
length = 21
PalBright = 0, 0, 0
PalContrast = 148, 148, 148
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State Shadows]
type = Afterimage
triggerall = time = 0
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
time = 160
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State red fadeout]
type = BGPalFx
triggerall = var(28) = 0
trigger1 = animelem = 1
add = 100, 100, 100
mul = 200, 200, 300
sinadd = 100, 100, 100, 350
time = 57
ignorehitpause = 1
invertall = 1

[State red fadein]
type = BGPalFx
triggerall = var(28) = 1
trigger1 = animelem = 1
add = 100, 100, 150
sinadd = 305, -255, -355, 180
time = 32
invertall = 1
ignorehitpause = 1

[State white fadein]
type = BGPalFx
triggerall = var(28) > 1
trigger1 = animelem = 1
add = 255, -155, -155
sinadd = -255, -255, -255, 180
time = 32
ignorehitpause = 1
invertall = 1

[State Freeze]
type = superpause
trigger1 = animelem = 1
anim = S ifelse(var(28) > 0, 10061, 10060)
time = ifelse(var(28) > 0, 32, 57)
pos = -32, -16
movetime = 17
p2defmul = 1
darken = 0
sound = S ifelse(var(28) > 0, 0, 7), ifelse(var(28) > 0, 12, 3)

[State Wind effect] 
type = Explod
triggerall = var(28) = 0
trigger1 = animelem = 1
anim = 9402
scale = 0.7, 0.7
pos = 30, 0
sprpriority = 0
postype = p1
supermovetime = -1
bindtime = 18
ownpal = 1
pausemovetime = 9999

[State 0]
type = Varadd
trigger1 = animelem = 3
v = 28
value = 1

[State Shadows]
type = Afterimage
triggerall = animelem = 3
trigger1 = var(46) >= 90 || var(28) >= 3
time = 100
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State JinRaiKyayu]
type = PlaySnd
trigger1 = animelem = 3
value = 1, 5
channel = 0

[State 5]
type = ChangeState
triggerall = animtime = 0
trigger1 = var(28) < 3
trigger1 = var(46) < 90
value = 3860

[State 5]
type = ChangeState
triggerall = animtime = 0
trigger1 = var(28) >= 3
trigger2 = var(46) >= 90
value = 3840


;==============================================================================================
[Statedef 3860]
type = A
movetype = A
physics = N
anim = 3841
sprpriority = 2
velset = 0, -1
ctrl = 0

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -5, -6

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 36
range = 4, 10

[State FireB]
type = Explod
trigger1 = random <= 800
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 50, -10
random = 95, 10
sprpriority = 5
ownpal = 1
vel = var(36), (var(35))
scale = 0.1, 0.75
accel = -(var(36))/3, (var(35))/10

[State Randomizer4]
type = varrandom
trigger1 = 1
v = 37
range = -5, -6

[State Randomizer5]
type = varrandom
trigger1 = 1
v = 38
range = -4, -10

[State FireB]
type = Explod
trigger1 = random <= 800
persistent = 1
anim = ifelse(random>500, 12213, 12216)
id = 12213
postype = p1
pos = -50, -10
random = 95, 10
sprpriority = 5
ownpal = 1
vel = var(38), (var(37))
scale = 0.1, 0.75
accel = -(var(38))/4, (var(37))/10

[State Sucker]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "sucker"
id = 4
pos = -10, 0
postype = p2
stateno =3864
ownpal = 1
size.xscale= 1
size.yscale= 1
size.ground.back= 0
size.ground.front= 0
size.height= 240

[State JinRaiKyayu]
type = PlaySnd
trigger1 = time = 0
value = 6, 11
channel = 0

[State 5]
type = ChangeAnim
trigger1 = animtime = 0
value = 3841
elem = 4

[State 1]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2]
type = Velset
trigger1 = 1
x = 0

[State 2]
type = Velmul
trigger1 = 1
y = 0.95

[State Sound]
type = playsnd
trigger1 = animelem = 5
trigger1 = time < 62
value = 0, 4

[State Sound]
type = playsnd
trigger1 = animelem = 7
trigger1 = time < 62
value = 3, 2

[State Sound]
type = playsnd
trigger1 = (gametime%12) = 1
trigger1 = time < 67
value = 0, 14
freqmul = 1.2

[State Flames] 
type = Explod
triggerall = time < 62
trigger1 = animelem = 5
anim = 3852
pos = 0, floor(-pos y)
sprpriority = -2
postype = p1
supermovetime = -1
ownpal = 1
scale = 1, 0.5 + (.01*time)

[State Flames] 
type = Explod
triggerall = time < 62
trigger1 = animelem = 5
anim = 3851
pos = floor(-10 + (time/2)), floor(-pos y)
sprpriority = -2
postype = p1
supermovetime = -1
ownpal = 1
scale = 1, 0.3 + (.01*time)

[State Flames] 
type = Explod
triggerall = time < 62
trigger1 = animelem = 7
anim = 3850
pos = floor(10 - (time/2)), floor(-pos y)
sprpriority = 4
postype = p1
supermovetime = -1
ownpal = 1
scale = 1, 0.3 + (.01*time)

[State hadouken hit helper]
type = Helper
triggerall = time < 62
trigger1 = animelem = 7
helpertype = normal
name = "leg fire"
pos = 24, -59
postype = p1
stateno =1063
ownpal = 1

[State hadouken hit helper]
type = Helper
triggerall = time < 62
trigger1 = animelem = 5
helpertype = normal
name = "leg fire"
pos = -24, -59
postype = p1
stateno =1064
ownpal = 1

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Var(26)reset]
type = Varset
trigger1 = time = 0
v = 26
value = 0

[State Var(26)reset]
type = Varadd
trigger1 = time = 10
v = 26
value = 1

[State Var(26)reset]
type = Varadd
trigger1 = time = 20
v = 26
value = 2

[State Var(26)reset]
type = Varadd
trigger1 = time = 30
v = 26
value = 3

[State Var(26)reset]
type = Varadd
trigger1 = time = 40
v = 26
value = 4

[State Var(26)reset]
type = Varadd
trigger1 = time = 50
v = 26
value = 5

[State 9]
type = HitDef
trigger1 = animelem = 4 && time < 56
attr = A, HA
damage = 20, 3
animtype = Hard
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
p2facing = -1
pausetime = 4 - (var(26))/10, 2 - (var(26))/10
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 15+((p2bodydist x)/20), 0
air.velocity = 10+((p2bodydist x)/20), -1-((p2dist y)*0.04)
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
p1sprpriority = 1
p2sprpriority = 2
forcestand = 1

[State 9]
type = HitDef
trigger1 = animelem = 6 && time < 56
attr = A, HA
damage = 20, 3
animtype = Hard
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
p2facing = 1
pausetime = 4 - (var(26))/10, 2 - (var(26))/10
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -15-((p2bodydist x)/20), 0
air.velocity = -10+((p2bodydist x)/20), -1-((p2dist y)*0.04)
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
p1sprpriority = 1
p2sprpriority = -1
forcestand = 1

[State 9]
type = HitDef
trigger1 = animelem = 4 && time >= 56
attr = A, HA
damage = 20, 3
animtype = Hard
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
p2facing = -1
pausetime = 4 - (var(26))/10, 2 - (var(26))/10
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 20, -1
air.velocity = 16, -1
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
p1sprpriority = 1
p2sprpriority = 2
forcestand = 1

[State 9]
type = HitDef
trigger1 = animelem = 6 && time >= 56
attr = A, HA
damage = 20, 3
animtype = Hard
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
p2facing = 1
pausetime = 4 - (var(26))/10, 2 - (var(26))/10
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -20, -1
air.velocity = -16, -1
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
p1sprpriority = 1
p2sprpriority = -1
forcestand = 1

[State 9]
type = EnvShake
trigger1 = timemod = 3, 2
trigger1 = movehit
ignorehitpause = 1
time = 4
ampl = -2
freq = 100
phase = 1

[State FireB]
type = Explod
triggerall = time >= 45
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -15, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = time >= 45
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 0]
type = Varset
trigger1 = time = 62
v = 28
value = 0

[State 9]
type = ChangeState
trigger1 = time = 62
value = 3861


;==============================================================================================
[Statedef 3841]
type = A
movetype = A
physics = N
anim = 12011
sprpriority = 5
velset = 0, 0
ctrl = 0

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -5, -6

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 36
range = 4, 10

[State FireB]
type = Explod
trigger1 = random <= 800
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 50, -10
random = 95, 10
sprpriority = 5
ownpal = 1
vel = var(36), (var(35))
scale = 0.1, 0.75
accel = -(var(36))/3, (var(35))/10

[State Randomizer4]
type = varrandom
trigger1 = 1
v = 37
range = -5, -6

[State Randomizer5]
type = varrandom
trigger1 = 1
v = 38
range = -4, -10

[State FireB]
type = Explod
trigger1 = random <= 800
persistent = 1
anim = ifelse(random>500, 12213, 12216)
id = 12213
postype = p1
pos = -50, -10
random = 95, 10
sprpriority = 5
ownpal = 1
vel = var(38), (var(37))
scale = 0.1, 0.75
accel = -(var(38))/4, (var(37))/10

[State Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 192 + ceil(64 * cos(time / 8.0 * pi)), 256

[State 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 9]
type = posset
trigger1 = root, stateno = 3840
trigger1 = root, movetype != H
x = ceil(root, pos x)
y = 0

[State 9]
type = Changeanim
trigger1 = root, stateno = 3840
trigger1 = root, time = 98
value = 12013

[State 9]
type = destroyself
trigger1 = root, stateno != 3840
trigger1 = animtime = 0


;==============================================================================================
[Statedef 3840]
type = A
movetype = A
physics = N
anim = 3841
sprpriority = 1
velset = 0, -1
ctrl = 0

[State Sucker]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "sucker"
id = 4
pos = -10, 0
postype = p2
stateno =3865
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State JinRaiKyayu]
type = PlaySnd
trigger1 = time = 0
value = 6, 11
channel = 0

[State 5]
type = ChangeAnim
trigger1 = animtime = 0
value = 3841
elem = 4

[State 1]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2]
type = Velset
trigger1 = 1
x = 0

[State 2]
type = Velmul
trigger1 = 1
y = 0.95

[State Sound]
type = playsnd
trigger1 = animelem = 5
trigger1 = time < 98
value = 0, 4

[State Sound]
type = playsnd
trigger1 = animelem = 7
trigger1 = time < 98
value = 3, 2

[State Sound]
type = playsnd
trigger1 = (gametime%12) = 1
trigger1 = time < 98
value = 0, 14
freqmul = 1.2

[State Dragon]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "Hurricane"
pos = 0, floor(-pos y)
postype = p1
stateno =3841
ownpal = 1
pausemovetime = 9999
size.xscale = 1.1
size.yscale = 1.2

[State Flames] 
type = removeExplod
trigger1 = time = 98

[State Flames] 
type = Explod
triggerall = time < 98
trigger1 = animelem = 5
anim = 3852
pos = 0, floor(-pos y)
sprpriority = -2
postype = p1
supermovetime = -1
ownpal = 1
scale = 1, 0.5 + (.01*time)

[State Flames] 
type = Explod
triggerall = time < 98
trigger1 = animelem = 5
anim = 3851
pos = -10+(time/2), floor(-pos y)
sprpriority = -2
postype = p1
supermovetime = -1
ownpal = 1
scale = 1, 0.3 + (.01*time)

[State Flames] 
type = Explod
triggerall = time < 98
trigger1 = animelem = 7
anim = 3850
pos = 10-(time/2), floor(-pos y)
sprpriority = 4
postype = p1
supermovetime = -1
ownpal = 1
scale = 1, 0.3 + (.01*time)

[State Flames] 
type = Explod
triggerall = time < 98
trigger1 = animelem = 7
anim = 13010
pos = 40, -59
sprpriority = -2
postype = p1
supermovetime = -1
ownpal = 1

[State Flames] 
type = Explod
triggerall = time < 98
trigger1 = animelem = 5
anim = 13012
pos = -30, -59
sprpriority = 4
postype = p1
supermovetime = -1
ownpal = 1

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Var(26)reset]
type = Varset
trigger1 = time = 0
v = 26
value = 0

[State Var(26)reset]
type = Varadd
trigger1 = time = 10
v = 26
value = 1

[State Var(26)reset]
type = Varadd
trigger1 = time = 20
v = 26
value = 2

[State Var(26)reset]
type = Varadd
trigger1 = time = 30
v = 26
value = 3

[State Var(26)reset]
type = Varadd
trigger1 = time = 40
v = 26
value = 4

[State Var(26)reset]
type = Varadd
trigger1 = time = 50
v = 26
value = 5

[State 9]
type = HitDef
trigger1 = animelem = 4 && time < 86
attr = A, HA
damage = 19, 3
animtype = Hard
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
p2facing = -1
pausetime = 4 - (var(26))/10, 2 - (var(26))/10
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 15+((p2bodydist x)/20), 0
air.velocity = 10+((p2bodydist x)/20), -1-((p2dist y)*0.04)
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
p1sprpriority = 1
p2sprpriority = 2
forcestand = 1

[State 9]
type = HitDef
trigger1 = animelem = 6 && time < 86
attr = A, HA
damage = 19, 3
animtype = Hard
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
p2facing = 1
pausetime = 4 - (var(26))/10, 2 - (var(26))/10
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -15-((p2bodydist x)/20), 0
air.velocity = -10+((p2bodydist x)/20), -1-((p2dist y)*0.04)
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
p1sprpriority = 1
p2sprpriority = -1
forcestand = 1

[State 9]
type = HitDef
trigger1 = animelem = 4 && time >= 86
attr = A, HA
damage = 19, 3
animtype = Up
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
p2facing = -1
pausetime = 4 - (var(26))/10, 2 - (var(26))/10
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 4, -20
air.velocity = 4, -20
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
p1sprpriority = 1
p2sprpriority = 2
forcestand = 1

[State 9]
type = HitDef
trigger1 = animelem = 6 && time >= 86
attr = A, HA
damage = 19, 3
animtype = Up
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
p2facing = 1
pausetime = 4 - (var(26))/10, 2 - (var(26))/10
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4 -20
air.velocity = -4 -20
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
p1sprpriority = 1
p2sprpriority = -1
forcestand = 1

[State 9]
type = EnvShake
trigger1 = timemod = 3, 2
trigger1 = movehit
ignorehitpause = 1
time = 4
ampl = -2
freq = 100
phase = 1

[State FireB]
type = Explod
triggerall = time >= 45
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -15, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = time >= 45
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 0]
type = Varset
trigger1 = time = 98
v = 28
value = 0

[State 9]
type = ChangeState
trigger1 = time = 98
value = 3861


;==============================================================================================
[Statedef 3864]
type = S
physics = N
movetype = I
anim = 1014
ctrl = 0

[State NHB]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[State HitOverride]
type = hitoverride
trigger1 = 1
attr = SCA, AA, AP, AT
stateno = 3864
time = -1
ignorehitpause = 1

[State Bound]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0, 0

[State Turn]
type = turn
trigger1 = rootdist x < 0

[State Push]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State Pos]
type = posset
trigger1 = 1
y = 0

[State Vel]
type = VelSet
trigger1 = 1
x = ifelse(Time <= 10, 1, ifelse(Time <= 13, 2, 3))

[State Pos]
type = posset
trigger1 = numenemy
x = ceil(enemynear(0), pos x - facing * enemynear(0), const(size.ground.back))

[State Dust]
type = MakeDust
trigger1 = numenemy
trigger1 = abs(p2bodydist x)<8 && (enemynear, statetype != A)
pos = 0, 0
spacing = 5

[State End]
type = destroyself
trigger1 = root, movetype = H
trigger2 = root, movecontact
trigger3 = root, stateno != 3860


;==============================================================================================
[Statedef 3865]
type = S
movetype= I
physics = N
ctrl = 0
anim = 1014
sprpriority = 5
velset = 0, 0

[State NHB]
type = Playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State NHB]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State VelSet 1]
type = VelSet
trigger1 = time = [0, 10]
x = 1

[State VelSet 2]
type = VelSet
trigger1 = time = [11, 20]
x = 2

[State VelSet 2]
type = VelSet
trigger1 = time = [20, 30]
x = 3

[State VelSet 2]
type = VelSet
trigger1 = time = [30, 40]
x = 4

[State VelSet 2]
type = VelSet
trigger1 = time = [40, 50]
x = 5

[State VelSet 2]
type = VelSet
trigger1 = time = [50, 60]
x = 6

[State VelSet 2]
type = VelSet
trigger1 = time = [70, 80]
x = 7

[State VelSet 2]
type = VelSet
trigger1 = Time >= 80
x = 8

[State Dissipate]
type = destroyself
trigger1 = time >= 90
trigger2 = root, stateno != 3840
trigger3 = root, stateno = 3840
trigger3 = root, movecontact


;==============================================================================================
[Statedef 3866]
type = S
movetype= I
physics = N
ctrl = 0
anim = 1014
sprpriority = 5
velset = 0, 0

[State NHB]
type = Playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State NHB]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State VelSet 1]
type = VelSet
trigger1 = time = [0, 10]
x = 1

[State VelSet 2]
type = VelSet
trigger1 = time = [11, 13]
x = 2

[State VelSet 2]
type = VelSet
trigger1 = Time >= 14
x = 3

[State Dissipate]
type = destroyself
trigger1 = time >= 60
trigger2 = root, stateno != 3911
trigger3 = root, stateno = 3911
trigger3 = root, movecontact


;==============================================================================================
[Statedef 3845]
type = S
movetype = A
juggle = 3
physics = S
poweradd = -3000
anim = 1202
velset = 0, 0
ctrl = 0
sprpriority = 3
facep2 = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -2, -3

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 36
range = 4, 10

[State FireB]
type = Explod
trigger1 = random <= 800 && movecontact
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 70+3*var(3), -10
random = 35, 10
sprpriority = 5
ownpal = 1
vel = var(36), (var(35))
scale = 0.1, 0.75
accel = -(var(36))/3, (var(35))/10

[State Randomizer4]
type = varrandom
trigger1 = 1
v = 37
range = -2, -3

[State Randomizer5]
type = varrandom
trigger1 = 1
v = 38
range = -4, -10

[State FireB]
type = Explod
trigger1 = random <= 800 && movecontact
persistent = 1
anim = ifelse(random>500, 12213, 12216)
id = 12213
postype = p1
pos = -30-3*var(3), -10
random = 35, 10
sprpriority = 5
ownpal = 1
vel = var(38), (var(37))
scale = 0.1, 0.75
accel = -(var(38))/4, (var(37))/10

[State hadouken hit helper1]
type = Playsnd
triggerall = time = [11, 46]
triggerall = movehit
trigger1 = command = "x"
trigger2 = AILevel && time = 25
value = 0, 17
volume = 255
persistent = 0

[State hadouken hit helper2]
type = Playsnd
triggerall = time = [11, 46]
triggerall = movehit
trigger1 = command = "y"
trigger2 = AILevel && time = 43
value = 0, 17
volume = 255
persistent = 0

[State hadouken hit helper3]
type = Playsnd
triggerall = time = [11, 46]
triggerall = movehit
trigger1 = command = "holdfwd"
trigger2 = AILevel && time = 52
value = 0, 17
volume = 255
persistent = 0

[State hadouken hit helper4]
type = Playsnd
triggerall = time = [11, 46]
triggerall = movehit
trigger1 = command = "a"
trigger2 = AILevel && time = 56
value = 0, 17
volume = 255
persistent = 0

[State hadouken hit helper5]
type = Playsnd
triggerall = time = [11, 46]
triggerall = movehit
trigger1 = command = "b"
trigger2 = AILevel && time = 59
value = 0, 17
volume = 255
persistent = 0

[State 9]
type = EnvShake
triggerall = time = [11, 46]
triggerall = movehit
trigger1 = command = "x"
trigger2 = AILevel && time = 25
persistent = 0
ignorehitpause = 1
time = 4
ampl = -6
freq = 100
phase = 1

[State 9]
type = EnvShake
triggerall = time = [11, 46]
triggerall = movehit
trigger1 = command = "y"
trigger2 = AILevel && time = 43
persistent = 0
ignorehitpause = 1
time = 4
ampl = 6
freq = 100
phase = 1

[State 9]
type = EnvShake
triggerall = time = [11, 46]
triggerall = movehit
trigger1 = command = "holdfwd"
trigger2 = AILevel && time = 52
persistent = 0
ignorehitpause = 1
time = 4
ampl = -6
freq = 100
phase = 1

[State 9]
type = EnvShake
triggerall = time = [11, 46]
triggerall = movehit
trigger1 = command = "a"
trigger2 = AILevel && time = 56
persistent = 0
ignorehitpause = 1
time = 4
ampl = 6
freq = 100
phase = 1

[State 9]
type = EnvShake
triggerall = time = [11, 46]
triggerall = movehit
trigger1 = command = "b"
trigger2 = AILevel && time = 59
persistent = 0
ignorehitpause = 1
time = 4
ampl = -6
freq = 100
phase = 1

[State 3]
type = BGPalfx
triggerall = time = [11, 46]
triggerall = movehit
trigger1 = command = "x"
trigger2 = AILevel && time = 25
supermovetime = -1
time = 4
add = 0, 0, 0
persistent = 0

[State 3]
type = BGPalfx
triggerall = time = [11, 46]
triggerall = movehit
trigger1 = command = "y"
trigger2 = AILevel && time = 43
supermovetime = -1
time = 4
add = 50, 0, 0
persistent = 0

[State 3]
type = BGPalfx
triggerall = time = [11, 46]
triggerall = movehit
trigger1 = command = "holdfwd"
trigger2 = AILevel && time = 52
supermovetime = -1
time = 4
add = 100, 0, 0
persistent = 0

[State 3]
type = BGPalfx
triggerall = time = [11, 46]
triggerall = movehit
trigger1 = command = "a"
trigger2 = AILevel && time = 56
supermovetime = -1
time = 4
add = 150, 155, 155
persistent = 0

[State 3]
type = BGPalfx
triggerall = time = [11, 46]
triggerall = movehit
trigger1 = command = "b"
trigger2 = AILevel && time = 59
supermovetime = -1
time = 4
add = 200, 0, 0
persistent = 0

[State Slow Motion]
type = Pause 
trigger1 = roundstate = 2 && time <= 60
trigger1 = movecontact && numtarget(3845)
trigger1 = target(3845), statetype=A
time = 1
movetime = 1
ignorehitpause = 1

[State SuperLight] 
type = Explod
trigger1 = anim = 1202
trigger1 = animelemtime(5) = 2
anim = 1031
pos = -15, 0
postype = p1
sprpriority = 4
supermovetime = -1
ownpal = 1
removeongethit = 1
scale = 1, 0.7

[State SuperLight] 
type = Explod
trigger1 = anim = 1202
trigger1 = animelemtime(5) = [0, 6]
trigger1 = gametime%2 = 1
anim = 1032
pos = 86, -65
postype = p1
sprpriority = 4
supermovetime = -1
ownpal = 1
removeongethit = 1
scale = 0.4, 0.3
vel = -3, 0

[State hadouken hit helper]
type = Helper
trigger1 = anim = 1202
trigger1 = animelemtime(5) = 0
helpertype = normal
name = "leg fire"
pos = 86, -75
postype = p1
stateno =1068
ownpal = 1

[State FireB]
type = Explod
trigger1 = anim = 1202 && roundstate < 3
triggerall = numexplod(2500) < 1
trigger1 = movehit
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = anim = 1202 && roundstate < 3
trigger1 = numexplod(2500) < 1
trigger1 = movehit
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Randomizer]
type = Varset
trigger1 = time = 0
v = 46
value = 0

[State Randomizer]
type = Varset
triggerall = time < 60
triggerall = movehit
trigger1 = command = "hBust1"
trigger2 = AILevel && time = 59
trigger2 = random < (1000 * (AIlevel ** 2 / 64.0))
v = 46
value = 99

[State hadouken hit helper5]
type = Playsnd
triggerall = time < 60
triggerall = movehit
trigger1 = command = "hBust1"
trigger2 = AILevel && time = 59
trigger2 = random < (1000 * (AIlevel ** 2 / 64.0))
value = 0, 12
freqmul = 1.2
volume = 255
persistent = 0

[State 3]
type = BGPalfx
triggerall = time < 60
triggerall = movehit
trigger1 = command = "hBust1"
trigger2 = AILevel && time = 59
trigger2 = random < (1000 * (AIlevel ** 2 / 64.0))
supermovetime = -1
time = 20
add = 0, 0, 0
sinadd = 500, 500, 500, 44
persistent = 0

[State SuperLight] 
type = Explod
triggerall = time < 60
triggerall = movehit
trigger1 = command = "hBust1"
trigger2 = AILevel && time = 59
trigger2 = random < (1000 * (AIlevel ** 2 / 64.0))
anim = 1300
pos = 160, floor((1.3333333 * gameheight / gamewidth) * 120)
sprpriority = -4
postype = left
supermovetime = -1
bindtime = -1
ownpal = 1
pausemovetime = -1
scale = 1, (1.3333333 * gameheight / gamewidth)

[State NHB]
type = NotHitBy
trigger1 = animelemtime(1) <= 0
trigger2 = Prevstateno != [3960, 3991]
trigger2 = animelemtime(6) < 4
value = SCA
time = 1

[State NHB]
type = NotHitBy
trigger1 = var(46) >= 90
value = SCA
time = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 180
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State width]
type = width
trigger1 = animelemtime(3) >= 0
value = 30

[State red fadeout]
type = BGPalFx
trigger1 = animelem = 1
add = 100, 100, 100
mul = 200, 200, 300
sinadd = 100, 100, 100, 350
time = 57
ignorehitpause = 1
invertall = 1

[State Freeze]
type = superpause
trigger1 = animelem = 1
anim = S10060
time = 57
pos = 0, -64
movetime = 6
p2defmul = 1
darken = 0
sound = S1, 7

[State Wind effect] 
type = Explod
trigger1 = animelem = 1
anim = 9402
scale = 0.7, 0.7
pos = 30, 0
sprpriority = 0
postype = p1
supermovetime = -1
bindtime = 18
ownpal = 1
pausemovetime = 9999

[State A-ism]
type = PlaySnd
trigger1 = animelem = 5
value = 0, 4
volume = 255

[State A-ism]
type = PlaySnd
trigger1 = animelem = 5
value = 2, 3
volume = 255
channel = 0

[State A-ism]
type = PlaySnd
trigger1 = animelem = 5
value = 0, 4
volume = 255
freqmul = 0.8

[State A-ism]
type = PlaySnd
trigger1 = animelem = 5
value = 0, 7
volume = 255

[State 0]
type = Varadd
trigger1 = animelem = 3
v = 28
value = 1

[State 0]
type = Velset
trigger1 = animelem = 5
x = 10

[State Shadows]
type = Afterimage
trigger1 = animelem = 3
time = 100
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State 1]
type = envcolor
trigger1 = movehit
value = 255, 255, 255
under = 1
ignorehitpause = 1
persistent = 0
time = 3

[State 9]
type = HitDef
trigger1 = animelem = 6
ID = 3845
attr = S, HA
damage = 180, 25
animtype = Hard
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
pausetime = 15, 13
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S7, 2
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -3, -1.6
air.velocity = -3, (-1.7-(((p2dist y))*0.02))
yaccel = 0.05
fall = 1
kill = 0
guard.kill = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.color = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 4
envshake.time = 18
envshake.ampl = 6
envshake.freq = 120
forcestand = 1
fall.damage = 10

[State 4]
type = Width
trigger1 = Movehit && Time <= 60
edge = 96, 0
ignorehitpause = 1

[State P2 State]
type=targetstate
trigger1 = (movehit = [1, 8]) && numtarget
trigger1 = target, stateno = [5000, 5050]
ID = 3845
value = 3853
ignorehitpause = 1

[State SuperLight] 
type = Explod
trigger1 = movecontact
ignorehitpause = 1
anim = 9402
persistent = 0
pos = 20, 0
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
ownpal = 1
pausemovetime = 9999
ID = 9402

[State TimeCountVar]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State TimeCount]
type = VarAdd
trigger1 = movecontact
v = 3
value = 1

[State 0]
type = ModifyExplod
trigger1 = 1
ID = 9402
scale = 1 + (0.025*var(3)), 1

[State 5]
type = ChangeAnim
triggerall = time = 60 && movehit
trigger1 = var(46) >= 90
persistent = 0
value = 1203

[State 5]
type = ChangeAnim
trigger1 = time = 60 && movehit = 0
persistent = 0
value = 1202
elem = 35

[State 0]
type = Varset
triggerall = animtime = 0
trigger1 = var(28) < 3
trigger1 = var(46) < 90
v = 28
value = 0

[State 5]
type = ChangeState
trigger1 = animtime = 0
trigger1 = var(46) < 90
trigger2 = animtime = 0 && movehit = 0
trigger2 = var(46) >= 90
value = 0
ctrl = 1

[State Screen]
type = ScreenBound
trigger1 = movehit
trigger1 = var(46) >= 90
value = 0
movecamera = 0, 1

[State 5]
type = ChangeState
triggerall = animtime = 0 && movehit
trigger1 = var(46) >= 90
value = 3846


;==============================================================================================
[Statedef 3853]
type = A
movetype= H
physics = N
velset = 0, 0

[State NHB]
type = HitBy
trigger1 = 1
value = SCA, HA, HT
time = 1

[State 1]
type = ChangeAnim
trigger1 = 1
value = 5030

[State 2]
type = ChangeState
trigger1 = HitShakeOver
value = 3854


;==============================================================================================
[Statedef 3854]
type = A
movetype= H
physics = N
ctrl = 0

[State NHB]
type = HitBy
trigger1 = 1
value = SCA, HA, HT
time = 1

[State Screen]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1, 0

[State 1]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 2]
type = HitVelSet
trigger1 = time = 0
x = 1
y = 1

[State 3]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 4]
type = Width
trigger1 = Time < 48
edge = 24, 24

[State 3]
type = ChangeAnim
trigger1 = Anim = 5030 && !AnimTime
value = ifelse(SelfAnimExist(5035), 5035, 5050)

[State 4]
type = ChangeAnim
trigger1 = Anim = 5035 && !AnimTime
value = 5050

[State 5]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = pos y >= 25
value = 5100


;==============================================================================================
[Statedef 3855]
type = A
movetype= H
physics = N
ctrl = 0
velset = 0, 0

[State 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 1]
type = posset
trigger1 = 1
y = 0

[State 4]
type = ChangeAnim2
trigger1 = Time <= 40 && !SelfAnimExist(5950)
value = 3855

[State 4]
type = ChangeAnim
trigger1 = Time <= 40 && SelfAnimExist(5950)
value = 5950

[State 4]
type = offset
trigger1 = time <= 40
x = (gametime % 2) * ifelse(time <= 20, 2, 1)

[State 7]
type = Explod
trigger1 = time = 0
anim = F62
pos = 0, 0
sprpriority = -10

[State Anim]
type = changeanim
trigger1 = time >= 160
trigger1 = anim = 5950 && selfanimexist(5111)
value = 5111

[State End]
type = SelfState
trigger1 = time >= 160
value = ifelse(alive, 5120, 5150)


;==============================================================================================
[Statedef 3846]
type = S
movetype = A
physics = S
juggle = 0
ctrl = 0
anim = 3960
velset = 0, 0

[State A-ism]
type = PlaySnd
trigger1 = animelem = 5
value = 4, 2
volume = 255
channel = 0

[State Slow Motion]
type = Pause 
trigger1 = roundstate = 2
trigger1 = numtarget(3845)
trigger1 = target(3845), statetype=A
time = 1 
movetime = 1 
ignorehitpause = 1

[State Screen]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0, 1

[State 2]
type = Playsnd
trigger1 = time = 0
value = 0, 16
freqmul = 0.8

[State 2]
type = Playsnd
trigger1 = time = 0
value = 4, 5

[State 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 6]
type = Velset
trigger1 = time = 0
x = 3

[State 6]
type = Velset
trigger1 = animelem = 5
x = -3

[State 3]
type = ChangeState
trigger1 = Animtime = 0
value = 3847


;==============================================================================================
[Statedef 3847]
type = S
movetype = A
physics = N
juggle = 0
poweradd= 0
ctrl = 0
anim = 3961
velset = 12, 0
sprpriority = -1

[State Slow Motion]
type = Pause 
trigger1 = roundstate = 2
trigger1 = numtarget(3845)
trigger1 = target(3845), statetype=A
time = 1 
movetime = 1 
ignorehitpause = 1

[State Screen]
type = ScreenBound
trigger1 = Time < 12
value = 0
movecamera = 0, 1

[State 5]
type = PlaySnd
trigger1 = time = 0
value = 2, 4
volume = 255

[State 2]
type = Playsnd
trigger1 = time = 0
value = 21, 6

[State 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 52, 3]
type = Turn
trigger1 = time = 12

[State 3]
type = ChangeState
trigger1 = Time >= 32
trigger2 = Time >= 12
trigger2 = backedgedist <= 0
trigger3 = Time >= 12
trigger3 = NumTarget(3845)
trigger3 = ((Target(3845), pos x - pos x) * facing) >= 70
value = 3848
ctrl = 0


;==============================================================================================
[Statedef 3848]
type = S
physics = S
movetype = A
ctrl = 0
anim = 47
sprpriority = -1

[State Slow Motion]
type = Pause 
trigger1 = roundstate = 2
trigger1 = numtarget(3845)
trigger1 = target(3845), statetype=A
time = 1 
movetime = 1 
ignorehitpause = 1

[State 52, 1]
type = VelSet
trigger1 = time = 0
y = 0

[State 52, 3]
type = PosSet
trigger1 = time = 0
y = 0

[State 52, 4]
type = ChangeState
trigger1 = Animtime = 0
value = 3849
ctrl = 0


;==============================================================================================
[Statedef 3849]
type = S
movetype = A
physics = S
anim = 1205
velset = 0, 0
ctrl = 0
sprpriority = -1

[State 52, 3]
type = Turn
trigger1 = !Time
trigger1 = NumTarget(3845)
trigger1 = ((Target(3845), pos x - pos x) * facing) < 0

[State 1]
type = sprpriority
trigger1 = 1
value = ifelse(animelemtime(10)<0, -1, 1)
ignorehitpause = 1

[State 1]
type = posadd
trigger1 = animelem = 5
x = -60

[State 1]
type = posadd
trigger1 = animelem = 6
x = -10

[State hadouken hit helper]
type = Helper
trigger1 = movehit
helpertype = normal
name = "leg fire"
pos = 0, -59
postype = p1
stateno =10610
ownpal = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -2, -3

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 36
range = 4, 10

[State FireB]
type = Explod
trigger1 = random <= 800 && movecontact
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 70+3*var(3), -10
random = 35, 10
sprpriority = 5
ownpal = 1
vel = var(36), (var(35))
scale = 0.1, 0.75
accel = -(var(36))/3, (var(35))/10

[State Randomizer4]
type = varrandom
trigger1 = 1
v = 37
range = -2, -3

[State Randomizer5]
type = varrandom
trigger1 = 1
v = 38
range = -4, -10

[State Slow Motion]
type = Pause 
trigger1 = roundstate = 2
trigger1 = numtarget(3845)
trigger1 = target(3845), statetype=A
time = 1 
movetime = 1 
ignorehitpause = 1

[State SuperLight] 
type = Explod
trigger1 = animelemtime(10) = 2
anim = 1031
pos = -15, 0
postype = p1
sprpriority = 4
supermovetime = -1
ownpal = 1
removeongethit = 1
scale = 1, 0.7

[State SuperLight] 
type = Explod
trigger1 = animelemtime(10) = [0, 6]
trigger1 = gametime%2 = 1
anim = 1032
pos = 86, -65
postype = p1
sprpriority = 4
supermovetime = -1
ownpal = 1
removeongethit = 1
scale = 0.4, 0.3
vel = -3, 0

[State hadouken hit helper]
type = Helper
trigger1 = animelemtime(10) = 0
helpertype = normal
name = "leg fire"
pos = 86, -75
postype = p1
stateno =1068
ownpal = 1

[State FireB]
type = Explod
triggerall = numexplod(2500) < 1
trigger1 = movehit
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numexplod(2500) < 1
trigger1 = movehit
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State NHB]
type = NotHitBy
trigger1 = (time = [0, 40]) || movehit
value = SCA
time = 1

[State width]
type = width
trigger1 = animelem = 3, >= 0
value = 30

[State A-ism]
type = PlaySnd
trigger1 = animelem = 11
value = 0, 4
volume = 255

[State A-ism]
type = PlaySnd
trigger1 = animelem = 11
value = 0, 4
volume = 255
freqmul = 0.8

[State A-ism]
type = PlaySnd
trigger1 = animelem = 11
value = 0, 7
volume = 255

[State 0]
type = Velset
trigger1 = animelem = 11
x = 18

[State A-ism]
type = PlaySnd
trigger1 = animelem = 11
value = 4, 8
volume = 255
channel = 0

[State 9]
type = EnvShake
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 10
ampl = -15
freq = 100
phase = 1

[State 9]
type = HitDef
trigger1 = animelem = 11
attr = S, HA
damage = 120, 15
animtype = Hard
air.animtype = Hard
fall.animtype = Hard
priority = 5, Hit
hitflag = MAFD
guardflag = MA
p2facing = 1
getpower = 0, 0
pausetime = 0, 500
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S7, 2
guardsound = S0, 100
ground.type = Low
air.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -17, -4
air.velocity = -17, -4
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
air.cornerpush.veloff = -40
kill = 0
guard.kill = 1
forcestand = 1

[State SuperLight] 
type = Explod
trigger1 = movecontact
ignorehitpause = 1
anim = 9402
persistent = 0
pos = 20, 0
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
ownpal = 1
pausemovetime = 9999
ID = 9402

[State TimeCountVar]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State TimeCount]
type = VarAdd
trigger1 = movecontact
v = 3
value = 1

[State 0]
type = ModifyExplod
trigger1 = 1
ID = 9402
scale = 1 + (0.025*var(3)), 1

[State 0]
type = Varset
trigger1 = animtime = 0
v = 28
value = 0

[State 3]
type = AssertSpecial
trigger1 = movehit
ignorehitpause = 1
persistent = 1
flag = NoMusic

[State 5]
type = ChangeAnim
trigger1 = time = 40 && movehit
persistent = 0
value = 1203

[State 9]
type = ChangeState
trigger1 = movehit
ignorehitpause = 1
persistent = 0
value = 3850
ctrl = 0

[State 9]
type = ChangeState
triggerall = Animtime = 0
trigger1 = BackEdgeBodyDist >= 0
value = 0
ctrl = 1

[State 9]
type = ChangeState
triggerall = animtime = 0
trigger1 = BackEdgeBodyDist < 0
value = 3886
ctrl = 0


;==============================================================================================
[Statedef 3850]
type = S
movetype = A
physics = S
anim = 1204
velset = 0, 0
ctrl = 0
sprpriority = 3

[State Randomizer]
type = Varset
trigger1 = time = 0
v = 46
value = 0

[State 0]
type = Varset
trigger1 = time = 0
v = 28
value = 0

[State 9]
type = EnvShake
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 10
ampl = -8
freq = 100
phase = 1

[State 5]
type = PlaySnd
trigger1 = time = 0
value = 8, 2 
freqmul = 0.4

[State hadouken hit helper]
type = Helper
trigger1 = time = 100 || time = 120 || time = 140 || time = 160
helpertype = normal
name = "Plasma"
pos = 400, -50
postype = p2
facing = -1
stateno =3851
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State hadouken hit helper]
type = Helper
trigger1 = time = 105 || time = 125 || time = 145 || time = 165
helpertype = normal
name = "Plasma"
pos = -400, -50
postype = p2
stateno =3851
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State hadouken hit helper]
type = Helper
trigger1 = time = 110 || time = 130 || time = 150 || time = 170
helpertype = normal
name = "Plasma"
pos = 400, -450
postype = p2
facing = -1
stateno =3852
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State hadouken hit helper]
type = Helper
trigger1 = time = 115 || time = 135 || time = 155 || time = 175
helpertype = normal
name = "Plasma"
pos = -400, -450
postype = p2
stateno =3852
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State 2]
type = velset
trigger1 = time = 0
ignorehitpause = 1
x = 24

[State 2]
type = velset
trigger1 = time = 40
ignorehitpause = 1
x = 0

[State 5]
type = EnvColor
trigger1 = time < 199
value = 255, 255, 255
time = 2
under = 1
ignorehitpause = 1

[State 5]
type = AssertSpecial
trigger1 = time < 200
flag = noFG
flag2 = NoMusic
ignorehitpause = 1

[State Trans]
type = Trans
trigger1 = time < 100
trans = addalpha
alpha = 256 - ceil(2.55 * time), ceil(2.55 * time)

[State Trans]
type = Trans
trigger1 = time = [100, 199]
trans = addalpha
alpha = 0, 256

[State 1]
type = ChangeAnim
trigger1 = time = 200
value = 12230

[State 9]
type = sprpriority
trigger1 = anim = 12230
value = -2

[State 1]
type = posset
trigger1 = time = 200
trigger1 = numtarget
x = ceil(target, pos x) + (40 * facing)

[State P2 State]
type=targetstate
trigger1 = time = 200
trigger1 = numtarget
trigger1 = target, stateno = [5000, 5050]
value = 3855
ignorehitpause = 1

[State LifeMinus]
type = targetlifeadd
trigger1 = time = 200
value = floor(-32 * fvar(10))
kill = 1

[State 5]
type = Explod
trigger1 = time = 200
postype = p2
Anim = 9420
scale = 1, 1
pos = 0, -50
ontop = 1

[State 5]
type = HitAdd
trigger1 = time = 200
value = 1

[State 5]
type = PlaySnd
trigger1 = time = 200
value = 7, 2

[State 5]
type = PlaySnd
trigger1 = time = 219
value = 1, 3

[State 5]
type = EnvShake
trigger1 = time = 200
persistent = 0
time = 20
ampl = -5
freq = 100
phase = 10

[State 0]
type = Varset
trigger1 = time = 359
v = 28
value = 0

[State SuperLight] 
type = Explod
trigger1 = time = 200
ignorehitpause = 1
anim = 9402
persistent = 0
pos = -32, 0
postype = p1
sprpriority = -4
postype = p1
ownpal = 1
pausemovetime = -1
supermovetime = -1
ID = 9402

[State 0]
type = ModifyExplod
trigger1 = time >= 200
ID = 9402
scale = 0.5 + ((time - 200) * 0.015), 1

[State Rings] 
type = explod
trigger1 = time = 200
persistent = 0
ignorehitpause = 1
anim = 12223
pos = 0, -50
sprpriority = 5
postype = p2
ownpal = 1
pausemovetime = -1
supermovetime = -1

[State 9]
type = ChangeState
trigger1 = anim = 12230
trigger1 = !animtime
value = 0
ctrl = 1


;==============================================================================================
[Statedef 3851]
type = A
movetype = A
physics = N
poweradd = 0
ctrl = 0
anim = 12228
sprpriority = 5

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
add = 0, 0, 0

[State 9]
type = EnvShake
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 10
ampl = -8
freq = 100
phase = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 47
range = -50, 50

[State 5]
type = posadd
trigger1 = time = 0
y = var(47)

[State 5]
type = velset
trigger1 = time = 0
x = 20

[State 5]
type = veladd
trigger1 = 1
x = 0.3

[State NHB]
type = NotHitBy
trigger1 = 1
time = -1
value = SCA, AA, AP, AT
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 3851
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State 5]
type = Hitdef
trigger1 = animelem = 1
attr = A, HP
damage = ceil(11 * root, fvar(10)), 3
animtype = Hard
hitflag = MAF
guardflag = MA
getpower = 0, 0
pausetime = 0, 18
sparkno = 2
sparkxy = -10, 0
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 0, -24
down.velocity = 0, 0
air.velocity = 0, -24
air.type = Low
fall.animtype = Hard
forcestand = 1
fall.recover = 0
fall.recovertime = 120
air.fall = 1
fall = 1
pausemovetime = 99
Supermovetime = 99
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
kill = 0
p1sprpriority = 5
yaccel = 0.5

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Dissipate]
type = destroyself
triggerall = time > 20
trigger1 = frontedgedist < -100
trigger2 = backedgedist < -100


;==============================================================================================
[Statedef 3852]
type = A
movetype = A
physics = N
poweradd = 0
ctrl = 0
anim = 12229
sprpriority = 5

[State 9]
type = EnvShake
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 10
ampl = -8
freq = 100
phase = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 47
range = -50, 50

[State 5]
type = posadd
trigger1 = time = 0
y = var(47)

[State 5]
type = velset
trigger1 = time = 0
x = 20
y = 20

[State 5]
type = veladd
trigger1 = 1
x = 0.3
y = 0.3

[State NHB]
type = NotHitBy
trigger1 = 1
time = -1
value = SCA, AA, AP, AT
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 3852
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State 5]
type = Hitdef
trigger1 = animelem = 1
attr = A, HP
damage = ceil(11 * root, fvar(10)), 3
animtype = Hard
hitflag = MAF
guardflag = MA
getpower = 0, 0
pausetime = 0, 18
sparkno = 2
sparkxy = -10, 0
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 0, -24
down.velocity = 0, 0
air.velocity = 0, -24
air.type = High
fall.animtype = Hard
forcestand = 1
fall.recover = 0
fall.recovertime = 120
air.fall = 1
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
kill = 0
p1sprpriority = 5
yaccel = 0.5

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Dissipate]
type = destroyself
triggerall = time > 20
trigger1 = frontedgedist < -100
trigger2 = backedgedist < -100


;==============================================================================================
[Statedef 3861]
type = A
movetype = I
physics = N

[State Var(32)reset]
type = Varset
trigger1 = time = 0
v = 32
value = 0

[State Gravity]
type = VelAdd
trigger1 = Time >= 10
y = 0.44

[State 5]
type = VelMul
trigger1 = 1
trigger1 = time < 10
y = 0.95

[State Gravity]
type = Velmul
trigger1 = Time >= 5
x = 0.65

[State 1]
type = changeanim
trigger1 = time = 0
value = 13020

[State 9]
type = ChangeState
trigger1 = pos y >= -5
value = 52


;==============================================================================================
[Statedef 1956]
type = S
movetype = A
velset = 0, 0
ctrl = 1
anim = 997

[State facedif]
type = turn
trigger1 = numenemy
trigger1 = facing = (enemy, facing)

[State 2]
type = PosAdd
trigger1 = P2dist x >= 0
x = 5

[State 3]
type = PosAdd
trigger1 = P2dist x <= 0
x = -5

[State 4]
type = PosAdd
trigger1 = P2dist y <= 50
y = -5

[State 5]
type = PosAdd
trigger1 = P2dist y >= 50
y = 5

[State 2]
type = PosSet
trigger1 = NumTarget
x = ceil(target, pos x)
y = ceil(target, pos y) + ceil(target, const(size.mid.pos.y))

[State 2]
type = PosSet
trigger1 = NumTarget
trigger1 = Target, Statetype = L
x = ceil(target, pos x)
y = ceil(target, pos y) - 16

[State HitBy]
type = NotHitBy
trigger1 = 1
time = -1
value = SCA
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1012
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State FireB]
type = Explod
trigger1 = numenemy
trigger1 = movehit = 1
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = numenemy
trigger1 = movehit = 1
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Do Not Guard]
type = attackdist
trigger1 = 1
value = 0

[State 3]
type = HitDef
trigger1 = numenemy
trigger1 = (enemynear, hitshakeover)
trigger1 = (enemynear, stateno != [5100, 5109])
trigger1 = (enemynear, stateno != [9000, 9120]) && (enemynear, stateno != 1955)
trigger1 = !(time % 30) && random < 500
attr = S, HA
damage = 20, 0
animtype = Light
getpower = 0, 0
givepower = 0
priority = 5, Hit
hitflag = MAFD
pausetime = 0, 16
sparkxy = -10, -945
sparkno = 0
hitsound = S2, 7
ground.type = low
ground.slidetime = 1
ground.hittime = 1
ground.velocity = 0, 0
air.velocity = (enemyNear, vel x), (enemyNear, vel Y)
fall.animtype = Hard
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
ID = 1956
kill = 0
forcestand = 1

[State Electrocute]
type = targetstate
trigger1 = movehit = 1
trigger1 = numtarget(1956)
trigger1 = target(1956), selfanimexist(7696)
trigger1 = target, stateno = 5000 || target, stateno = 5010 || target, stateno = 5020
value = 9005
ignorehitpause = 1

[State 6]
type = destroyself
trigger1 = time >= 600
trigger2 = root, movetype = H


;==============================================================================================
[Statedef 1955]
type = S
movetype = I
velset = 0, 0

[State PosFreeze]
type = Posset
trigger1 = 1
y = 0

[State 9]
type = hitfallset
trigger1 = 1
value = 0

[State Shi-NE!]
type = SelfState
trigger1 = alive = 0 && time = 10
value = 5070

[State Change to Custom Dizzy Anim]
type = ChangeAnim2
trigger1 = alive = 1 && time = 0 && !selfanimexist(5300)
value = 5301

[State Change to Dizzy Anim]
type = ChangeAnim
trigger1 = alive = 1 && time = 0 && selfanimexist(5300)
value = 5300

[State 9]
type = SelfState
trigger1 = time >= 200
value = 0
ctrl = 1


;==============================================================================================
[Statedef 9000]
type = S
movetype= H
physics = N
velset = 0, 0

[State 1]
type = ChangeAnim
trigger1 = time = 0
trigger1 = GetHitVar(animtype) != [3, 5]
value = ifelse((GetHitVar(groundtype) = 1), 5000, 5010) + GetHitVar(animtype)

[State 2]
type = ChangeAnim
trigger1 = time = 0
trigger1 = GetHitVar(animtype) = [3, 5]
value = 5030

[State 3]
type = ChangeAnim
trigger1 = time = 0
trigger1 = (GetHitVar(animtype) = [4, 5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype)

[State 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5]
type = StateTypeSet
trigger1 = time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = pos y != 0
type = a

[State 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5001

[State 7]
type = ChangeState
trigger1 = HitShakeOver
value = 9030

[State FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110, -1, -0.3

[State FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140


;==============================================================================================
[Statedef 9005]
type = U
movetype= H
physics = N
velset = 0, 0

[State 4]
type = ChangeAnim
trigger1 = time = 0
trigger1 = selfanimexist(7696)
value = ifelse(selfanimexist(7696), 7696, 5012)

[State 3]
type = PalFx
trigger1 = time = 0
add = 0, 0, 0
time = 0
ignorehitpause = 1

[State 8]
type = PosFreeze
trigger1 = 1
value = 1

[State 7]
type = SelfState
trigger1 = HitShakeOver
value = 5000


;==============================================================================================
[Statedef 9030]
type = A
movetype= H
physics = N
ctrl = 0

[State 1]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 2]
type = HitVelSet
trigger1 = time = 0
x = 1
y = 1

[State 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = pos y >= 10
value = 9050


;==============================================================================================
[Statedef 9050]
type = A
movetype= H
physics = N

[State 1]
type = ChangeAnim
trigger1 = Animtime = 0
trigger1 = Anim = 5035
trigger2 = time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090
value = 5050

[State 2]
type = ChangeAnim
trigger1 = anim = [5050, 5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 3]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = pos y >= ifelse((anim = [5051, 5059]) || (anim = [5061, 5069]), 0, 25)
value = 9100


;==============================================================================================
[Statedef 9100]
type = L
movetype= H
physics = N

[State 1]
type = VelSet
trigger1 = time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State EnvShake]
type = FallEnvShake
trigger1 = time = 0

[State Var]
type = VarSet
trigger1 = time = 0
sysvar(1) = floor(vel y)

[State 2]
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051, 5059]) && (anim != [5061, 5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 3]
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051, 5059]) || (anim = [5061, 5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 4]
type = PosSet
trigger1 = time = 0
y = 0

[State 5]
type = VelSet
trigger1 = time = 0
y = 0

[State 6]
type = VelMul
trigger1 = time = 0
x = 0.75

[State 7]
type = ChangeState
trigger1 = time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 9110

[State 8]
type = GameMakeAnim
trigger1 = time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 9]
type = HitFallDamage
trigger1 = time = 3

[State 10]
type = PlaySnd
trigger1 = time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 11]
type = PosFreeze
trigger1 = 1

[State 12]
type = ChangeState
trigger1 = Animtime = 0
value = 9101

[State 13]
type = ForceFeedback
trigger1 = time = 0
waveform = sinesquare
ampl = 128, -3, -0.2, .005
time = 20


;==============================================================================================
[Statedef 9101]
type = L
movetype= H
physics = N

[State 1]
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101, 5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 2]
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101, 5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 3]
type = HitFallVel
trigger1 = time = 0

[State 4]
type = PosSet
trigger1 = time = 0
y = 20

[State 5]
type = VelAdd
trigger1 = 1
y = 0.4

[State 6]
trigger1 = Vel Y > 0
trigger1 = pos y >= 12
type = ChangeState
value = 9110


;==============================================================================================
[Statedef 9110]
type = L
movetype= H
physics = N

[State EnvShake]
type = FallEnvShake
trigger1 = time = 0

[State 1]
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081, 5089]
value = 5110 + (anim % 10)

[State 2]
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110, 5119]
trigger1 = anim != [5161, 5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 3]
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110, 5119]
trigger1 = anim = [5161, 5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 4]
type = HitFallDamage
trigger1 = time = 0

[State 5]
type = PosSet
trigger1 = time = 0
y = 0

[State Var]
type = VarSet
trigger1 = time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 6]
type = PlaySnd
trigger1 = time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 7]
type = GameMakeAnim
trigger1 = time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 8]
type = VelSet
trigger1 = time = 0
y = 0

[State 9]
type = ChangeAnim
persistent = 0
triggerall = anim = [5171, 5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = Animtime = 0
trigger2 = SysVar(0)
value = 5110 + (anim % 10)

[State 10]
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111, 5119]
trigger1 = Animtime = 0
trigger2 = SysVar(0)
value = 5110

[State 11]
type = SelfState
triggerall = !alive
trigger1 = Animtime = 0
trigger2 = SysVar(0)
trigger3 = Anim = [5110, 5119]
value = 5150

[State 11]
type = changeState
triggerall = alive
trigger1 = Animtime = 0
trigger2 = SysVar(0)
trigger3 = Anim = [5110, 5119]
value = 9120

[State 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = time = 0
sysvar(0) = 0

[State 13]
type = VelMul
trigger1 = 1
x = 0.85

[State 14]
type = ForceFeedback
trigger1 = alive
trigger1 = time = 0
time = 8
ampl = 240
waveform = sine

[State 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = time = 0
ampl = 200, 7, -0.467
time = 30
waveform = sine


;==============================================================================================
[Statedef 9120]
type = L
movetype= H
physics = N

[State 1a]
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111, 5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 1b]
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111, 5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 2]
type = VelSet
trigger1 = time = 0
x = 0

[State 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 4]
type = HitFallSet
trigger1 = Animtime = 0
value = 1

[State 5]
type = NotHitBy
trigger1 = Animtime = 0
value = , NT, ST, HT
time = 12

[State 6]
type = NotHitBy
trigger1 = Animtime = 0
value2 = SCA
time = 3

[State 7]
type = ChangeState
trigger1 = Animtime = 0
value = 1955
ctrl = 0


;==============================================================================================
[Statedef 3880]
type = S
movetype = A
physics = S
ctrl = 0
anim = ifelse(prevstateno = 3878, 3880, 1002)
velset = 0, 0
sprpriority = 2

[State Width]
type = width
trigger1 = animelemtime(2) < 0
value = 16, 0

[State Width]
type = width
trigger1 = anim = 1002
trigger1 = animelemtime(2) >= -1 && animelemtime(26) < 0
trigger2 = anim = 3880
trigger2 = animelemtime(2) >= -1 && animelemtime(36) < 0
value = 32, 0

[State Removeburstknuckle]
type = RemoveExplod
trigger1 = 1
id = 3910

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [9000, 9999]) || (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
triggerall = numexplod(2500) < 2
trigger1 = numhelper(2)
trigger1 = helper(2), movehit
trigger2 = numhelper(3)
trigger2 = helper(3), movehit
trigger3 = numhelper(4)
trigger3 = helper(4), movehit
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [9000, 9999]) || (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
triggerall = numexplod(2500) < 2
trigger1 = numhelper(2)
trigger1 = helper(2), movehit
trigger2 = numhelper(3)
trigger2 = helper(3), movehit
trigger3 = numhelper(4)
trigger3 = helper(4), movehit
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State HadokenVoice]
type = PlaySnd
trigger1 = time = 2
value = 4, 3
channel = 0
volume = 255

[State SuperLight] 
type = Explod
trigger1 = animelem = 2
anim = 4803
pos = 5, 0
postype = p1
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 2
anim = 4803
pos = 6, 1
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 2
trigger2 = var(3) >= 350
trigger2 = animelem = 2 || animelem = 4 || animelem = 6 || animelem = 8 || animelem = 10
anim = 4806
pos = 0, 0
postype = p1
sprpriority = 5
postype = p1
supermovetime = -1
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = animelem = 2
anim = 1031
pos = 0, 0
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
ownpal = 1
removeongethit = 1

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 2 && prevstateno = 3875
trigger2 = animelem = 2 && prevstateno = 13875
helpertype = normal
name = "hadouken"
id = 2
pos = 95, -54
postype = p1
stateno = 3881
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 2 && prevstateno = 3876
trigger2 = animelem = 2 && prevstateno = 13876
helpertype = normal
name = "hadouken"
id = 3
pos = 95, -54
postype = p1
stateno = 4000
ownpal = 1
size.xscale = 0.9
size.yscale = 0.9

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 2 && prevstateno = 3877
trigger2 = animelem = 2 && prevstateno = 13877
helpertype = normal
name = "hadouken"
id = 3
pos = 95, -54
postype = p1
stateno = 4002
ownpal = 1
size.xscale = 1
size.yscale = 1

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 2 && prevstateno = 3878
trigger2 = animelem = 2 && prevstateno = 13878
helpertype = normal
name = "hadouken"
id = 4
pos = 78, -54
postype = p1
stateno = 4004
ownpal = 1
size.xscale = 1
size.yscale = 0.8

[State hadouken hit helper]
type = Helper
triggerall = numenemy
triggerall = (enemyNear, StateNo = [9000, 9999]) || (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
helpertype = normal
persistent = 0
name = "burner"
id = 1711
pos = 50, -100
postype = p2
stateno = 1956
ownpal = 1
size.xscale = 1
size.yscale = 0.8

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 2
value = 0, 7
volume = 50

[State 1]
type = AfterImageTime
trigger1 = Animtime = 0
time = 0

[State 5]
type = Screenbound
trigger1 = prevstateno = 3878 || prevstateno = 13878
movecamera = 0, 1
value = 0

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [9000, 9999]) || (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
triggerall = numexplod(2500) < 2
trigger1 = numhelper(2)
trigger1 = helper(2), movehit
trigger2 = numhelper(3)
trigger2 = helper(3), movehit
trigger3 = numhelper(4)
trigger3 = helper(4), movehit
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 0]
type = Varset
trigger1 = animtime = 0
v = 28
value = 0

[State 9]
type = ChangeState
triggerall = Animtime = 0
trigger1 = BackEdgeBodyDist >= 0
value = 0
ctrl = 1

[State 9]
type = ChangeState
triggerall = animtime = 0
trigger1 = BackEdgeBodyDist < 0
value = 3886
ctrl = 0


;==============================================================================================
[Statedef 4000]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1052
velset = 4, 0
sprpriority = 5
juggle = 10

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 4]
type = PlaySnd
trigger1 = time = 0
value = 8, 4
volume = 255

[State 4]
type = PlaySnd
trigger1 = time = 0
value = 8, 5
volume = 255

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
v = 55
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 5]
type = velset
trigger1 = 1
x = 6

[State 5]
type = veladd
trigger1 = 1
x = 0.5

[State 5]
type = Hitdef
trigger1 = var(55) < 9
getpower = 0, 0
attr = S, SP
damage = ceil(36 * root, fvar(10)), 4
animtype = Hard
pausetime = 0, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
getpower = 0, 0
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(55) >= 9
attr = S, SP
damage = ceil(36 * root, fvar(10)), 4
animtype = Hard
pausetime = 0, 10
guard.sparkno = 40; S9200
getpower = 0, 0
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -6, -5
air.type = Low
air.velocity = -6, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 5
PalBright = 0, 0, 0
PalContrast = 0, 30, 100
PalMul = .66, .66, .66
Timegap = 1
FrameGap = 1
Trans = add

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 20

[State PlaySnd]
type = PlaySnd
triggerall = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1
channel = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 4001
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP
time = -1
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(55) >= 9
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(55) < 9 && movecontact
value = 4001


;==============================================================================================
[Statedef 4001]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 5

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
v = 55
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 5]
type = velset
trigger1 = 1
x = 3

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -20, 20

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -20, 20

[State 5]
type = Hitdef
trigger1 = var(55) < 9
attr = S, SP
damage = ceil(36 * root, fvar(10)), 4
animtype = Hard
pausetime = 0, 5
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
getpower = 0, 0
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(55) >= 9
attr = S, SP
damage = ceil(36 * root, fvar(10)), 4
animtype = Hard
pausetime = 0, 5
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
getpower = 0, 0
ground.velocity = -6, -5
air.type = Low
air.velocity = -6, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 5
PalBright = 0, 0, 0
PalContrast = 0, 30, 100
PalMul = .66, .66, .66
Timegap = 1
FrameGap = 1
Trans = add

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 20

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1
channel = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 4001
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP
time = -1
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(55) >= 9
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(55) < 9 && movecontact
value = 4001


;==============================================================================================
[Statedef 4002]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1053
velset = 4, 0
sprpriority = 5
juggle = 10

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 4]
type = PlaySnd
trigger1 = time = 0
value = 8, 4
volume = 255

[State 4]
type = PlaySnd
trigger1 = time = 0
value = 8, 7
volume = 255

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
v = 55
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 5]
type = velset
trigger1 = 1
x = 6

[State 5]
type = veladd
trigger1 = 1
x = 0.5

[State 5]
type = Hitdef
trigger1 = var(55) < 13
attr = S, SP
damage = ceil(30 * root, fvar(10)), 4
animtype = Hard
pausetime = 0, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
getpower = 0, 0
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p2getp1state = 1
p2stateno = 9000
p2facing = 1
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(55) >= 13
attr = S, SP
damage = ceil(30 * root, fvar(10)), 4
animtype = Hard
pausetime = 0, 10
guard.sparkno = 40; S9200
getpower = 0, 0
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -6, -5
air.type = Low
air.velocity = -6, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p2getp1state = 1
p2stateno = 9000
p2facing = 1
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 5
PalBright = 0, 0, 0
PalContrast = 0, 30, 100
PalMul = .66, .66, .66
Timegap = 1
FrameGap = 1
Trans = add

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 20

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [9000, 9999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1
channel = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 4003
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP
time = -1
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [9000, 9999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(55) >= 13
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(55) < 13 && movecontact
value = 4003


;==============================================================================================
[Statedef 4003]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 5

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
v = 55
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 5]
type = velset
trigger1 = 1
x = 3

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -20, 20

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -20, 20

[State 5]
type = Hitdef
trigger1 = var(55) < 13
attr = S, SP
damage = ceil(30 * root, fvar(10)), 4
animtype = Hard
pausetime = 0, 5
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
getpower = 0, 0
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p2getp1state = 1
p2stateno = 9000
p2facing = 1
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(55) >= 13
attr = S, SP
damage = ceil(30 * root, fvar(10)), 4
animtype = Hard
pausetime = 0, 5
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
getpower = 0, 0
ground.velocity = -6, -5
air.type = Low
air.velocity = -6, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p2getp1state = 1
p2stateno = 9000
p2facing = 1
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 5
PalBright = 0, 0, 0
PalContrast = 0, 30, 100
PalMul = .66, .66, .66
Timegap = 1
FrameGap = 1
Trans = add

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 20

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [9000, 9999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1
channel = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 4003
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP
time = -1
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [9000, 9999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(55) >= 13
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(55) < 13 && movecontact
value = 4003


;==============================================================================================
[Statedef 4004]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10500
sprpriority = 5
juggle = 10

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = 25, 35

[State FireB]
type = Explod
trigger1 = time = [3, 27]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = 36, 0
random = 20, 50
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = time = [3, 22]
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = 36, 0
random = 20, 50
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State SuperLight] 
type = Explod
trigger1 = time < 24
anim = 1033
pos = -5+(time*40), 0
postype = p1
sprpriority = 4
supermovetime = -1
ownpal = 1
removeongethit = 1
scale = 0.6, 0.6

[State 4]
type = PlaySnd
trigger1 = time = 0
value = 8, 4
volume = 255

[State 4]
type = PlaySnd
trigger1 = time = 0
value = 8, 8
volume = 255

[State 4]
type = PlaySnd
trigger1 = time = 0
value = 8, 8
volume = 255
freqmul = 0.9

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
v = 55
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -20, 20

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -20, 20

[State 5]
type = Hitdef
trigger1 = time < 20
attr = S, HP
damage = ceil(36 * root, fvar(10)), 5
animtype = Hard
pausetime = ifelse(time >= 16, 0, 8 - (time / 2)), ifelse(time >= 12, 0, 6 - (time / 2))
sparkxy = var(52), var(53)
sparkno = 3
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = high
sprpriority = 5
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -13, -1
air.type = Low
getpower = 0, 0
air.velocity = -13, -1
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = 0
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = timemod = 2, 1
trigger1 = time < 20
attr = S, HP
damage = ceil(36 * root, fvar(10)), 5
animtype = Hard
pausetime = ifelse(time >= 16, 0, 8 - (time / 2)), ifelse(time >= 12, 0, 6 - (time / 2))
sparkxy = var(52), var(53)
sparkno = 3
guard.sparkno = 40; S9200
hitsound = S6, 5
guardsound = S0, 100
ground.type = low
fall.animtype = Hard
sprpriority = 5
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -13, -1
getpower = 0, 0
air.velocity = -13, -1
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = 0
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = time >= 20
attr = S, SP
damage = ceil(36 * root, fvar(10)), 5
animtype = Hard
pausetime = 0, 0
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
sprpriority = 5
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -13, -7
air.type = Low
getpower = 0, 0
air.velocity = -13, -7
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = 0
fall.recovertime = 120
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [9000, 9999])
trigger1 = p2movetype = H && time < 21
trigger1 = MoveContact
value = 6, 5
persistent = 1
ignorehitpause = 1
channel = 1
volume = 255

[State NHB]
type = NotHitBy
trigger1 = 1
time = -1
value = SCA, AA, AP, AT
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 4004
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [9000, 9999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = destroyself
trigger1 = animtime = 0
trigger2 = root, movetype = H


;==============================================================================================
[Statedef 3881]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1052
velset = 4, 0
sprpriority = 5
juggle = 10

[State 4]
type = PlaySnd
trigger1 = time = 0
value = 8, 4
volume = 255

[State 4]
type = PlaySnd
trigger1 = time = 0
value = 8, 5
volume = 255

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
v = 55
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 5]
type = velset
trigger1 = 1
x = 6

[State 5]
type = veladd
trigger1 = 1
x = 0.5

[State 5]
type = Hitdef
trigger1 = var(55) < 6
attr = S, SP
getpower = 0, 0
damage = ceil(50 * root, fvar(10)), 7
animtype = Hard
pausetime = 0, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -6
air.type = Low
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
air.velocity = -2, -6
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p2getp1state = 1
p2stateno = 9000
p2facing = 1
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(55) >= 6
getpower = 0, 0
attr = S, SP
damage = ceil(50 * root, fvar(10)), 7
animtype = Hard
pausetime = 0, 10
guard.sparkno = 40; S9200
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -6, -5
air.type = Low
air.velocity = -6, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p2getp1state = 1
p2stateno = 9000
p2facing = 1
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 5
PalBright = 0, 0, 0
PalContrast = 0, 30, 100
PalMul = .66, .66, .66
Timegap = 1
FrameGap = 1
Trans = add

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 20

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [9000, 9999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1
channel = 1

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
time = -1
value = SCA, AP
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 3882
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [9000, 9999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(55) >= 6
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(55) < 6 && movecontact
value = 3882


;==============================================================================================
[Statedef 3882]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 5

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
v = 55
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 200
persistent = 1
anim = 12214
id = 12214
postype = p1
pos = -45, -7
scale = 0.3, 1
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), 0

[State 5]
type = velset
trigger1 = 1
x = 3

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -20, 20

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -20, 20

[State 5]
type = Hitdef
trigger1 = var(55) < 6
getpower = 0, 0
attr = S, SP
damage = ceil(50 * root, fvar(10)), 7
animtype = Hard
pausetime = 0, 5
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p2getp1state = 1
p2stateno = 9000
p2facing = 1
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(55)=-7 || var(55)=-6 || var(55)=-3 || var(55)=-2 || var(55)=1 || var(55) = 2 || var(55)=5 || var(55) = 6 || var(55) = 9 || var(55)= 10 || var(55) = 13
trigger1 = var(55) < 10
getpower = 0, 0
attr = S, SP
damage = ceil(50 * root, fvar(10)), 7
animtype = Medium
pausetime = 0, 5
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p2getp1state = 1
p2stateno = 9000
p2facing = 1
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(55) >= 5
getpower = 0, 0
attr = S, SP
damage = ceil(50 * root, fvar(10)), 7
animtype = Hard
pausetime = 0, 5
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
getpower = (parent, Var(10)=0) * 10, (parent, Var(10)=0) * 5
ground.velocity = -6, -5
air.type = Low
air.velocity = -6, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = (var(10) <= 0)
fall.recovertime = 120
p2getp1state = 1
p2stateno = 9000
p2facing = 1
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 5
PalBright = 0, 0, 0
PalContrast = 0, 30, 100
PalMul = .66, .66, .66
Timegap = 1
FrameGap = 1
Trans = add

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 20

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [9000, 9999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1
channel = 1

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
time = -1
value = SCA, AP
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 3882
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Spark] 
type = Explod
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [9000, 9999])
trigger1 = p2movetype = H
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(55) >= 6
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1012

[State Dissipate]
type = Changestate
trigger1 = Var(55) < 6 && movecontact
value = 3882


;==============================================================================================
[Statedef 3885]
type = S
movetype = A
physics = S
poweradd = (Var(10)=0) * -1000
juggle = 0
ctrl = 0
anim = 3905
velset = 0, 0
sprpriority = 2
facep2 = 1

[State Width]
type = width
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
value = 16, 0

[State Width]
type = width
trigger1 = animelemtime(4) >= -1 && animelemtime(19) < 0
value = 32, 0

[State Randomizer]
type = varrandom
trigger1 = time = 0
v = 46
range = 0, 100

[State NHB]
type = NotHitBy
trigger1 = animelemtime(1) <= 0
trigger2 = Prevstateno != [3960, 3991]
trigger2 = animelemtime(4) < 1
value = SCA
time = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 29
length = 21
PalBright = 0, 0, 0
PalContrast = 148, 148, 148
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State Shadows]
type = Afterimage
triggerall = time = 0
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
time = 29
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State red fadeout]
type = BGPalFx
triggerall = var(28) = 0
trigger1 = !time
add = 100, 100, 100
sinadd = 100, 100, 100, 390
time = 55
ignorehitpause = 1
invertall = 1

[State red fadein]
type = BGPalFx
triggerall = var(28) = 1
trigger1 = animelem = 1
add = 100, 100, 150
sinadd = 305, -255, -355, 180
time = 32
invertall = 1
ignorehitpause = 1

[State white fadein]
type = BGPalFx
triggerall = var(28) > 1
trigger1 = animelem = 1
add = 255, -155, -155
sinadd = -255, -255, -255, 180
time = 32
ignorehitpause = 1
invertall = 1

[State Freeze]
type = superpause
trigger1 = animelem = 1
anim = S ifelse(var(28) > 0, 10061, 10060)
time = ifelse(var(28) > 0, 32, 55)
pos = -27, -60
movetime = 4
p2defmul = 1
darken = 0
sound = S ifelse(var(28) > 0, 0, 7), ifelse(var(28) > 0, 12, 3)

[State Wind effect] 
type = Explod
triggerall = var(28) = 0
trigger1 = animelem = 1
anim = 9402
scale = 0.7, 0.7
pos = 0, 0
sprpriority = 0
postype = p1
supermovetime = -1
bindtime = 18
ownpal = 1
pausemovetime = 9999

[State SuperLight] 
type = Explod
trigger1 = animelem = 3
anim = 4800
pos = 5, 0
postype = p1
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1
pausemovetime = 9999

[State SuperLight charge for hadouken] 
type = Explod
trigger1 = animelem = 1
anim = ifelse(var(28) > 0, 10087, 10086)
pos = -27, -60
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 65
ownpal = 1
scale = 0.5, 0.5
shadow = 0, 0, 0
pausemovetime = 9999

[State SuperLight] 
type = Explod
trigger1 = animelem = 3
anim = 4800
pos = 6, 1
postype = p1
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 57
ownpal = 1
removeongethit = 1
pausemovetime = 9999

[State chiargesound]
type = PlaySnd
trigger1 = time = 0
value = 1, 5
channel = 0
volume = 255

[State 0]
type = Varadd
trigger1 = animelem = 1
v = 28
value = 1

[State Shadows]
type = Afterimage
triggerall = animelem = 1
trigger1 = var(46) >= 90 || var(28) >= 3
time = 29
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State HadokenVoice]
type = PlaySnd
trigger1 = animelem = 3
value = 4, 3
channel = 0
volume = 0

[State hadouken hit helper]
type = Helper
triggerall = var(28) < 3
trigger1 = var(46) < 90
trigger1 = animelem = 4
helpertype = normal
name = "hadouken"
id = 3
pos = 90, -54
postype = p1
stateno =1009
ownpal = 1
size.xscale = 0.9
size.yscale = 1

[State hadouken hit helper]
type = Helper
triggerall = animelem = 4
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
helpertype = normal
name = "hadouken"
id = 3
pos = 90, -54
postype = p1
stateno =1013
ownpal = 1
size.xscale = 0.9
size.yscale = 1

[State 5]
type = Screenbound
trigger1 = numhelper(3)
trigger1 = helper(3), stateno=1013
movecamera = 0, 1
value = 0

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 4
value = 0, 7
volume = 50

[State 0]
type = Varset
trigger1 = Animtime = 0
v = 28
value = 0

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 2
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 2
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 9]
type = ChangeState
triggerall = Animtime = 0
trigger1 = BackEdgeBodyDist >= 0
value = 0
ctrl = 1

[State 9]
type = ChangeState
triggerall = animtime = 0
trigger1 = BackEdgeBodyDist < 0
value = 3886
ctrl = 0


;==============================================================================================
[Statedef 13880]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12231
sprpriority = 5

[State NHB]
type = NotHitBy
trigger1 = 1
time = -1
value = SCA
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 12232
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State 3]
type = HitDef
trigger1 = movecontact = 0
attr = S, HA
p2facing = 1 
damage = ceil(30 * root, fvar(10)), 4
getpower = 0, 0
givepower = 0
guardflag = MA
hitflag = MAFD
priority = 2, Hit
pausetime = 15, 15
sparkno = 1
sparkxy = -10, 0
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.Velocity = -5, 0
hitsound = S2, 7
kill = 0
fall.recover = 0
fall.recovertime = 120
forcestand = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 46
range = -15, 15

[State Randomizer]
type = varrandom
trigger1 = 1
v = 47
range = -1, 3

[State 5]
type = velset
trigger1 = time = 0
x = var(47)
y = var(46)

[State 5]
type = veladd
trigger1 = vel x < 9 && p2dist x >= 0
x = 1

[State 5]
type = veladd
trigger1 = vel x > -9 && p2dist x < 0
x = -1

[State 5]
type = veladd
trigger1 = vel Y < 9 && p2dist y >= 63
y = 1

[State 5]
type = veladd
trigger1 = vel Y> -9 && p2dist y < 63
y = -1

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 15
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.70, .70, .70
Timegap = 1
FrameGap = 1
Trans = add

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 1]
type = ChangeAnim
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
value = 12232

[State Dissipate]
type = destroyself
trigger1 = anim = 12232 && animtime = 0
trigger2 = time >= 160


;==============================================================================================
[Statedef 13881]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12231
sprpriority = 5

[State 4]
type = explod
trigger1 = time = 0
anim = 2102
id = 9400
postype = p1
pos = 3, -46
sprpriority = 3
ownpal = 1
pausemovetime = -1
scale = 0.3, 0.3

[State hadouken hit helper]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "hadouken"
id = 12
pos = 0, 0
postype = p1
stateno =13881
ownpal = 1
size.xscale = 0.2
size.yscale = 0.2

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
time = -1
value = SCA, AP
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 13881
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State 3]
type = HitDef
trigger1 = movecontact = 0
attr = S, HA
p2facing = 1 
damage = ceil(100 * root, fvar(10)), 10
getpower = 0, 0
givepower = 0
guardflag = MA
hitflag = MAFD
priority = 2, Hit
pausetime = 15, 15
sparkno = 1
sparkxy = -10, 0
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.Velocity = -5, 0
hitsound = S2, 7
kill = 0
fall.recover = 0
fall.recovertime = 120
forcestand = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 46
range = -7, 7

[State Randomizer]
type = varrandom
trigger1 = 1
v = 47
range = -3, -1

[State 5]
type = velset
trigger1 = time = 0
x = var(47)
y = var(46)

[State 5]
type = veladd
trigger1 = vel x < 9 && p2dist x >= 0
x = 1

[State 5]
type = veladd
trigger1 = vel x > -9 && p2dist x < 0
x = -1

[State 5]
type = veladd
trigger1 = vel Y < 9 && p2dist y >= 63
y = 1

[State 5]
type = veladd
trigger1 = vel Y> -9 && p2dist y < 63
y = -1

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 15
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.70, .70, .70
Timegap = 1
FrameGap = 1
Trans = add

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 1]
type = ChangeAnim
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
value = 12232

[State Dissipate]
type = destroyself
trigger1 = anim = 12232 && animtime = 0
trigger2 = time >= 160


;==============================================================================================
[Statedef 13869]
type = S
movetype = I
physics = N
ctrl = 0
anim = 12062
sprpriority = 5
juggle = 10

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State HitBy]
type = NotHitBy
trigger1 = 1
time = -1
value = SCA, AA, AP, AT
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 13869
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State 5]
type = velmul
triggerall = parent, stateno = 10000 || parent, stateno = 10001 || parent, stateno = 10002
trigger1 = time > 30
x = 0.95
y = 0.95

[State Randomizer]
type = varrandom
trigger1 = 1
v = 46
range = -200, 200

[State Randomizer]
type = varrandom
trigger1 = 1
v = 47
range = -300, 50

[State 5]
type = posset
trigger1 = time = 0
x = var(46)
y = var(47)

[State 5]
type = veladd
triggerall = parent, stateno = 10000 || parent, stateno = 10001 || parent, stateno = 10002
trigger1 = vel x < 9 && parentdist x >= 28
x = 1

[State 5]
type = veladd
triggerall = parent, stateno = 10000 || parent, stateno = 10001 || parent, stateno = 10002
trigger1 = vel x > -9 && parentdist x < 28
x = -1

[State 5]
type = veladd
triggerall = parent, stateno = 10000 || parent, stateno = 10001 || parent, stateno = 10002
trigger1 = vel Y < 9 && parentdist y >= 63
y = 1

[State 5]
type = veladd
triggerall = parent, stateno = 10000 || parent, stateno = 10001 || parent, stateno = 10002
trigger1 = vel Y> -9 && parentdist y < 63
y = -1

[State 5]
type = velmul
trigger1 = parent, movetype = H
trigger2 = parent, stateno = 10010
x = 2
y = 2

[State 5]
type = velset
trigger1 = vel Y = 0
y = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 15
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.70, .70, .70
Timegap = 1
FrameGap = 1
Trans = add

[State Dissipate]
type = destroyself
trigger1 = time > 300 && parent, stateno != 10010
trigger2 = parent, stateno = 10010 && frontedgedist < -10
trigger3 = time >= 160


;==============================================================================================
[Statedef 3869]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12060
sprpriority = 5
juggle = 10

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
time = -1
value = SCA, AP
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1012
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 46
range = -200, 200

[State Randomizer]
type = varrandom
trigger1 = 1
v = 47
range = -300, 50

[State 5]
type = posset
trigger1 = time = 0
x = var(46)
y = var(47)

[State 5]
type = veladd
triggerall = parent, stateno != 3880
trigger1 = vel x < 9 && parentdist x >= 28
x = 1

[State 5]
type = veladd
triggerall = parent, stateno != 3880
trigger1 = vel x > -9 && parentdist x < 28
x = -1

[State 5]
type = veladd
trigger1 = vel Y < 9 && parentdist y >= 63
y = 1

[State 5]
type = veladd
trigger1 = vel Y> -9 && parentdist y < 63
y = -1

[State 5]
type = velset
trigger1 = parent, stateno = 3880
trigger1 = parent, var(3) < 380
x = 6

[State 5]
type = veladd
trigger1 = parent, stateno = 3880
trigger1 = parent, var(3) < 380
x = 6.2

[State 5]
type = velmul
trigger1 = parent, movetype = H
x = 1.5
y = 1.5

[State 5]
type = velmul
trigger1 = parent, stateno = 3878
trigger1 = parent, time < 2
x = 1.2
y = 1.2

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 15
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.70, .70, .70
Timegap = 1
FrameGap = 1
Trans = add

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Dissipate]
type = destroyself
trigger1 = time > 100 && parent, stateno != 3880
trigger2 = parent, stateno = 3880 && frontedgedist < -10


;==============================================================================================
[Statedef 3868]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12060
sprpriority = 5
juggle = 10

[State 3]
type = HitDef
trigger1 = parent, stateno = 3878
trigger1 = parent, time > 10
attr = S, HP
p2facing = 1 
damage = 0, 0
getpower = 0, 0
givepower = 0
guardflag = MA
hitflag = MAFD
priority = 2, Hit
pausetime = 0, 10
sparkno = 1
sparkxy = -10, -50
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.Velocity = 0
kill = 0
fall.recover = 0
fall.recovertime = 120

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
time = -1
value = SCA, AP
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1012
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 46
range = -200, 200

[State Randomizer]
type = varrandom
trigger1 = 1
v = 47
range = -300, 50

[State 5]
type = posset
trigger1 = time = 0
x = var(46)
y = var(47)

[State 5]
type = veladd
triggerall = parent, stateno != 3880
trigger1 = vel x < 7 && parentdist x >= 28
x = 1

[State 5]
type = veladd
triggerall = parent, stateno != 3880
trigger1 = vel x > -7 && parentdist x < 28
x = -1

[State 5]
type = veladd
trigger1 = vel Y < 7 && parentdist y >= 63
y = 1

[State 5]
type = veladd
trigger1 = vel Y> -7 && parentdist y < 63
y = -1

[State 5]
type = velset
trigger1 = parent, stateno = 3880
trigger1 = parent, var(3) < 380
x = 6

[State 5]
type = veladd
trigger1 = parent, stateno = 3880
trigger1 = parent, var(3) < 380
x = 6.2

[State 5]
type = velmul
trigger1 = parent, movetype = H
trigger2 = parent, stateno = 3878
trigger2 = parent, var(3) >= 380
trigger3 = parent, stateno = 3880
trigger3 = parent, var(3) >= 380
x = 1.8
y = 1.8

[State 5]
type = velmul
trigger1 = parent, stateno = 3878
trigger1 = parent, time < 2
x = 1.4
y = 1.4

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 15
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.70, .70, .70
Timegap = 1
FrameGap = 1
Trans = add

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Dissipate]
type = destroyself
trigger1 = time > 100 && parent, stateno != 3880
trigger2 = parent, stateno = 3880 && frontedgedist < -10


;==============================================================================================
[Statedef 3867]
type = S
movetype = A
physics = N
ctrl = 0
anim = 12060
sprpriority = 5
juggle = 10

[State 3]
type = HitDef
trigger1 = parent, stateno = 3878
trigger1 = parent, time > 10
attr = S, HP
p2facing = 1 
damage = 0, 0
getpower = 0, 0
givepower = 0
guardflag = MA
hitflag = MAFD
priority = 2, Hit
pausetime = 0, 15
sparkno = 1
sparkxy = -10, -50
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.Velocity = 0
kill = 0
fall.recover = 0
fall.recovertime = 120

[State Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
time = -1
value = SCA, AP
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1012
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 46
range = -200, 200

[State Randomizer]
type = varrandom
trigger1 = 1
v = 47
range = -300, 50

[State 5]
type = posset
trigger1 = time = 0
x = var(46)
y = var(47)

[State 5]
type = veladd
triggerall = parent, stateno != 3880
trigger1 = vel x < 5 && parentdist x >= 28
x = 1

[State 5]
type = veladd
triggerall = parent, stateno != 3880
trigger1 = vel x > -5 && parentdist x < 28
x = -1

[State 5]
type = veladd
trigger1 = vel Y < 5 && parentdist y >= 63
y = 1

[State 5]
type = veladd
trigger1 = vel Y> -5 && parentdist y < 63
y = -1

[State 5]
type = velset
trigger1 = parent, stateno = 3880
trigger1 = parent, var(3) < 380
x = 6

[State 5]
type = veladd
trigger1 = parent, stateno = 3880
trigger1 = parent, var(3) < 380
x = 6.2

[State 5]
type = velmul
trigger1 = parent, movetype = H
trigger2 = parent, stateno = 3878
trigger2 = parent, var(3) >= 380
trigger3 = parent, stateno = 3880
trigger3 = parent, var(3) >= 380
x = 1.8
y = 1.8

[State 5]
type = velmul
trigger1 = parent, stateno = 3878
trigger1 = parent, time < 2
x = 1.4
y = 1.4

[State 0]
type = VarSet
trigger1 = hitcount = 1
persistent = 0
v = 11
value = 50

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 15
PalBright = 1, 1, 1
PalContrast = 25, 155, 255
PalAdd = 0, 0, 0
PalMul = 0.70, .70, .70
Timegap = 1
FrameGap = 1
Trans = add

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State Dissipate]
type = destroyself
trigger1 = time > 250 && parent, stateno != 3880
trigger2 = parent, stateno = 3880 && frontedgedist < -10
trigger3 = parent, stateno = 3880 && backedgedist < 10


;==============================================================================================
[Statedef 3875]
type = S
movetype = A
physics = S
juggle = 0
ctrl = 0
anim = 3906
velset = 0, 0
sprpriority = 2
poweradd = -3000

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = 1
stateno = 13875
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1]
type = envcolor
trigger1 = movehit
value = 255, 255, 255
under = 1
ignorehitpause = 1
persistent = 0
time = 1

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 4]
type = HitDef
trigger1 = time >= 5
attr = S, HA
damage = 30, 4
animtype = Hard
getpower = 0, 0
givepower = 15
priority = 1, Hit
hitflag = MAF
guardflag = MA
pausetime = 30, 20
sparkxy = -10, -80
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S2, 8
guardsound = S0, 100
guard.velocity = -5
ground.type = High
air.type = Low
fall.animtype = Hard
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -1, -7
air.velocity = -1, -7
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State Shinryuken]
type = PlaySnd
trigger1 = numhelper(2502)
trigger1 = (gametime%15) = 1
persistent = 1
ignorehitpause = 1
value = 2, 7

[State Randomizer1]
type = varrandom
trigger1 = 1
v = 51
range = -2, -4

[State FireB]
type = Explod
trigger1 = random <= 300 && time > 10
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 6, -6
random = 95, 10
sprpriority = 5
ownpal = 1
vel = 0, (var(51))
scale = 0.1, 0.75
accel = 0, (var(51))/10

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -4, -8

[State FireB]
type = Explod
trigger1 = random <= 300 && time > 10
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 6, -6
random = 65, 10
sprpriority = 5
ownpal = 1
vel = 0, (var(35))
scale = 0.1, 0.75
accel = 0, (var(35))/10

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 37
range = -20, -60

[State FireB]
type = Helper
triggerall = random <= 600 && time > 10
trigger1 = numhelper(2502) < 1
ignorehitpause = 1
stateno = ifelse(random>500, 94061, 94062)
id = 2502
size.xscale = 0.4
size.yscale = 0.5
postype = p1
pos = 0, var(37)
sprpriority = 2
ownpal = 1

[State FireB]
type = Helper
triggerall = random <= 600 && time > 10
trigger1 = numhelper(2503) < 1
ignorehitpause = 1
stateno = 94063
id = 2503
postype = p1
pos = 0, 0
sprpriority = 2
ownpal = 1

[State Sound]
type = playsnd
trigger1 = time = 10
value = 8, 4
volume = 999

[State Sound]
type = playsnd
trigger1 = time = 10
value = 8, 4
volume = 999

[State hadouken hit helper]
type = Helper
trigger1 = time > 10 && timemod = 9, 8
helpertype = normal
name = "plasma"
pos = 300, 300
postype = p1
stateno =3869
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State Randomizer]
type = varrandom
trigger1 = time = 0
v = 46
range = 0, 100

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 29
length = 21
PalBright = 0, 0, 0
PalContrast = 148, 148, 148
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State red fadeout]
type = BGPalFx
triggerall = var(28) = 0
trigger1 = animelem = 1
add = 100, 100, 100
mul = 200, 200, 300
sinadd = 100, 100, 100, 390
time = 55
ignorehitpause = 1
invertall = 1

[State red fadein]
type = BGPalFx
triggerall = var(28) = 1
trigger1 = animelem = 1
add = 100, 100, 150
sinadd = 305, -255, -355, 180
time = 32
invertall = 1
ignorehitpause = 1

[State white fadein]
type = BGPalFx
triggerall = var(28) > 1
trigger1 = animelem = 1
add = 255, -155, -155
sinadd = -255, -255, -255, 180
time = 32
ignorehitpause = 1
invertall = 1

[State Freeze]
type = superpause
trigger1 = !time
anim = S ifelse(var(28) > 0, 10061, 10060)
time = ifelse(var(28) > 0, 32, 55)
pos = -27, -60
movetime = 4
sprpriority = 3
p2defmul = 1
darken = 0
sound = S1, 7

[State Wind effect] 
type = Explod
triggerall = var(28) = 0
trigger1 = animelem = 1
anim = 9402
scale = 0.7, 0.7
pos = 0, 0
sprpriority = 0
postype = p1
supermovetime = -1
bindtime = 18
ownpal = 1
pausemovetime = 9999

[State SuperLight charge for hadouken] 
type = Explod
trigger1 = animelem = 1
anim = ifelse(var(28) > 0, 10087, 10086)
pos = -27, -60
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 65
ownpal = 1
scale = 0.5, 0.5
pausemovetime = 9999

[State 0]
type = Varadd
trigger1 = animelem = 1
v = 28
value = 1

[State Shadows]
type = Afterimage
trigger1 = animelem = 1
time = 300
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State 0]
type = Varset
trigger1 = Animtime = 0
v = 28
value = 0

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 2
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 2
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State TimeCountVar]
type = VarSet
trigger1 = time = 0 && var(3) != 0
v = 3
value = 0

[State TimeCount]
type = VarAdd
trigger1 = 1
ignorehitpause = 1
v = 3
value = 1

[State SuperLight charge for hadouken] 
type = Explod
trigger1 = time = 5
anim = 3910
pos = -23, -55
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = -1
ownpal = 1
scale = 0.1, 0.1
pausemovetime = 9999
removeongethit = 1
removetime = -1
id = 3910

[State 0]
type = ModifyExplod
trigger1 = 1
ID = 3910
scale = 0.1 + (0.00025*var(3)), 0.1 + (0.00025*var(3))

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd" && time > 10 && !AILevel
trigger2 = AILevel && time > 10 && p2bodydist x > 5
x = 1.5

[State 20, 2]
type = VelSet
trigger1 = command = "holdback" && time > 10 && !AILevel
trigger2 = AILevel && time > 10 && p2bodydist x < -10
x = -1.5

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0 && time > 10
trigger1 = Anim != 3920 && Anim != 5
trigger2 = Anim = 5 && Animtime = 0
value = 3920

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0 && time > 10
trigger1 = Anim != 3921 && Anim != 5
trigger2 = Anim = 5 && Animtime = 0
value = 3921

[State 20, 4]
type = ChangeAnim
triggerall = vel x = 0 && time > 10
trigger1 = Anim != 3906 && Anim != 5
value = 3906
elem = 2

[State 0]
type = Varadd
trigger1 = time = 0
v = 28
value = 1

[State 0]
type = ModifyExplod
trigger1 = anim != 3906
trigger2 = command = "holdfwd"
trigger3 = command = "holdback"
ID = 3910
postype = p1
pos = -23, -60

[State 0]
type = ModifyExplod
trigger1 = anim = 3906
ID = 3910
postype = p1
pos = -23, -55

[State 9]
type = ChangeState
trigger1 = Var(3) >= 140
ignorehitpause = 1
value = 3876
ctrl = 0

[State 9]
type = ChangeState
trigger1 = time > 50 && !AILevel
trigger1 = command != "hold_x" && command != "hold_y" && command != "hold_z"
ignorehitpause = 1
value = 3880
ctrl = 0

[State Removeburstknuckle]
type = RemoveExplod
trigger1 = Var(3) >= 140
trigger2 = time > 50
trigger2 = command != "hold_x" && command != "hold_y" && command != "hold_z"
id = 3910


;==============================================================================================
[Statedef 13875]
type = S
movetype = A
physics = S
juggle = 0
ctrl = 0
sprpriority = 2

[State CounterSound]
type = PlaySnd
trigger1 = time = 0
value = 8, 5
volume = 255
freqmul = 0.5

[State 4]
type = explod
trigger1 = time = 0
anim = 2102
id = 9400
postype = p1
pos = 3, -46
sprpriority = 3
ownpal = 1
pausemovetime = -1

[State hadouken hit helper]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "hadouken"
id = 12
pos = 0, -54
postype = p1
stateno =13880
ownpal = 1
size.xscale = 0.2
size.yscale = 0.2

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = 1
stateno = 13875
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1]
type = envcolor
trigger1 = movehit
value = 255, 255, 255
under = 1
ignorehitpause = 1
persistent = 0
time = 1

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 4]
type = HitDef
trigger1 = time > 10
attr = S, HA
damage = 30, 10
animtype = Hard
getpower = 0, 0
givepower = 15
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 30, 20
sparkxy = -10, -80
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S2, 8
guardsound = S0, 100
guard.velocity = -5
ground.type = High
air.type = Low
fall.animtype = Hard
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -1, -7
air.velocity = -1, -7
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State Shinryuken]
type = PlaySnd
trigger1 = numhelper(2502) > 0
trigger1 = (gametime%15) = 1
persistent = 1
ignorehitpause = 1
value = 2, 7

[State Randomizer1]
type = varrandom
trigger1 = 1
v = 51
range = -2, -4

[State FireB]
type = Explod
trigger1 = random <= 300 && time > 10
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 6, -6
random = 95, 10
sprpriority = 5
ownpal = 1
vel = 0, (var(51))
scale = 0.1, 0.75
accel = 0, (var(51))/10

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -4, -8

[State FireB]
type = Explod
trigger1 = random <= 300 && time > 10
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 6, -6
random = 65, 10
sprpriority = 5
ownpal = 1
vel = 0, (var(35))
scale = 0.1, 0.75
accel = 0, (var(35))/10

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 37
range = -20, -60

[State FireB]
type = Helper
triggerall = random <= 600 && time > 10
trigger1 = numhelper(2502) < 1
ignorehitpause = 1
stateno = ifelse(random>500, 94061, 94062)
id = 2502
size.xscale = 0.4
size.yscale = 0.5
postype = p1
pos = 0, var(37)
sprpriority = 2
ownpal = 1

[State FireB]
type = Helper
triggerall = random <= 600 && time > 10
trigger1 = numhelper(2503) < 1
ignorehitpause = 1
stateno = 94063
id = 2503
postype = p1
pos = 0, 0
sprpriority = 2
ownpal = 1

[State Sound]
type = playsnd
trigger1 = time = 10
value = 8, 4
volume = 999

[State Sound]
type = playsnd
trigger1 = time = 10
value = 8, 4
volume = 999

[State hadouken hit helper]
type = Helper
trigger1 = time > 10 && timemod = 9, 8
helpertype = normal
name = "plasma"
pos = 300, 300
postype = p1
stateno =3869
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State Randomizer]
type = varrandom
trigger1 = time = 0
v = 46
range = 0, 100

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 29
length = 21
PalBright = 0, 0, 0
PalContrast = 148, 148, 148
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State red fadeout]
type = BGPalFx
triggerall = var(28) = 0
trigger1 = animelem = 1
add = 100, 100, 100
mul = 200, 200, 300
sinadd = 100, 100, 100, 390
time = 55
ignorehitpause = 1
invertall = 1

[State red fadein]
type = BGPalFx
triggerall = var(28) = 1
trigger1 = animelem = 1
add = 100, 100, 150
sinadd = 305, -255, -355, 180
time = 32
invertall = 1
ignorehitpause = 1

[State white fadein]
type = BGPalFx
triggerall = var(28) > 1
trigger1 = animelem = 1
add = 255, -155, -155
sinadd = -255, -255, -255, 180
time = 32
ignorehitpause = 1
invertall = 1

[State Freeze]
type = superpause
trigger1 = animelem = 1
anim = S ifelse(var(28) > 0, 10061, 10060)
time = ifelse(var(28) > 0, 32, 55)
pos = -27, -60
movetime = 4
p2defmul = 1
darken = 0
sound = S1, 7

[State Wind effect] 
type = Explod
triggerall = var(28) = 0
trigger1 = animelem = 1
anim = 9402
scale = 0.7, 0.7
pos = 0, 0
sprpriority = 0
postype = p1
supermovetime = -1
bindtime = 18
ownpal = 1
pausemovetime = 9999

[State SuperLight charge for hadouken] 
type = Explod
trigger1 = animelem = 1
anim = ifelse(var(28) > 0, 10087, 10086)
pos = -27, -60
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 65
ownpal = 1
scale = 0.5, 0.5
pausemovetime = 9999

[State Shadows]
type = Afterimage
trigger1 = animelem = 1
time = 300
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 2
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 2
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State TimeCount]
type = VarAdd
trigger1 = 1
ignorehitpause = 1
v = 3
value = 1

[State SuperLight charge for hadouken] 
type = Explod
trigger1 = time = 5
anim = 3910
pos = -23, -55
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = -1
ownpal = 1
scale = 0.1, 0.1
pausemovetime = 9999
removeongethit = 1
removetime = -1
id = 3910

[State 0]
type = ModifyExplod
trigger1 = 1
ID = 3910
scale = 0.1 + (0.00025*var(3)), 0.1 + (0.00025*var(3))

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd" && time > 10 && !AILevel
trigger2 = AILevel && time > 10 && p2bodydist x > 5
x = 1.5

[State 20, 2]
type = VelSet
trigger1 = command = "holdback" && time > 10 && !AILevel
trigger2 = AILevel && time > 10 && p2bodydist x < -10
x = -1.5

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0 && time > 10
trigger1 = Anim != 3920 && Anim != 5
trigger2 = Anim = 5 && Animtime = 0
value = 3920

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0 && time > 10
trigger1 = Anim != 3921 && Anim != 5
trigger2 = Anim = 5 && Animtime = 0
value = 3921

[State 20, 4]
type = ChangeAnim
triggerall = vel x = 0 && time > 10
trigger1 = Anim != 3906 && Anim != 5
value = 3906
elem = 2

[State 0]
type = Varadd
trigger1 = time = 0
v = 28
value = 1

[State 0]
type = ModifyExplod
trigger1 = anim != 3906
trigger2 = command = "holdfwd"
trigger3 = command = "holdback"
ID = 3910
postype = p1
pos = -23, -60

[State 0]
type = ModifyExplod
trigger1 = anim = 3906
ID = 3910
postype = p1
pos = -23, -55

[State 9]
type = ChangeState
trigger1 = Var(3) >= 140
ignorehitpause = 1
persistent = 1
value = 3876
ctrl = 0

[State 9]
type = ChangeState
trigger1 = time > 50 && !AILevel
trigger1 = command != "hold_x" && command != "hold_y" && command != "hold_z"
ignorehitpause = 1
value = 3880
ctrl = 0

[State Removeburstknuckle]
type = RemoveExplod
trigger1 = Var(3) >= 140
trigger2 = time > 50
trigger2 = command != "hold_x" && command != "hold_y" && command != "hold_z"
id = 3910


;==============================================================================================
[Statedef 13876]
type = S
movetype = A
physics = S
juggle = 0
sprpriority = 2

[State CounterSound]
type = PlaySnd
trigger1 = time = 0
value = 8, 5
volume = 255
freqmul = 0.5

[State 4]
type = explod
trigger1 = time = 0
anim = 2102
id = 9400
postype = p1
pos = 3, -46
sprpriority = 3
ownpal = 1
pausemovetime = -1

[State hadouken hit helper]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "hadouken"
id = 12
pos = 0, -54
postype = p1
stateno =13880
ownpal = 1
size.xscale = 0.2
size.yscale = 0.2

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = 1
stateno = 13876
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State Sound]
type = playsnd
trigger1 = time = 10
value = 8, 4
volume = 999

[State Sound]
type = playsnd
trigger1 = time = 10
value = 8, 4
volume = 999

[State 1]
type = envcolor
trigger1 = movehit
value = 255, 255, 255
under = 1
ignorehitpause = 1
persistent = 0
time = 1

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 4]
type = HitDef
trigger1 = 1
attr = S, HA
damage = 30, 10
animtype = Hard
getpower = 0, 0
givepower = 15
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 30, 20
sparkxy = -10, -80
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S2, 8
guardsound = S0, 100
guard.velocity = -5
ground.type = High
air.type = Low
fall.animtype = Hard
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -1, -8
air.velocity = -1, -8
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State Shinryuken]
type = PlaySnd
trigger1 = numhelper(2502) > 0
trigger1 = (gametime%15) = 1
persistent = 1
ignorehitpause = 1
value = 2, 7

[State Randomizer1]
type = varrandom
trigger1 = 1
v = 51
range = -3, -5

[State FireB]
type = Explod
trigger1 = random <= 300
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 6, -6
random = 95, 10
sprpriority = 5
ownpal = 1
vel = 0, (var(51))
scale = 0.1, 0.75
accel = 0, (var(51))/10

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -5, -9

[State FireB]
type = Explod
trigger1 = random <= 600
persistent = 1
anim = ifelse(random>300, 12213, 12214)
id = 12213
postype = p1
pos = 6, -6
random = 65, 10
sprpriority = 5
ownpal = 1
vel = 0, (var(35))
scale = 0.1, 0.75
accel = 0, (var(35))/10

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 37
range = -20, -60

[State FireB]
type = Helper
triggerall = random <= 600
trigger1 = numhelper(2502) < 1
ignorehitpause = 1
stateno = ifelse(random>500, 94061, 94062)
id = 2502
size.xscale = 0.4
size.yscale = 0.5
postype = p1
pos = 0, var(37)
sprpriority = 2
ownpal = 1

[State FireB]
type = Helper
triggerall = random <= 600
trigger1 = numhelper(2503) < 1
ignorehitpause = 1
stateno = 94063
id = 2503
postype = p1
pos = 0, 0
sprpriority = 2
ownpal = 1

[State 0]
type = ModifyExplod
trigger1 = 1
ID = 3910
scale = 0.1 + (0.00025*var(3)), 0.1 + (0.00025*var(3))
removetime = -1

[State hadouken hit helper]
type = Helper
trigger1 = timemod = 8, 7
helpertype = normal
name = "plasma"
pos = 300, 300
postype = p1
stateno =3868
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State TimeCount]
type = VarAdd
trigger1 = 1
ignorehitpause = 1
v = 3
value = 1

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd" && !AILevel
trigger2 = AILevel && time > 10 && p2bodydist x > 5
x = 1.5

[State 20, 2]
type = VelSet
trigger1 = command = "holdback" && !AILevel
trigger2 = AILevel && time > 10 && p2bodydist x < -10
x = -1.5

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 3930 && Anim != 5
trigger2 = Anim = 5 && Animtime = 0
value = 3930

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 3931 && Anim != 5
trigger2 = Anim = 5 && Animtime = 0
value = 3931

[State 20, 4]
type = ChangeAnim
triggerall = vel x = 0
trigger1 = Anim != 3907 && Anim != 5
value = 3907

[State 0]
type = ModifyExplod
trigger1 = anim != 3907
trigger2 = command = "holdfwd"
trigger3 = command = "holdback"
ID = 3910
postype = p1
pos = -23, -60

[State 0]
type = ModifyExplod
trigger1 = anim = 3907
ID = 3910
postype = p1
pos = -23, -55

[State 0]
type = Varadd
trigger1 = time = 0
v = 28
value = 1

[State 9]
type = ChangeState
trigger1 = Var(3) >= 270
ignorehitpause = 1
value = 3877
ctrl = 0

[State 9]
type = ChangeState
trigger1 = time > 50 && !AILevel
trigger1 = command != "hold_x" && command != "hold_y" && command != "hold_z"
ignorehitpause = 1
value = 3880
ctrl = 0

[State Removeburstknuckle]
type = RemoveExplod
trigger1 = command != "hold_x" && command != "hold_y" && command != "hold_z"
id = 3910


;==============================================================================================
[Statedef 3876]
type = S
movetype = A
physics = S
juggle = 0
anim = 3907
velset = 0, 0
sprpriority = 2

[State Flash]
type = palfx
trigger1 = !time
trigger1 = prevstateno = 3875
add = 255, 255, 255
sinadd = -255, -255, -255, 128
time = 32

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = 1
stateno = 13876
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State Sound]
type = playsnd
trigger1 = time = 10
value = 8, 4
volume = 999

[State Sound]
type = playsnd
trigger1 = time = 10
value = 8, 4
volume = 999

[State 1]
type = envcolor
trigger1 = movehit
value = 255, 255, 255
under = 1
ignorehitpause = 1
persistent = 0
time = 1

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 4]
type = HitDef
trigger1 = 1
attr = S, HA
damage = 30, 10
animtype = Hard
getpower = 0, 0
givepower = 15
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 30, 20
sparkxy = -10, -80
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S2, 8
guardsound = S0, 100
guard.velocity = -5
ground.type = High
air.type = Low
fall.animtype = Hard
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -1, -8
air.velocity = -1, -8
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State Shinryuken]
type = PlaySnd
trigger1 = numhelper(2502) > 0
trigger1 = (gametime%15) = 1
persistent = 1
ignorehitpause = 1
value = 2, 7

[State Randomizer1]
type = varrandom
trigger1 = 1
v = 51
range = -3, -5

[State FireB]
type = Explod
trigger1 = random <= 300
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 6, -6
random = 95, 10
sprpriority = 5
ownpal = 1
vel = 0, (var(51))
scale = 0.1, 0.75
accel = 0, (var(51))/10

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -5, -9

[State FireB]
type = Explod
trigger1 = random <= 600
persistent = 1
anim = ifelse(random>300, 12213, 12214)
id = 12213
postype = p1
pos = 6, -6
random = 65, 10
sprpriority = 5
ownpal = 1
vel = 0, (var(35))
scale = 0.1, 0.75
accel = 0, (var(35))/10

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 37
range = -20, -60

[State FireB]
type = Helper
triggerall = random <= 600
trigger1 = numhelper(2502) < 1
ignorehitpause = 1
stateno = ifelse(random>500, 94061, 94062)
id = 2502
size.xscale = 0.4
size.yscale = 0.5
postype = p1
pos = 0, var(37)
sprpriority = 2
ownpal = 1

[State FireB]
type = Helper
triggerall = random <= 600
trigger1 = numhelper(2503) < 1
ignorehitpause = 1
stateno = 94063
id = 2503
postype = p1
pos = 0, 0
sprpriority = 2
ownpal = 1

[State 0]
type = ModifyExplod
trigger1 = 1
ID = 3910
scale = 0.1 + (0.00025*var(3)), 0.1 + (0.00025*var(3))
removetime = -1

[State hadouken hit helper]
type = Helper
trigger1 = timemod = 8, 7
helpertype = normal
name = "plasma"
pos = 300, 300
postype = p1
stateno =3868
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State TimeCount]
type = VarAdd
trigger1 = 1
ignorehitpause = 1
v = 3
value = 1

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd" && !AILevel
trigger2 = AILevel && time > 10 && p2bodydist x > 5
x = 1.5

[State 20, 2]
type = VelSet
trigger1 = command = "holdback" && !AILevel
trigger2 = AILevel && time > 10 && p2bodydist x < -10
x = -1.5

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 3930 && Anim != 5
trigger2 = Anim = 5 && Animtime = 0
value = 3930

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 3931 && Anim != 5
trigger2 = Anim = 5 && Animtime = 0
value = 3931

[State 20, 4]
type = ChangeAnim
triggerall = vel x = 0
trigger1 = Anim != 3907 && Anim != 5
value = 3907

[State 0]
type = ModifyExplod
trigger1 = anim != 3907
trigger2 = command = "holdfwd"
trigger3 = command = "holdback"
ID = 3910
postype = p1
pos = -23, -60

[State 0]
type = ModifyExplod
trigger1 = anim = 3907
ID = 3910
postype = p1
pos = -23, -55

[State 0]
type = Varadd
trigger1 = time = 0
v = 28
value = 1

[State 9]
type = ChangeState
trigger1 = Var(3) >= 270
ignorehitpause = 1
value = 3877
ctrl = 0

[State 9]
type = ChangeState
triggerall = !AILevel
trigger1 = command != "hold_x" && command != "hold_y" && command != "hold_z"
ignorehitpause = 1
value = 3880
ctrl = 0

[State Removeburstknuckle]
type = RemoveExplod
trigger1 = command != "hold_x" && command != "hold_y" && command != "hold_z"
id = 3910


;==============================================================================================
[Statedef 3877]
type = S
movetype = A
physics = S
juggle = 0
anim = 3908
velset = 0, 0
sprpriority = 2

[State Flash]
type = palfx
trigger1 = !time
trigger1 = prevstateno = 3876
add = 255, 255, 255
sinadd = -255, -255, -255, 128
time = 32

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = 1
stateno = 13877
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 0]
type = Varadd
trigger1 = time = 0
v = 28
value = 1

[State Wind effect] 
type = Explod
trigger1 = (gametime%25) = 1
anim = 9402
scale = 0.7, 0.7
pos = 0, 0
sprpriority = 0
postype = p1
supermovetime = -1
ownpal = 1
pausemovetime = 9999

[State 1]
type = envcolor
trigger1 = movehit
value = 255, 255, 255
under = 1
ignorehitpause = 1
persistent = 0
time = 1

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 4]
type = HitDef
trigger1 = 1
attr = S, HA
damage = 30, 10
animtype = Hard
getpower = 0, 0
givepower = 15
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 30, 20
sparkxy = -10, -80
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S2, 8
guardsound = S0, 100
ground.type = High
guard.velocity = -5
air.type = Low
fall.animtype = Hard
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -1, -9
air.velocity = -1, -9
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State Shinryuken]
type = PlaySnd
trigger1 = numhelper(2502) > 0
trigger1 = (gametime%15) = 1
persistent = 1
ignorehitpause = 1
value = 2, 7

[State Randomizer1]
type = varrandom
trigger1 = 1
v = 51
range = -4, -6

[State FireB]
type = Explod
trigger1 = random <= 300
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 6, -6
random = 95, 10
sprpriority = 5
ownpal = 1
vel = 0, (var(51))
scale = 0.1, 0.75
accel = 0, (var(51))/10

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -6, -9

[State FireB]
type = Explod
trigger1 = random <= 300
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 6, -6
random = 65, 10
sprpriority = 5
ownpal = 1
vel = 0, (var(35))
scale = 0.1, 0.75
accel = 0, (var(35))/10

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 37
range = -20, -60

[State FireB]
type = Helper
triggerall = random <= 600
trigger1 = numhelper(2502) < 1
ignorehitpause = 1
stateno = ifelse(random>500, 94061, 94062)
id = 2502
size.xscale = 0.4
size.yscale = 0.5
postype = p1
pos = 0, var(37)
sprpriority = 2
ownpal = 1

[State FireB]
type = Helper
triggerall = random <= 600
trigger1 = numhelper(2503) < 1
ignorehitpause = 1
stateno = 94063
id = 2503
postype = p1
pos = 0, 0
sprpriority = 2
ownpal = 1

[State 0]
type = ModifyExplod
trigger1 = 1
ID = 3910
scale = 0.1 + (0.00025*var(3)), 0.1 + (0.00025*var(3))
removetime = -1

[State hadouken hit helper]
type = Helper
trigger1 = timemod = 7, 6
helpertype = normal
name = "plasma"
pos = 300, 300
postype = p1
stateno =3867
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State TimeCount]
type = VarAdd
trigger1 = 1
ignorehitpause = 1
v = 3
value = 1

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = 1.5

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
trigger2 = AILevel
x = -1.5

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 3940 && Anim != 5
trigger2 = Anim = 5 && Animtime = 0
value = 3940

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 3941 && Anim != 5
trigger2 = Anim = 5 && Animtime = 0
value = 3941

[State 20, 4]
type = ChangeAnim
triggerall = vel x = 0
trigger1 = Anim != 3908 && Anim != 5
value = 3908

[State 0]
type = ModifyExplod
trigger1 = anim != 3908
trigger2 = command = "holdfwd"
trigger3 = command = "holdback"
ID = 3910
postype = p1
pos = -23, -60

[State 0]
type = ModifyExplod
trigger1 = anim = 3908
ID = 3910
postype = p1
pos = -23, -55

[State 9]
type = ChangeState
trigger1 = Var(3) >= 370
ignorehitpause = 1
value = 3878
ctrl = 0

[State 9]
type = ChangeState
trigger1 = !AILevel
trigger1 = command != "hold_x" && command != "hold_y" && command != "hold_z"
trigger2 = AILevel && p2dist y = [-50, -20]
trigger2 = target, Vel Y > 0
ignorehitpause = 1
value = 3880
ctrl = 0

[State Removeburstknuckle]
type = RemoveExplod
trigger1 = command != "hold_x" && command != "hold_y" && command != "hold_z"
id = 3910


;==============================================================================================
[Statedef 13877]
type = S
movetype = A
physics = S
juggle = 0
anim = 3908
velset = 0, 0
sprpriority = 2

[State CounterSound]
type = PlaySnd
trigger1 = time = 0
value = 8, 5
volume = 255
freqmul = 0.5

[State 4]
type = explod
trigger1 = time = 0
anim = 2102
id = 9400
postype = p1
pos = 3, -46
sprpriority = 3
ownpal = 1
pausemovetime = -1

[State hadouken hit helper]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "hadouken"
id = 12
pos = 0, -54
postype = p1
stateno =13880
ownpal = 1
size.xscale = 0.2
size.yscale = 0.2

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = 1
stateno = 13877
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 0]
type = Varadd
trigger1 = time = 0
v = 28
value = 1

[State Wind effect] 
type = Explod
trigger1 = (gametime%25) = 1
anim = 9402
scale = 0.7, 0.7
pos = 0, 0
sprpriority = 0
postype = p1
supermovetime = -1
ownpal = 1
pausemovetime = 9999

[State 1]
type = envcolor
trigger1 = movehit
value = 255, 255, 255
under = 1
ignorehitpause = 1
persistent = 0
time = 1

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 4]
type = HitDef
trigger1 = 1
attr = S, HA
damage = 30, 10
animtype = Hard
getpower = 0, 0
givepower = 15
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 30, 20
sparkxy = -10, -80
sparkno = 2
guard.sparkno = 40; S9200
hitsound = S2, 8
guardsound = S0, 100
ground.type = High
guard.velocity = -5
air.type = Low
fall.animtype = Hard
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -1, -9
air.velocity = -1, -9
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State Shinryuken]
type = PlaySnd
trigger1 = numhelper(2502) > 0
trigger1 = (gametime%15) = 1
persistent = 1
ignorehitpause = 1
value = 2, 7

[State Randomizer1]
type = varrandom
trigger1 = 1
v = 51
range = -4, -6

[State FireB]
type = Explod
trigger1 = random <= 300
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 6, -6
random = 95, 10
sprpriority = 5
ownpal = 1
vel = 0, (var(51))
scale = 0.1, 0.75
accel = 0, (var(51))/10

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -6, -9

[State FireB]
type = Explod
trigger1 = random <= 300
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 6, -6
random = 65, 10
sprpriority = 5
ownpal = 1
vel = 0, (var(35))
scale = 0.1, 0.75
accel = 0, (var(35))/10

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 37
range = -20, -60

[State FireB]
type = Helper
triggerall = random <= 600
trigger1 = numhelper(2502) < 1
ignorehitpause = 1
stateno = ifelse(random>500, 94061, 94062)
id = 2502
size.xscale = 0.4
size.yscale = 0.5
postype = p1
pos = 0, var(37)
sprpriority = 2
ownpal = 1

[State FireB]
type = Helper
triggerall = random <= 600
trigger1 = numhelper(2503) < 1
ignorehitpause = 1
stateno = 94063
id = 2503
postype = p1
pos = 0, 0
sprpriority = 2
ownpal = 1

[State 0]
type = ModifyExplod
trigger1 = 1
ID = 3910
scale = 0.1 + (0.00025*var(3)), 0.1 + (0.00025*var(3))
removetime = -1

[State hadouken hit helper]
type = Helper
trigger1 = timemod = 7, 6
helpertype = normal
name = "plasma"
pos = 300, 300
postype = p1
stateno =3867
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State TimeCount]
type = VarAdd
trigger1 = 1
ignorehitpause = 1
v = 3
value = 1

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = 1.5

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
trigger2 = AILevel
x = -1.5

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 3940 && Anim != 5
trigger2 = Anim = 5 && Animtime = 0
value = 3940

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 3941 && Anim != 5
trigger2 = Anim = 5 && Animtime = 0
value = 3941

[State 20, 4]
type = ChangeAnim
triggerall = vel x = 0
trigger1 = Anim != 3908 && Anim != 5
value = 3908

[State 0]
type = ModifyExplod
trigger1 = anim != 3908
trigger2 = command = "holdfwd"
trigger3 = command = "holdback"
ID = 3910
postype = p1
pos = -23, -60

[State 0]
type = ModifyExplod
trigger1 = anim = 3908
ID = 3910
postype = p1
pos = -23, -55

[State 9]
type = ChangeState
trigger1 = Var(3) >= 370
ignorehitpause = 1
value = 3878
ctrl = 0

[State 9]
type = ChangeState
trigger1 = !AILevel
trigger1 = command != "hold_x" && command != "hold_y" && command != "hold_z"
trigger2 = AILevel && p2dist y = [-50, -20]
trigger2 = target, Vel Y > 0
ignorehitpause = 1
value = 3880
ctrl = 0

[State Removeburstknuckle]
type = RemoveExplod
trigger1 = command != "hold_x" && command != "hold_y" && command != "hold_z"
id = 3910


;==============================================================================================
[Statedef 3878]
type = S
movetype = A
physics = S
juggle = 0
anim = 3908
velset = 0, 0
sprpriority = 2

[State Flash]
type = palfx
trigger1 = !time
trigger1 = prevstateno = 3877
add = 255, 255, 255
sinadd = -255, -255, -255, 64
time = 16

[State white fadeout]
type = BGPalFx
trigger1 = time = 0
add = 255, 255, 255
sinadd = -255, -255, -255, 48
time = 12
ignorehitpause = 1
persistent = 0

[State SuperLight charge for hadouken] 
type = Explod
trigger1 = time = 0
anim = 3911
pos = -29, -63
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 65
ownpal = 1
pausemovetime = 9999

[State Slow Motion]
type = Pause 
trigger1 = roundstate = 2 && p2life > 0
time = 2
ignorehitpause = 1

[State charge sound]
type = playsnd
trigger1 = time = 0
value = 8, 2
volume = 999

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Randomizer1]
type = varrandom
trigger1 = 1
v = 51
range = -2, -7

[State FireB]
type = Explod
trigger1 = random <= 600
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 6, -6
random = 95, 10
sprpriority = 5
ownpal = 1
vel = 0, (var(51))
scale = 0.1, 0.75
accel = 0, (var(51))/10

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -7, -10

[State FireB]
type = Explod
trigger1 = random <= 600
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 6, -6
random = 65, 10
sprpriority = 5
ownpal = 1
vel = 0, (var(35))
scale = 0.1, 0.75
accel = 0, (var(35))/10

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 37
range = -20, -60

[State 0]
type = ModifyExplod
trigger1 = time < 10
ID = 3910
scale = 0.1 + (0.00025*var(3)), 0.1 + (0.00025*var(3))

[State 0]
type = ModifyExplod
trigger1 = time >= 10
ID = 3910
scale = 0.1 - (0.00025*var(3)), 0.1 - (0.00025*var(3))

[State TimeCount]
type = VarAdd
trigger1 = 1
ignorehitpause = 1
v = 3
value = 1

[State 0]
type = ModifyExplod
trigger1 = anim != 3908
trigger2 = command = "holdfwd"
trigger3 = command = "holdback"
ID = 3910
postype = p1
pos = -23, -60

[State 0]
type = ModifyExplod
trigger1 = anim = 3908
ID = 3910
postype = p1
pos = -23, -55

[State X-Ism]
type = PlaySnd
trigger1 = Var(3) = 390
persistent = 0
value = 0, 9
volume = 200
freqmul = 0.8

[State 9]
type = ChangeState
trigger1 = Var(3) >= 390
ignorehitpause = 1
value = 3880
ctrl = 0

[State Removeburstknuckle]
type = RemoveExplod
trigger1 = Var(3) >= 380
id = 3910


;==============================================================================================
[Statedef 3886]
type = S
movetype = A
physics = S
juggle = 0
ctrl = 0
anim = 3960
velset = 0, 0

[State 5]
type = Screenbound
trigger1 = 1
movecamera = 0, 0
value = 0

[State 2]
type = Playsnd
trigger1 = time = 0
value = 4, 5

[State 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State Shadows]
type = Afterimage
triggerall = var(10) = 0
trigger1 = time = 0
time = 300
length = 21
PalBright = 0, 0, 0
PalContrast = 128, 128, 128
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = add1

[State 6]
type = Velset
trigger1 = time = 0
x = 3

[State 6]
type = Velset
trigger1 = animelem = 5
x = -3

[State 3]
type = ChangeState
trigger1 = Animtime = 0
value = 3887


;==============================================================================================
[Statedef 3887]
type = S
movetype = A
physics = N
juggle = 0
poweradd = (Var(10)=0) * 0
ctrl = 0
anim = 3961
velset = 9, 0

[State 5]
type = Screenbound
trigger1 = 1
movecamera = 0, 0
value = 0

[State 2]
type = Width
trigger1 = 1
value = 10, 0

[State 5]
type = PlaySnd
trigger1 = time = 0
value = 2, 4
volume = 255

[State 2]
type = Playsnd
trigger1 = time = 0
value = 21, 6

[State 2]
type = Turn
trigger1 = p2dist x < 0

[State 6]
type = sprpriority
trigger1 = 1
value = 1

[State 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1]
type = AfterImageTime
triggerall = var(10) = 0
trigger1 = backedgedist > 10
time = 0

[State 6]
type = sprpriority
trigger1 = time = 33
trigger2 = frontedgedist <= 10
trigger3 = backedgedist <= 0
trigger3 = time > 4
value = 0

[State 3]
type = velset
trigger1 = backedgedist > 50
x = 0

[State 3]
type = ChangeState
trigger1 = backedgedist > 50
value = 3962
ctrl = 0


;==============================================================================================
[Statedef 3962]
type = S
physics = S
movetype = I
ctrl = 0
anim = 3962
sprpriority = -1

[State HB]
type = HitBy
trigger1 = !time
value = SCA, AA, AP, AT
time = 0

[State 2]
type = NotHitBy
trigger1 = prevstateno = 3887
value = SCA
time = 1

[State 52, 1]
type = VelSet
trigger1 = time = 0
y = 0

[State 52, 3]
type = PosSet
trigger1 = time = 0
y = 0

[State 52, 4]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 3930]
type = A
movetype = A
poweradd = (Var(10)=0) * -1000
anim = 3900
velset = 0, 0
ctrl = 0
sprpriority = 1
juggle = 0
facep2 = 0

[State Pos Fix]
type = posset
trigger1 = time = 0
trigger1 = pos y > 0
y = 0

[State hadouken hit helper]
type = Helper
triggerall = time = 50
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
helpertype = normal
ignorehitpause = 1
persistent = 0
name = "Foot flash!"
id = 6
pos = 0, 0
postype = p1
stateno =10672
ownpal = 1
shadow = 0
facing = -1
pausemovetime = 9999
supermovetime = 9999

[State 1]
type = palfx
triggerall = time = 17
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
ignorehitpause = 1
time = 186
add = 0, 0, 0
sinadd = 10, 10, 100, 800

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -8, -10

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 36
range = 4, 10

[State FireB]
type = Explod
triggerall = time > 45 && random <= (50 + 1.5*time)
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 30, -10
random = 35, 10
sprpriority = 5
ownpal = 1
vel = var(36), (var(35))
scale = 0.1, 0.75
accel = -(var(36))/3, (var(35))/10
supermovetime = 9999
pausemovetime = 9999

[State Randomizer4]
type = varrandom
trigger1 = 1
v = 37
range = -8, -10

[State Randomizer5]
type = varrandom
trigger1 = 1
v = 38
range = -4, -10

[State FireB]
type = Explod
triggerall = time > 45 && random <= (50 + 1.5*time)
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
persistent = 1
anim = ifelse(random>500, 12213, 12216)
id = 12213
postype = p1
pos = -30, -10
random = 35, 10
sprpriority = 5
ownpal = 1
vel = var(38), (var(37))
scale = 0.1, 0.75
accel = -(var(38))/4, (var(37))/10
supermovetime = 9999
pausemovetime = 9999

[State NHB]
type = NotHitBy
trigger1 = Time < 24
trigger2 = var(46) >= 90 || var(28) >= 3
trigger2 = Time < 204
value = SCA
time = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = 15, 25

[State 1]
type = ChangeAnim
triggerall = time = 17
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
value = 3902

[State 0]
type = ModifyExplod
trigger1 = 1
ID = 12212
scale = 1, 1 + (0.025*time)

[State FireBa1]
type = Explod
triggerall = time > 45 && random <= (50 + 1.5*time)
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
persistent = 1
anim = 12212
id = 12212
postype = p1
pos = 0, 86
random = 70, 30
sprpriority = ifelse(random>500, 5, -5)
ownpal = 1
vel = 0, (-1 -(time)/10)
scale = 1, 1
pausemovetime = 9999
supermovetime = 9999

[State FireB2]
type = Explod
triggerall = time > 45 && random <= (1.5*time)
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
persistent = 1
anim = 12215
id = 12212
postype = p1
pos = 0, 88
random = 200, 30
sprpriority = ifelse(random>500, 5, -5)
ownpal = 1
vel = 0, (-1 -(time)/10)
scale = 1, 1
supermovetime = 9999
pausemovetime = 9999

[State Pause]
type = Pause
triggerall = time= 0
trigger1 = var(28) > 0
anim = -1
pos = 28, -27
time = 17
sprpriority = 3
movetime = 17

[State Slow Motion]
type = Pause 
triggerall = var(28) < 3
triggerall = var(46) < 90
triggerall = (GameTime%3) = 0 && roundstate = 2 && p2life > 0
triggerall = time > 17
trigger1 = movecontact = 0
time = 1
movetime = 1
ignorehitpause = 1

[State 3]
type = BGPalfx
triggerall = time = 17
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
supermovetime = -1
time = 30
add = 0, 0, 0
sinadd = -400, -400, -400, 200

[State 3]
type = BGPalfx
triggerall = time = 47
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
supermovetime = -1
time = 163
add = -400, -400, -400

[State 3]
type = BGPalfx
trigger1 = movecontact
supermovetime = -1
time = 2
add = 400, 400, 400

[State Pause]
type = Pause
triggerall = time= 17
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
anim = -1
pos = 28, -27
time = 179
sprpriority = 3
movetime = 179

[State Randomizer]
type = varrandom
trigger1 = time = 0
v = 46
range = 0, 100

[State black fadeout]
type = BGPalFx
triggerall = time = 13
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
add = 0, 0, 0
sinadd = -255, -255, -255, 360
time = 180
ignorehitpause = 1

[State Shadows]
type = Afterimage
trigger1 = time = 13 && var(29) = 0
time = 229
length = 21
PalBright = 0, 0, 0
PalContrast = 148, 148, 148
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State Shadows]
type = Afterimage
triggerall = time = 13 && var(29) = 0
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
time = 229
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State red fadeout]
type = BGPalFx
triggerall = var(28) = 0
trigger1 = time = 13
add = 100, 100, 100
mul = 200, 200, 300
sinadd = 100, 100, 100, 350
time = 60
ignorehitpause = 1
invertall = 1

[State red fadein]
type = BGPalFx
triggerall = var(28) = 1
trigger1 = time = 13
add = 100, 100, 150
sinadd = 305, -255, -355, 180
time = 32
invertall = 1
ignorehitpause = 1

[State white fadein]
type = BGPalFx
triggerall = var(28) > 1
trigger1 = time = 13
add = 255, -155, -155
sinadd = -255, -255, -255, 180
time = 32
ignorehitpause = 1
invertall = 1

[State Freeze]
type = superpause
trigger1 = time = 13
movetime = 0
anim = S ifelse(var(28) > 0, 10061, 10060)
time = ifelse(var(28) > 0, 32, 57)
pos = -12, -46
anim = -1
p2defmul = 1
darken = 0
sound = S ifelse(var(28) > 0, 0, 7), ifelse(var(28) > 0, 12, 3)

[State Wind effect] 
type = Explod
triggerall = var(28) = 0
trigger1 = time = 13
anim = 9402
scale = 0.7, 0.7
pos = 0, 0
sprpriority = -1
postype = p1
supermovetime = -1
bindtime = 18
ownpal = 1
pausemovetime = 9999

[State Randomizer]
type = varrandom
trigger1 = 1
v = 48
range = -80, 80

[State Randomizer]
type = varrandom
trigger1 = 1
v = 49
range = -80, 80

[State chargeyell]
type = PlaySnd
trigger1 = time = 13
value = 1, 1
channel = 0

[State 0]
type = Varadd
trigger1 = time = 13
v = 28
value = 1

[State Shadows]
type = Afterimage
triggerall = time = 13 && var(29) = 0
trigger1 = var(46) >= 90 || var(28) >= 3
time = 299
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State X-ism]
type = PlaySnd
trigger1 = time = 17
value = 5, 2
volume = 255

[State X-ism]
type = PlaySnd
triggerall = time = 30
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
value = 5, 4
volume = 255

[State Spr] 
type = sprpriority
trigger1 = 1
value = ifelse(animelemtime(7) >= 0, -1, 1)

[State 1]
type = screenbound
trigger1 = Time >= 196
trigger1 = var(46) >= 90 || var(28) >= 3
value = 1
movecamera = 1, 0

[State 3]
type = Posadd
triggerall = var(28) < 3
trigger1 = var(46) < 90
trigger1 = time = 16
Y = -300
X = ceil(P2dist x - 16)

[State 3]
type = Posadd
triggerall = time = 16
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
Y = -320
X = ceil(P2dist x - 8)

[State 3]
type = Veladd
triggerall = var(28) < 3
trigger1 = var(46) < 90
trigger1 = time > 17
y = 0.64

[State 3]
type = posadd
triggerall = timemod = 5, 4
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
y = -1

[State 3]
type = posadd
triggerall = timemod = 5, 4 && time > 100
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
y = -2

[State 3]
type = posadd
triggerall = timemod = 5, 4 && time > 150
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
y = -3

[State 3]
type = veladd
triggerall = time = 200
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
y = 20

[State 3]
type = velset
triggerall = var(28) < 3
trigger1 = var(46) < 90
trigger1 = time = 17
Y = -6

[State 3]
type = velset
triggerall = var(28) < 3
trigger1 = var(46) < 90
trigger1 = animelem = 8
Y = 6

[State 3]
type = veladd
triggerall = var(28) < 3
trigger1 = var(46) < 90
trigger1 = movecontact
Y = 6

[State 3]
type = velset
triggerall = time = 17
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
Y = -1.5

[State 3]
type = velset
triggerall = time = 34
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
Y = 1

[State 3]
type = veladd
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
triggerall = movecontact
Y = 12

[State 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 4]
type = HitDef
trigger1 = animelem = 7
trigger1 = var(46) < 90
trigger1 = var(28) < 3
attr = S, HA
animtype = Hard
damage = 180, 22
hitflag = MAFD
guardflag = HA
priority = 5, Hit
pausetime = 0, 58
guard.pausetime = 0, 12
getpower = 0, 0
sparkno = 3
sparkxy = -10, 50
sprpriority = -2
guard.sparkno = 40; S9300
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 30
ground.velocity = 0, 3
air.velocity = 0, 0
forcestand = 1
air.fall = 1
air.type = Low
fall.recover = 0
fall.recovertime = 120
fall = 1
fall.animtype = Hard
fall.yvelocity = -6
down.velocity = 0, 0
down.hittime = 10
bounce = 1
hitonce = 1
palfx.time = 70
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
p1sprpriority = -1
forcestand = 1

[State 4]
type = HitDef
triggerall = animelem = 7
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
attr = S, HA
animtype = Hard
damage = 225, 28
hitflag = MAFD
guardflag = HA
priority = 5, Hit
pausetime = 0, 48
guard.pausetime = 0, 12
getpower = 0, 0
sparkno = 3
sparkxy = -10, 50
sprpriority = -2
guard.sparkno = 40; S9300
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 30
ground.velocity = 0, 3
air.velocity = 0, 0
forcestand = 1
air.fall = 1
air.type = Low
fall.recover = 0
fall.recovertime = 120
fall = 1
fall.animtype = Hard
fall.yvelocity = -6
down.velocity = 0, 0
down.hittime = 10
bounce = 1
hitonce = 1
palfx.time = 70
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
p1sprpriority = -1
forcestand = 1

[State hadouken hit helper]
type = Helper
trigger1 = movehit
helpertype = normal
ignorehitpause = 1
persistent = 0
name = "Foot flash!"
id = 6
pos = 0, ceil(-pos y)
postype = p2
stateno =10670
ownpal = 1
shadow = 0
size.xscale = 1.2
facing = -1

[State hadouken hit helper]
type = Helper
triggerall = movehit
trigger1 = var(46) < 90
trigger1 = var(28) < 3
helpertype = normal
ignorehitpause = 1
persistent = 0
name = "Foot flash!"
id = 6
pos = 0, ceil(-pos y)
postype = p2
stateno =10671
ownpal = 1
shadow = 0
facing = -1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State hadouken hit helper]
type = Helper
triggerall = movehit
trigger1 = var(46) < 90
trigger1 = var(28) < 3
helpertype = normal
ignorehitpause = 1
persistent = 0
name = "Foot flash!"
id = 6
pos = 0, ceil(-pos y)
postype = p2
stateno =10671
ownpal = 1
shadow = 0
facing = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State hadouken hit helper]
type = Helper
triggerall = movehit
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
helpertype = normal
ignorehitpause = 1
persistent = 0
name = "Foot flash!"
id = 6
pos = 0, ceil(-pos y)
postype = p2
stateno =10671
ownpal = 1
shadow = 0
size.xscale = 1.2
size.yscale = 1.15
facing = -1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State hadouken hit helper]
type = Helper
triggerall = movehit
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
helpertype = normal
ignorehitpause = 1
persistent = 0
name = "Foot flash!"
id = 6
pos = 0, ceil(-pos y)
postype = p2
stateno =10671
ownpal = 1
shadow = 0
size.xscale = 1.2
size.yscale = 1.15
facing = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State Rings] 
type = explod
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = 12223
pos = 0, -50
sprpriority = 5
postype = p2
supermovetime = -1
ownpal = 1
id = 12223
pausemovetime = 9999
supermovetime = 9999

[State 9]
type = ChangeState
trigger1 = pos y >= 17 && movehit = 0
value = 3931
ctrl = 0

[State 9]
type = ChangeState
trigger1 = pos y >= 17 && movehit
value = 3932
ctrl = 0


;==============================================================================================
[Statedef 3931]
type = S
movetype = I
physics = C
anim = 3901
velset = 0, 0
sprpriority = -1

[State 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State TimeCountVar]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State TimeCount]
type = VarAdd
trigger1 = movecontact
v = 3
value = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -2, -3

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 36
range = 4, 10

[State FireB]
type = Explod
trigger1 = random <= 800 && movecontact
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 70+3*var(3), -10
random = 35, 10
sprpriority = 5
ownpal = 1
vel = var(36), (var(35))
scale = 0.1, 0.75
accel = -(var(36))/3, (var(35))/10

[State Randomizer4]
type = varrandom
trigger1 = 1
v = 37
range = -2, -3

[State Randomizer5]
type = varrandom
trigger1 = 1
v = 38
range = -4, -10

[State FireB]
type = Explod
trigger1 = random <= 800 && movecontact
persistent = 1
anim = ifelse(random>500, 12213, 12216)
id = 12213
postype = p1
pos = -30-3*var(3), -10
random = 35, 10
sprpriority = 5
ownpal = 1
vel = var(38), (var(37))
scale = 0.1, 0.75
accel = -(var(38))/4, (var(37))/10

[State 5]
type = PlaySnd
trigger1 = time = 0
value = 5, 3
volume = 255

[State 5]
type = PlaySnd
trigger1 = time = 0
value = 5, 3
volume = 255
freqmul = 1.2

[State 5]
type = PlaySnd
trigger1 = time = 0
value = 5, 3
volume = 255

[State 5]
type = EnvShake
trigger1 = time = 0
persistent = 0
time = 20
ampl = -10
freq = 150
phase = 15

[State SuperLight] 
type = Explod
trigger1 = time = 0
ignorehitpause = 1
anim = 9402
persistent = 0
pos = 20, 0
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
ownpal = 1
pausemovetime = 9999
ID = 9402

[State 0]
type = ModifyExplod
trigger1 = 1
ID = 9402
scale = 1 + (0.025*var(3)), 1

[State groundshockwave] 
type = explod
trigger1 = time = 0
anim = 10030
pos = 15, 2
sprpriority = 3
postype = p1
supermovetime = -1
ownpal = 1

[State groundshockwave] 
type = explod
trigger1 = time = 0
anim = 10030
pos = 15, 2
sprpriority = 3
postype = p1
supermovetime = -1
ownpal = 1

[State FireB]
type = Explod
triggerall = numexplod(2500) < 2
trigger1 = movehit
trigger2 = numhelper(3)
trigger2 = helper(3), movehit
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numexplod(2500) < 2
trigger1 = movehit
trigger2 = numhelper(3)
trigger2 = helper(3), movehit
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 3]
type = PosSet
trigger1 = time = 0
y = 0

[State 1]
type = AfterImageTime
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = animtime = 0
v = 28
value = 0

[State 0]
type = Varset
trigger1 = Animtime = 0
v = 28
value = 0

[State 3]
type = Posadd
trigger1 = Animtime = 0
x = 10

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 3932]
type = S
movetype = I
physics = C
anim = 3901
velset = 0, 0
sprpriority = -1
movehitpersist = 1

[State Slow Motion]
type = Pause 
triggerall = roundstate = 2 && p2life > 0
triggerall = time = [5, 50]
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
time = 1
movetime = 1
ignorehitpause = 1

[State 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2]
type = Posadd
trigger1 = time = 0 && p2bodydist x < 0
x = -10

[State FireB]
type = Explod
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = 15, 25

[State FireBa]
type = Explod
triggerall = time < 26
trigger1 = 1
persistent = 1
anim = 12212
id = 12212
postype = p1
pos = 0, -6
random = 150, 0
sprpriority = 5
ownpal = 1
vel = 0, -var(51)
scale = 1, 0.2

[State FireB]
type = Explod
triggerall = time < 26
trigger1 = 1
persistent = 1
anim = 12215
id = 12212
postype = p1
pos = 0, -8
random = 300, 0
sprpriority = -5
ownpal = 1
vel = 0, -var(51)
scale = 1, 0.2

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -8, -10

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 36
range = 4, 10

[State FireB]
type = Explod
trigger1 = time < 30 && random <= 800
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 30+3*var(3), -10
random = 35, 10
sprpriority = 5
ownpal = 1
vel = var(36), (var(35))
scale = 0.1, 0.75
accel = -(var(36))/3, (var(35))/10

[State Randomizer4]
type = varrandom
trigger1 = 1
v = 37
range = -8, -10

[State Randomizer5]
type = varrandom
trigger1 = 1
v = 38
range = -4, -10

[State FireB]
type = Explod
trigger1 = time < 30 && random <= 800
persistent = 1
anim = ifelse(random>500, 12213, 12216)
id = 12213
postype = p1
pos = -30-3*var(3), -10
random = 35, 10
sprpriority = 5
ownpal = 1
vel = var(38), (var(37))
scale = 0.1, 0.75
accel = -(var(38))/4, (var(37))/10

[State 5]
type = PlaySnd
trigger1 = time = 0
value = 5, 3
volume = 255

[State 5]
type = PlaySnd
trigger1 = time = 0
value = 5, 3
volume = 255

[State 5]
type = PlaySnd
trigger1 = time = 0
value = 5, 3
volume = 255
freqmul = 1.2

[State 5]
type = EnvShake
trigger1 = time = 0
persistent = 0
time = 20
ampl = -10
freq = 150
phase = 15

[State SuperLight] 
type = Explod
trigger1 = time = 0
ignorehitpause = 1
anim = 9402
persistent = 0
pos = 20, 0
postype = p1
sprpriority = -4
postype = p1
supermovetime = -1
ownpal = 1
pausemovetime = 9999
ID = 9402

[State TimeCountVar]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State TimeCount]
type = VarAdd
trigger1 = 1
v = 3
value = 1

[State 0]
type = ModifyExplod
trigger1 = 1
ID = 9402
scale = 1 + (0.025*var(3)), 1

[State groundshockwave] 
type = explod
trigger1 = time = 0
anim = 10030
pos = 15, 2
sprpriority = 3
postype = p1
supermovetime = -1
ownpal = 1

[State groundshockwave] 
type = explod
trigger1 = time = 0
anim = 10030
pos = 15, 2
sprpriority = 3
postype = p1
supermovetime = -1
ownpal = 1

[State FireB]
type = Explod
triggerall = numexplod(2500) < 2
trigger1 = movehit
trigger2 = numhelper(3)
trigger2 = helper(3), movehit
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numexplod(2500) < 2
trigger1 = movehit
trigger2 = numhelper(3)
trigger2 = helper(3), movehit
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 3]
type = PosSet
trigger1 = time = 0
y = 0

[State 1]
type = AfterImageTime
trigger1 = time = 0
time = 0

[State 0]
type = Varset
trigger1 = animtime = 0
v = 28
value = 0

[State 0]
type = Varset
trigger1 = Animtime = 0
v = 28
value = 0

[State 3]
type = Posadd
trigger1 = Animtime = 0
x = 10

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 3900]
type = A
movetype = A
juggle = 0
poweradd = (Var(10)=0) * -1000
anim = 3841
velset = 0, 0
ctrl = 0
sprpriority = 2
facep2 = 0

[State Pos Fix]
type = posset
trigger1 = time = 0
trigger1 = pos y > 0
y = 0

[State Randomizer]
type = varrandom
trigger1 = time = 0
v = 46
range = 0, 100

[State NHB]
type = NotHitBy
trigger1 = time = [0, 30]
value = SCA
time = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 70
length = 21
PalBright = 0, 0, 0
PalContrast = 148, 148, 148
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State Shadows]
type = Afterimage
triggerall = time = 0
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
time = 160
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State width]
type = width
trigger1 = animelem = 1, >= 0
value = 30

[State red fadeout]
type = BGPalFx
triggerall = var(28) = 0
trigger1 = animelem = 1
add = 100, 100, 100
mul = 200, 200, 300
sinadd = 100, 100, 100, 350
time = 57
ignorehitpause = 1
invertall = 1

[State red fadein]
type = BGPalFx
triggerall = var(28) = 1
trigger1 = animelem = 1
add = 100, 100, 150
sinadd = 305, -255, -355, 180
time = 32
invertall = 1
ignorehitpause = 1

[State white fadein]
type = BGPalFx
triggerall = var(28) > 1
trigger1 = animelem = 1
add = 255, -155, -155
sinadd = -255, -255, -255, 180
time = 32
ignorehitpause = 1
invertall = 1

[State Freeze]
type = superpause
trigger1 = animelem = 1
anim = S ifelse(var(28) > 0, 10061, 10060)
time = ifelse(var(28) > 0, 32, 57)
pos = -12, -56
movetime = 3
p2defmul = 1
darken = 0
sound = S ifelse(var(28) > 0, 0, 7), ifelse(var(28) > 0, 12, 3)

[State 0]
type = Varadd
trigger1 = animelem = 1
v = 28
value = 1

[State Shadows]
type = Afterimage
triggerall = animelem = 1
trigger1 = var(46) >= 90 || var(28) >= 3
time = 100
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State JinRaiKyayu]
type = PlaySnd
trigger1 = animelem = 1
value = 1, 5
channel = 0
volume = 255

[State 5]
type = ChangeState
triggerall = animelem = 1
trigger1 = var(28) < 3
trigger1 = var(46) < 90
value = 3910

[State 5]
type = ChangeState
triggerall = animelem = 1
trigger1 = var(28) >= 3
trigger2 = var(46) >= 90
value = 3911


;==============================================================================================
[Statedef 3910]
type = A
movetype = A
physics = N
anim = 3841
sprpriority = 2
velset = 0, -1
ctrl = 0

[State NHB]
type = NotHitBy
trigger1 = animelemtime(4) < -1
value = SCA
time = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -5, -6

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 36
range = 4, 10

[State FireB]
type = Explod
trigger1 = random <= 800
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 50, -10
random = 95, 10
sprpriority = 5
ownpal = 1
vel = var(36), (var(35))
scale = 0.1, 0.75
accel = -(var(36))/3, (var(35))/10

[State Randomizer4]
type = varrandom
trigger1 = 1
v = 37
range = -5, -6

[State Randomizer5]
type = varrandom
trigger1 = 1
v = 38
range = -4, -10

[State FireB]
type = Explod
trigger1 = random <= 800
persistent = 1
anim = ifelse(random>500, 12213, 12216)
id = 12213
postype = p1
pos = -50, -10
random = 95, 10
sprpriority = 5
ownpal = 1
vel = var(38), (var(37))
scale = 0.1, 0.75
accel = -(var(38))/4, (var(37))/10

[State JinRaiKyayu]
type = PlaySnd
trigger1 = time = 5
value = 6, 11
channel = 0

[State 5]
type = ChangeAnim
trigger1 = animtime = 0
value = 3841
elem = 4

[State 1]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2]
type = Velset
trigger1 = time = 0
x = 0

[State 2]
type = Veladd
trigger1 = command = "holdfwd"
trigger2 = AILevel && p2bodydist x > 0
trigger2 = random < (1000 * (AIlevel ** 2 / 64.0))
x = 0.1

[State 2]
type = Veladd
trigger1 = command = "holdback"
trigger2 = AILevel && p2bodydist x < 0
trigger2 = random < (1000 * (AIlevel ** 2 / 64.0))
x = -0.1

[State 2]
type = Veladd
trigger1 = command = "holdup"
trigger2 = AILevel && p2dist y < 0
trigger2 = random < (1000 * (AIlevel ** 2 / 64.0))
y = -0.1

[State 2]
type = Veladd
trigger1 = command = "holddown"
trigger2 = AILevel && p2dist y > 0
trigger2 = random < (1000 * (AIlevel ** 2 / 64.0))
y =0.1

[State 2]
type = Velset
trigger1 = pos y >= -5
y = -0.1

[State 2]
type = Velmul
trigger1 = 1
y = 0.95
x = 0.95

[State Sound]
type = playsnd
trigger1 = animelem = 5
trigger1 = time < 62
value = 0, 4

[State Sound]
type = playsnd
trigger1 = animelem = 7
trigger1 = time < 62
value = 3, 2

[State Sound]
type = playsnd
trigger1 = (gametime%12) = 1
trigger1 = time < 67
value = 0, 14
freqmul = 1.2

[State Flames] 
type = Explod
triggerall = time < 62
trigger1 = animelem = 5
anim = 3852
pos = 0, floor(-pos y)
sprpriority = -2
postype = p1
supermovetime = -1
ownpal = 1
scale = 1, 0.5 + (.01*time)

[State Flames] 
type = Explod
triggerall = time < 62
trigger1 = animelem = 5
anim = 3851
pos = -10+(time/2), floor(-pos y)
sprpriority = -2
postype = p1
supermovetime = -1
ownpal = 1
scale = 1, 0.3 + (.01*time)

[State Flames] 
type = Explod
triggerall = time < 62
trigger1 = animelem = 7
anim = 3850
pos = 10-(time/2), floor(-pos y)
sprpriority = 4
postype = p1
supermovetime = -1
ownpal = 1
scale = 1, 0.3 + (.01*time)

[State hadouken hit helper]
type = Helper
triggerall = time < 62
trigger1 = animelem = 7
helpertype = normal
name = "leg fire"
pos = 24, -59
postype = p1
stateno =1063
ownpal = 1

[State hadouken hit helper]
type = Helper
triggerall = time < 62
trigger1 = animelem = 5
helpertype = normal
name = "leg fire"
pos = -24, -59
postype = p1
stateno =1064
ownpal = 1

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Var(26)reset]
type = Varset
trigger1 = time = 0
v = 26
value = 0

[State Var(26)reset]
type = Varadd
trigger1 = time = 10
v = 26
value = 1

[State Var(26)reset]
type = Varadd
trigger1 = time = 20
v = 26
value = 2

[State Var(26)reset]
type = Varadd
trigger1 = time = 30
v = 26
value = 3

[State Var(26)reset]
type = Varadd
trigger1 = time = 40
v = 26
value = 4

[State Var(26)reset]
type = Varadd
trigger1 = time = 50
v = 26
value = 5

[State 9]
type = HitDef
trigger1 = animelem = 4 && time < 56
attr = A, HA
damage = 18, 2
animtype = Hard
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
p2facing = -1
pausetime = 4 - (var(26))/10, 2 - (var(26))/10
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 10+((p2bodydist x)/20), -1-((p2dist y)*0.04)
air.velocity = 10+((p2bodydist x)/20), -1-((p2dist y)*0.04)
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
p1sprpriority = 1
p2sprpriority = 2
forcestand = 1

[State 9]
type = HitDef
trigger1 = animelem = 6 && time < 56
attr = A, HA
damage = 18, 2
animtype = Hard
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
p2facing = 1
pausetime = 4 - (var(26))/10, 2 - (var(26))/10
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -10+((p2bodydist x)/20), -1-((p2dist y)*0.04)
air.velocity = -10+((p2bodydist x)/20), -1-((p2dist y)*0.04)
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
p1sprpriority = 1
p2sprpriority = -1
forcestand = 1

[State 9]
type = HitDef
trigger1 = animelem = 4 && time >= 56
attr = A, HA
damage = 18, 2
animtype = Hard
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
p2facing = -1
pausetime = 4 - (var(26))/10, 2 - (var(26))/10
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 20, -1
air.velocity = 16, -1
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
p1sprpriority = 1
p2sprpriority = 2
forcestand = 1

[State 9]
type = HitDef
trigger1 = animelem = 6 && time >= 56
attr = A, HA
damage = 18, 2
animtype = Hard
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
p2facing = 1
pausetime = 4 - (var(26))/10, 2 - (var(26))/10
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -20, -1
air.velocity = -16, -1
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
p1sprpriority = 1
p2sprpriority = -1
forcestand = 1

[State 9]
type = Width
trigger1 = animelemtime(4) >= 0
edge = 32, 32
ignorehitpause = 1

[State 9]
type = EnvShake
trigger1 = timemod = 3, 2
trigger1 = movehit
ignorehitpause = 1
time = 4
ampl = -2
freq = 100
phase = 1

[State FireB]
type = Explod
triggerall = time >= 45
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -15, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = time >= 45
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 0]
type = Varset
trigger1 = time = 62
v = 28
value = 0

[State 9]
type = ChangeState
trigger1 = time = 62
value = 3861


;==============================================================================================
[Statedef 3911]
type = A
movetype = A
physics = N
anim = 3841
sprpriority = 2
velset = 0, -1
ctrl = 0

[State Randomizer]
type = varrandom
trigger1 = 1
v = 35
range = -5, -6

[State Randomizer3]
type = varrandom
trigger1 = 1
v = 36
range = 4, 10

[State FireB]
type = Explod
trigger1 = random <= 800
persistent = 1
anim = ifelse(random>500, 12213, 12214)
id = 12213
postype = p1
pos = 50, -10
random = 95, 10
sprpriority = 5
ownpal = 1
vel = var(36), var(35)
scale = 0.1, 0.75
accel = -(var(36))/3, (var(35))/10

[State Randomizer4]
type = varrandom
trigger1 = 1
v = 37
range = -5, -6

[State Randomizer5]
type = varrandom
trigger1 = 1
v = 38
range = -4, -10

[State FireB]
type = Explod
trigger1 = random <= 800
persistent = 1
anim = ifelse(random>500, 12213, 12216)
id = 12213
postype = p1
pos = -50, -10
random = 95, 10
sprpriority = 5
ownpal = 1
vel = var(38), (var(37))
scale = 0.1, 0.75
accel = -(var(38))/4, (var(37))/10

[State hadouken hit helper]
type = Helper
trigger1 = time > 3 && random < 100
helpertype = normal
name = "Thunderbolt"
id = 6
pos = var(1), ceil(-pos y)
postype = p1
stateno =1069
ownpal = 1
size.xscale = 0.5

[State Randomizer]
type = varrandom
trigger1 = 1
v = 1
range = 100, -100

[State 2]
type = Velset
trigger1 = time = 0
x = 0

[State 2]
type = Veladd
trigger1 = command = "holdfwd"
x = 0.2

[State 2]
type = Veladd
trigger1 = command = "holdback"
x = -0.2

[State 2]
type = Veladd
trigger1 = command = "holdup"
y = -0.2

[State 2]
type = Veladd
trigger1 = command = "holddown"
y =0.2

[State 2]
type = Velset
trigger1 = pos y >= -5
y = -0.2

[State 2]
type = Velmul
trigger1 = 1
y = 0.95
x = 0.95

[State JinRaiKyayu]
type = PlaySnd
trigger1 = time = 5
value = 6, 11
channel = 0

[State 5]
type = ChangeAnim
trigger1 = animtime = 0
value = 3841
elem = 4

[State 1]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State Sound]
type = playsnd
trigger1 = animelem = 5
trigger1 = time < 98
value = 0, 4

[State Sound]
type = playsnd
trigger1 = animelem = 7
trigger1 = time < 98
value = 3, 2

[State Sound]
type = playsnd
trigger1 = (gametime%12) = 1
trigger1 = time < 98
value = 0, 14
freqmul = 1.2

[State Flames] 
type = removeExplod
trigger1 = time = 98

[State Flames] 
type = Explod
triggerall = time < 98
trigger1 = animelem = 5
anim = 3852
pos = 0, floor(-pos y)
sprpriority = -2
postype = p1
supermovetime = -1
ownpal = 1
scale = 1, 0.5 + (.01*time)

[State Flames] 
type = Explod
triggerall = time < 98
trigger1 = animelem = 5
anim = 3851
pos = -10+(time/2), floor(-pos y)
sprpriority = -2
postype = p1
supermovetime = -1
ownpal = 1
scale = 1, 0.3 + (.01*time)

[State Flames] 
type = Explod
triggerall = time < 98
trigger1 = animelem = 7
anim = 3850
pos = 10-(time/2), floor(-pos y)
sprpriority = 4
postype = p1
supermovetime = -1
ownpal = 1
scale = 1, 0.3 + (.01*time)

[State Flames] 
type = Explod
triggerall = time < 98
trigger1 = animelem = 7
anim = 13010
pos = 40, -59
sprpriority = -2
postype = p1
supermovetime = -1
ownpal = 1

[State Flames] 
type = Explod
triggerall = time < 98
trigger1 = animelem = 5
anim = 13012
pos = -30, -59
sprpriority = 4
postype = p1
supermovetime = -1
ownpal = 1

[State FireB]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
trigger2 = numhelper(6)
trigger2 = helper(6), movehit
trigger2 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = movehit
trigger1 = numexplod(2500) < 1
trigger2 = numhelper(6)
trigger2 = helper(6), movehit
trigger2 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Var(26)reset]
type = Varset
trigger1 = time = 0
v = 26
value = 0

[State Var(26)reset]
type = Varadd
trigger1 = time = 10
v = 26
value = 1

[State Var(26)reset]
type = Varadd
trigger1 = time = 20
v = 26
value = 2

[State Var(26)reset]
type = Varadd
trigger1 = time = 30
v = 26
value = 3

[State Var(26)reset]
type = Varadd
trigger1 = time = 40
v = 26
value = 4

[State Var(26)reset]
type = Varadd
trigger1 = time = 50
v = 26
value = 5

[State 9]
type = HitDef
trigger1 = animelem = 4 && time < 86
attr = A, HA
damage = 14, 2
animtype = Hard
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
p2facing = -1
pausetime = 4 - (var(26))/10, 2 - (var(26))/10
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 10+((p2bodydist x)/20), -1-((p2dist y)*0.04)
air.velocity = 10+((p2bodydist x)/20), -1-((p2dist y)*0.04)
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
sprpriority = -1
forcestand = 1

[State 9]
type = HitDef
trigger1 = animelem = 6 && time < 86
attr = A, HA
damage = 14, 2
animtype = Hard
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
p2facing = 1
pausetime = 4 - (var(26))/10, 2 - (var(26))/10
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 10+((p2bodydist x)/20), -1-((p2dist y)*0.04)
air.velocity = -10+((p2bodydist x)/20), -1-((p2dist y)*0.04)
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State 9]
type = HitDef
trigger1 = animelem = 4 && time >= 86
attr = A, HA
damage = 14, 2
animtype = Up
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
p2facing = -1
pausetime = 4 - (var(26))/10, 2 - (var(26))/10
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 4, -20
air.velocity = 4, -20
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
sprpriority = -1
forcestand = 1

[State 9]
type = HitDef
trigger1 = animelem = 6 && time >= 86
attr = A, HA
damage = 14, 2
animtype = Up
priority = 5, Hit
hitflag = MAFD
guardflag = MA
getpower = 0, 0
p2facing = 1
pausetime = 4 - (var(26))/10, 2 - (var(26))/10
sparkxy = -10, -50
guard.sparkno = 40; S9300
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4 -20
air.velocity = -4 -20
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State 9]
type = Width
trigger1 = animelemtime(4) >= 0
edge = 32, 32
ignorehitpause = 1

[State 9]
type = EnvShake
trigger1 = timemod = 3, 2
trigger1 = movehit
ignorehitpause = 1
time = 4
ampl = -2
freq = 100
phase = 1

[State FireB]
type = Explod
triggerall = time >= 45
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -15, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = time >= 45
trigger1 = movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 0]
type = Varset
trigger1 = time = 98
v = 28
value = 0

[State 9]
type = ChangeState
trigger1 = time = 98
value = 3861


;==============================================================================================
[Statedef 3920]
type = S
movetype = A
anim = 196
velset = 0, 0
ctrl = 0
sprpriority = 2

[State Shadows]
type = Afterimage
trigger1 = time = 17
time = 9999
length = 16
PalBright = 0, 0, 0
PalContrast = 200, 200, 400
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 5
Trans = Add1

[State blue fadeout]
type = BGPalFx
trigger1 = animelem = 1
add = 0, 0, 0
mul = 200, 200, 300
sinadd = 100, 100, 255, 320
time = 49
ignorehitpause = 1
invertall = 1

[State Freeze]
type = superpause
trigger1 = time = 0
movetime = 49
time = 49
anim = -1
pos = -15, -50
sound = -1
p2defmul = 1
darken = 0

[State Sonar Effect]
type = PlaySnd
trigger1 = time = 16
value = 2, 5
volume = 255

[State SuperLight2] 
type = Explod
trigger1 = time = 16
anim = 10080
pos = -15, -50
sprpriority = 4
postype = p1
supermovetime = -1
id = 914
ownpal = 1
scale = 1.3, 1.3
pausemovetime = 9999

[State 0]
type = ModifyExplod
trigger1 = time > 36
ID = 914
scale = (1.5 + (.09*(time-37))), (1.5 + (.09*(time-37)))

[State Wind effect] 
type = Explod
trigger1 = time = 16
anim = 9402
scale = 0.7, 0.7
pos = 0, 0
sprpriority = -1
postype = p1
supermovetime = -1
bindtime = 18
ownpal = 1
pausemovetime = 9999

[State 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = ifelse(power >= 3000, 12, ifelse(power >= 2000, 8, 4))

[State VarSet]
type = VarSet
trigger1 = Time >= 50
var(10) = ceil(0.133 * power)

[State 9]
type = ChangeState
trigger1 = time >= 50
value = 0
ctrl = 1


;==============================================================================================
[Statedef 3921]
type = A
movetype = A
anim = 13008
ctrl = 0
sprpriority = 2

[State Shadows]
type = Afterimage
trigger1 = time = 17
time = 9999
length = 16
PalBright = 0, 0, 0
PalContrast = 200, 200, 400
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 5
Trans = Add1

[State Shadows]
type = posfreeze
trigger1 = 1
value = 1

[State blue fadeout]
type = BGPalFx
trigger1 = animelem = 1
add = 0, 0, 0
mul = 200, 200, 300
sinadd = 100, 100, 255, 320
time = 49
ignorehitpause = 1
invertall = 1

[State Freeze]
type = superpause
trigger1 = time = 0
movetime = 49
time = 49
pos = 7, -95
anim = -1
p2defmul = 1
darken = 0

[State Sonar Effect]
type = PlaySnd
trigger1 = animelem = 1
value = 2, 5
volume = 255

[State SuperLight2] 
type = Explod
trigger1 = animelem = 1
anim = 10080
pos = -2, -70
sprpriority = 4
postype = p1
supermovetime = -1
bindtime = 65
id = 914
ownpal = 1
scale = 1.3, 1.3
shadow = 0, 0, 0
pausemovetime = 9999

[State 0]
type = ModifyExplod
trigger1 = time > 23
ID = 914
scale = (1.5 + (.09*(time-22))), (1.5 + (.09*(time-22)))

[State 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = ifelse(power >= 3000, 12, ifelse(power >= 2000, 8, 4))

[State VarSet]
type = VarSet
trigger1 = Animtime = 0
var(10) = ceil(0.133 * power)

[State 9]
type = ChangeState
trigger1 = Animtime = 0
value = 3912
ctrl = 1


;==============================================================================================
[Statedef 3912]
type = A
movetype = A
physics = A

[State 1]
type = changeanim
trigger1 = time = 0
value = 3951


;==============================================================================================
[Statedef 4060]
type = A
movetype = A
physics = N
poweradd = (Var(10)=0) * -1000
juggle = 0
ctrl = 0
anim = 1024
velset = 0, 0
sprpriority = 2
facep2 = 0

[State Pos Fix]
type = posset
trigger1 = time = 0
trigger1 = pos y > 0
y = 0

[State Randomizer]
type = varrandom
trigger1 = time = 0
v = 46
range = 0, 100

[State NHB]
type = NotHitBy
trigger1 = time <= 0
trigger2 = Prevstateno != [3960, 3991]
trigger2 = animelemtime(6) < 0
value = SCA
time = 1

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(11)
trigger1 = helper(11), movehit
trigger1 = numexplod(2500) < 2
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(11)
trigger1 = helper(11), movehit
trigger1 = numexplod(2500) < 2
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0 && var(29) = 0
time = 999
length = 21
PalBright = 0, 0, 0
PalContrast = 148, 148, 148
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State Shadows]
type = Afterimage
triggerall = time = 0 && var(29) = 0
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
time = 999
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State red fadeout]
type = BGPalFx
triggerall = var(28) = 0
trigger1 = animelem = 1
add = 100, 100, 100
mul = 200, 200, 300
sinadd = 100, 100, 100, 540
time = 55
ignorehitpause = 1
invertall = 1

[State red fadein]
type = BGPalFx
triggerall = var(28) = 1
trigger1 = animelem = 1
add = 100, 100, 150
sinadd = 305, -255, -355, 180
time = 55
invertall = 1
ignorehitpause = 1

[State white fadein]
type = BGPalFx
triggerall = var(28) > 1
trigger1 = animelem = 1
add = 255, -155, -155
sinadd = -255, -255, -255, 180
time = 55
ignorehitpause = 1
invertall = 1

[State Freeze]
type = superpause
trigger1 = time = 0
anim = S ifelse(var(28) > 0, 10061, 10060)
time = 55
pos = 58, -57
sprpriority = 3
movetime = 55
p2defmul = 1
darken = 0
sound = S ifelse(var(28) > 0, 0, 7), ifelse(var(28) > 0, 12, 3)

[State flame charge]
type = PlaySnd
trigger1 = animelem = 1, =4
value = 3, 1
supermovetime = -1

[State SuperLight charge for hadouken] 
type = Explod
trigger1 = animelem = 1
anim = ifelse(var(28) > 0, 10087, 10086)
pos = 58, -57
sprpriority = 4
postype = p1
supermovetime = -1
ownpal = 1
scale = 0.5, 0.5
pausemovetime = 9999
id = 112

[State chiargesound]
type = PlaySnd
trigger1 = animelem = 1
value = 2, 2
channel = 0

[State 0]
type = Varadd
trigger1 = time = 0
v = 28
value = 1

[State Shadows]
type = Afterimage
triggerall = time = 0 && var(29) = 0
trigger1 = var(46) >= 90 || var(28) >= 3
time = 999
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State HadokenVoice]
type = PlaySnd
trigger1 = time = 3
value = 1, 5
channel = 0
volume = 255

[State hadouken hit helper]
type = Helper
triggerall = var(28) < 3
trigger1 = var(46) < 90
trigger1 = animelem = 6
helpertype = normal
name = "hadouken"
id = 11
pos = 56, -59
postype = p1
stateno =1040
ownpal = 1
size.xscale = 1.1
size.yscale = 1.1

[State hadouken hit helper]
type = Helper
triggerall = var(28) < 3
trigger1 = var(46) < 90
trigger1 = animelem = 9
helpertype = normal
name = "hadouken"
id = 11
pos = 56, -59
postype = p1
stateno =1040
ownpal = 1
size.xscale = 1.1
size.yscale = 1.1

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 6 || animelem = 9
value = 0, 7
volume = 255
freqmul = 0.9

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 6 || animelem = 9
value = 0, 7
volume = 255
freqmul = 1.1

[State 0]
type = Varset
triggerall = time >= 12
trigger1 = vel y > 0
trigger1 = pos y >= 2
v = 28
value = 0

[State 6d]
type = Velset
trigger1 = time = 56
x = -1.2
y = -7.3

[State FireA]
type = Explod
trigger1 = animelem = 6 || animelem = 9
ignorehitpause = 1
anim = 11242
scale = 0.5, 0.5
id = 2500
postype = p1
pos = 54, -59
sprpriority = 5
ownpal = 1

[State 6f]
type = veladd
trigger1 = time > 56 && var(28) = 1
y = 0.4

[State 6d]
type = veladd
trigger1 = time > 34
trigger1 = var(28) > 1
y = 0.4

[State 6a]
type = posfreeze
trigger1 = time = [0, 55]
value = 1

[State Hadoken!]
type = PlaySnd
trigger1 = animelem = 5
value = 4, 8
channel = 0
volume = 255

[State 6]
type = posadd
trigger1 = pos y >= 17
x = -20

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 5
value = 0, 7
volume = 50

[State 8]
type = ChangeState
trigger1 = pos y >= 17
value = 1874
ctrl = 0

[State 1]
type = AfterImageTime
triggerall = time >= 12
trigger1 = vel y > 0
trigger1 = pos y >= 2
time = 0

[State 1]
type = posadd
triggerall = time >= 12
trigger1 = vel y > 0
trigger1 = pos y >= 2
x = -20

[State 9]
triggerall = time = 55
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
type = ChangeState
value = 4061
ctrl = 0

[State 9]
triggerall = time >= 60
trigger1 = vel y > 0
trigger1 = pos y >= 2
type = ChangeState
value = 1874
ctrl = 0


;==============================================================================================
[Statedef 4061]
type = A
movetype = A
juggle = 0
anim = 1020
ctrl = 0
sprpriority = 2

[State 6]
type = VelAdd
trigger1 = time = 70
y = -3.5
x = -0.5

[State 6]
type = Velset
trigger1 = Time < 70
y = -2
x = -2

[State 6]
type = Velmul
trigger1 = time = 13
x = 0.53

[State FireA]
type = Explod
trigger1 = animelem = 2 || animelem = 5
ignorehitpause = 1
anim = 11242
scale = 0.5, 0.5
id = 2505
postype = p1
pos = 46, -59
sprpriority = 5
ownpal = 1

[State 6]
type = veladd
trigger1 = 1
y = 0.4

[State Hadoken!]
type = PlaySnd
trigger1 = animelem = 2 || animelem = 5
value = 2, 3
channel = 0
volume = 255

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 2 || animelem = 5
helpertype = normal
name = "hadouken"
id = 11
pos = 46, -56
postype = p1
stateno =1018
ownpal = 1

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(11)
trigger1 = helper(11), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(11)
trigger1 = helper(11), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 6]
type = posadd
trigger1 = pos y >= 17
x = -20

[State Hadoken!]
type = changeanim
trigger1 = animelem = 8 && time < (70 + (var(51)))
value = 1020
elem = 1

[State 0]
type = Varset
trigger1 = time = 0
persistent = 0
v = 51
value = 0

[State 0]
type = VarAdd
trigger1 = command = "a" || command = "b" || command = "c"
trigger2 = command = "x" || command = "y" || command = "z"
v = 51
value = 1

[State HadokenWhiff]
type = playsnd
trigger1 = animelem = 2 || animelem = 5
value = 0, 7
volume = 50

[State 0]
type = Varset
trigger1 = pos y >= 17
v = 28
value = 0

[State 1]
type = AfterImageTime
trigger1 = pos y >= 17
time = 0

[State 8]
type = ChangeState
trigger1 = pos y >= 17
value = 1864


;==============================================================================================
[Statedef 1874]
type = C
movetype = I
physics = C
Anim = 13034
ctrl = 0

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 2
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 2
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State 1]
type = posadd
trigger1 = time = 0
x = 20

[State 1]
type = posset
trigger1 = time = 0
y = 0

[State 1]
type = turn
trigger1 = p2dist x < 0 && animelem=2

[State 1]
type = velset
trigger1 = time = 0
y = 0

[State 52, Land SOund]
type = PlaySnd
trigger1 = time = 0
value = 0, 0

[State 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 1040]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1021
velset = 6, 6
sprpriority = 5
juggle = 0

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -3

[State 0]
type = VarAdd
trigger1 = time = 0
persistent = 1
v = 54
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 500
persistent = 1
anim = 11241
id = 12213
postype = p1
pos = -20, -17
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), var(51)

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 500
persistent = 1
anim = 11240
id = 12213
postype = p1
pos = -20, -17
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), var(51)

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -5, -2

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = 3, 9

[State FireB]
type = Explod
trigger1 = time = [0, 6]
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -20, -17
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(53))
scale = 0.2, 1.5
accel = -1/3*(var(53)), -1/3*(var(53))

[State FireB]
type = Explod
trigger1 = time = [0, 6]
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = -20, -17
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(53))
scale = 0.2, 1.5
accel = -1/3*(var(53)), -1/3*(var(53))

[State 5]
type = Hitdef
trigger1 = var(54) < 10
attr = A, HP
damage = ceil(13 * root, fvar(10)), 3
animtype = Hard
hitflag = MAFD
guardflag = MA
pausetime = 0, 10
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
getpower = 0, 0
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2, -5
air.type = Low
air.velocity = -2, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
down.velocity = 0, 0
air.hittime = 35
fall.recover = 0
fall.recovertime = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(54) >= 10
attr = A, HP
damage = ceil(13 * root, fvar(10)), 3
animtype = Hard
hitflag = MAFD
guardflag = MA
pausetime = 0, 10
getpower = 0, 0
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -6, -5
air.type = Low
air.velocity = -6, -5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
down.velocity = 0, 0
air.hittime = 35
fall.recover = 0
fall.recovertime = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
trigger1 = ((Target, GetHitVar(hitcount)) % 3) = 1
var(17) = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 5
PalBright = 0, 0, 0
PalContrast = 0, 30, 100
PalMul = .66, .66, .66
Timegap = 1
FrameGap = 1
Trans = add

[State Spark] 
type = Explod
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1041
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP
time = -1
ignorehitpause = 1

[State Spark] 
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = projhit = 1
trigger2 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State Dissipate]
type = Changestate
trigger1 = Var(54) >= 8
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1042

[State Dissipate]
type = Changestate
trigger1 = Var(54) < 8 && movecontact
value = 1041

[State Dissipate]
type = changestate
trigger1 = pos y >= 2
value = 1023


;==============================================================================================
[Statedef 1041]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 5

[State 5]
type = velset
trigger1 = time > 3
x = 6
y = 6

[State 5]
type = velset
trigger1 = time <= 3
x = 1
y = 1

[State Randomizer]
type = varrandom
trigger1 = 1
v = 51
range = -1, -2

[State 0]
type = VarAdd
trigger1 = time = 0
persistent = 1
v = 54
value = 1

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 500
persistent = 1
anim = 11241
id = 12213
postype = p1
pos = -20, -17
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), var(51)

[State FireB]
type = Explod
trigger1 = vel x != 0 && random <= 500
persistent = 1
anim = 11240
id = 12213
postype = p1
pos = -20, -17
random = 20, 20
sprpriority = 5
ownpal = 1
vel = var(51), var(51)

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -20, 20

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -20, 20

[State 5]
type = Hitdef
trigger1 = var(54) < 10
attr = A, HP
damage = ceil(13 * root, fvar(10)), 3
animtype = Hard
hitflag = MAFD
guardflag = MA
pausetime = 0, 10
getpower = 0, 0
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5, 5
air.type = Low
air.velocity = -5, 5
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
down.velocity = 0, 0
air.hittime = 35
fall.recover = 0
fall.recovertime = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(54)=-7 || var(54)=-6 || var(54)=-3 || var(54)=-2 || var(54)=1 || var(54) = 2 || var(54)=5 || var(54) = 6 || var(54) = 9 || var(54)= 10 || var(54) = 13
trigger1 = var(54) < 10
attr = A, HP
damage = ceil(13 * root, fvar(10)), 3
animtype = Hard
guardflag = MA
pausetime = 0, 10
getpower = 0, 0
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -8, -6
fall.animtype = Hard
air.velocity = -8, -6
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = 0
fall.recovertime = 120
p1sprpriority = 5

[State 5]
type = Hitdef
trigger1 = var(54) >= 7
attr = A, HP
damage = ceil(13 * root, fvar(10)), 3
animtype = Hard
hitflag = MAFD
guardflag = MA
pausetime = 0, 10
sparkxy = var(52), var(53)
guard.sparkno = 40; S9200
guardsound = S0, 100
ground.type = high
getpower = 0, 0
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -10, 9
air.type = Low
air.velocity = -10, 9
forcestand = 1
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
pausemovetime = 99
Supermovetime = 99
fall = 1
down.velocity = 0, 0
air.hittime = 35
fall.recover = 0
fall.recovertime = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p1sprpriority = 5

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
trigger1 = ((Target, GetHitVar(hitcount)) % 3) = 1
var(17) = 1

[State 1]
type = palfx
trigger1 = time = 0
time = 9999
sinadd = -40, -48, -48, 150

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 9999
length = 5
PalBright = 0, 0, 0
PalContrast = 0, 30, 100
PalMul = .66, .66, .66
Timegap = 1
FrameGap = 1
Trans = add

[State Spark] 
type = Explod
trigger1 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = (enemyNear, StateNo = [5000, 5999])
trigger1 = p2movetype = H
trigger1 = MoveContact
value = 6, 5
persistent = 0
ignorehitpause = 1

[State NHB]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1041
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State HitBy]
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP
time = -1
ignorehitpause = 1

[State Spark] 
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = projhit = 1
trigger2 = movehit
persistent = 0
ignorehitpause = 1
anim = ifelse(random>500, 10421, 10420)
pos = 0, -50
sprpriority = -1
postype = p2
supermovetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5, 5
scale = 0.7, 0.7

[State 0]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 4
value = 1

[State 0]
type = VarAdd
trigger1 = moveguarded=1
persistent = 1
v = 4
value = 1

[State Dissipate]
type = Changestate
trigger1 = Var(54) >= 8
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
value = 1042

[State Dissipate]
type = Changestate
trigger1 = Var(54) < 8 && movecontact
value = 1041

[State Dissipate]
type = changestate
trigger1 = pos y >= 2
value = 1023


;==============================================================================================
[Statedef 1042]
type = S
movetype = A
physics = S
ctrl = 0
anim = 1019
velset = 2, 0
sprpriority = 5

[State PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 2, 7
persistent = 0
freqmul = 1.2
ignorehitpause = 1
volume = -50

[State Randomizer]
type = varrandom
trigger1 = 1
v = 52
range = -9, 9

[State Randomizer]
type = varrandom
trigger1 = 1
v = 53
range = -9, 9

[State FireB]
type = Explod
trigger1 = time < 4
persistent = 1
anim = 12213
id = 12213
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(53))
scale = 0.2, 1.5
accel = 1/2*(var(52)), 1/2*(var(53))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 4
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(52), (var(53))
scale = 0.2, 1.5
accel = 1/2*(var(52)), 1/2*(var(53))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 4
persistent = 1
anim = 12213
id = 12212
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(53), (var(52))
scale = 0.2, 1.5
accel = 1/2*(var(53)), 1/2*(var(52))
ignorehitpause = 1
pausemovetime = 9999

[State FireB]
type = Explod
trigger1 = time < 4
persistent = 1
anim = 12214
id = 12212
postype = p1
pos = -10, -13
random = 5, 10
sprpriority = 5
ownpal = 1
vel = var(53), (var(52))
scale = 0.2, 1.5
accel = 1/2*(var(53)), 1/2*(var(52))
ignorehitpause = 1
pausemovetime = 9999

[State Dissipate]
type = destroyself
trigger1 = time >= 18


;==============================================================================================
[Statedef 4030]
type = A
movetype = A
physics = N
poweradd = (Var(10)=0) * -1000
juggle = 0
ctrl = 0
anim = 12220
velset = 0, 0
sprpriority = 2
facep2 = 0

[State Pos Fix]
type = posset
trigger1 = time = 0
trigger1 = pos y > 0
y = 0

[State Randomizer]
type = varrandom
trigger1 = time = 0
v = 46
range = 0, 100

[State NHB]
type = NotHitBy
trigger1 = time <= 0
trigger2 = Prevstateno != [3960, 3991]
trigger2 = Anim = 12220 && animelemtime(3) < -1
value = SCA
time = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 99
length = 21
PalBright = 0, 0, 0
PalContrast = 148, 148, 148
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State Shadows]
type = Afterimage
triggerall = time = 0
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
time = 99
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State red fadeout]
type = BGPalFx
triggerall = var(28) = 0
trigger1 = anim = 12220 && animelem = 1
add = 100, 100, 100
mul = 200, 200, 300
sinadd = 100, 100, 100, 540
time = 50
ignorehitpause = 1
invertall = 1

[State red fadein]
type = BGPalFx
triggerall = var(28) = 1
trigger1 = anim = 12220 && animelem = 1
add = 100, 100, 150
sinadd = 305, -255, -355, 180
time = 32
invertall = 1
ignorehitpause = 1

[State white fadein]
type = BGPalFx
triggerall = var(28) > 1
trigger1 = anim = 12220 && animelem = 1
add = 255, -155, -155
sinadd = -255, -255, -255, 180
time = 32
ignorehitpause = 1
invertall = 1

[State Freeze]
type = superpause
trigger1 = anim = 12220 && animelem = 1
anim = S ifelse(var(28) > 0, 10061, 10060)
time = ifelse(var(28) > 0, 32, 50)
pos = -16, -68
movetime = 4
p2defmul = 1
darken = 0
sound = S ifelse(var(28) > 0, 0, 7), ifelse(var(28) > 0, 12, 3)

[State flame charge]
type = PlaySnd
trigger1 = anim = 12220 && animelem = 1
value = 3, 1
supermovetime = -1

[State SuperLight] 
type = Explod
trigger1 = anim = 12220 && animelem = 2
anim = 4801
pos = 17, -10
postype = p1
sprpriority = 4
postype = p1
supermovetime = 4
bindtime = -1
ownpal = 1
removeongethit = 1

[State SuperLight] 
type = Explod
trigger1 = anim = 12220 && animelem = 2
anim = 4801
pos = 18, -9
postype = p1
sprpriority = 4
postype = p1
supermovetime = 4
bindtime = -1
ownpal = 1
removeongethit = 1

[State SuperLight]
type = Explod
trigger1 = anim = 12220 && animelem = 3
anim = 4803
pos = -17, -15
postype = p1
sprpriority = 4
postype = p1
supermovetime = 0
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight]
type = Explod
trigger1 = anim = 12220 && animelem = 3
anim = 4803
pos = -16, -14
postype = p1
sprpriority = -4
postype = p1
supermovetime = 0
bindtime = 57
ownpal = 1
removeongethit = 1

[State SuperLight charge for hadouken] 
type = Explod
trigger1 = anim = 12220 && animelem = 1
anim = ifelse(var(28) > 0, 10087, 10086)
pos = -16, -68
sprpriority = 4
postype = p1
supermovetime = -1
ownpal = 1
scale = 0.5, 0.5
pausemovetime = 9999

[State chiargesound]
type = PlaySnd
trigger1 = time = 0
value = 1, 5
channel = 0
volume = 255

[State 0]
type = Varadd
trigger1 = time = 0
v = 28
value = 1

[State Shadows]
type = Afterimage
triggerall = time = 0
trigger1 = var(46) >= 90 || var(28) >= 3
time = 99
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State hadouken hit helper]
type = Helper
triggerall = var(28) < 3
trigger1 = var(46) < 90
trigger1 = anim = 12220 && animelem = 3
helpertype = normal
name = "hadouken"
id = 3
pos = 72, -69
postype = p1
stateno = 1070
ownpal = 1
size.xscale = 0.9
size.yscale = 1

[State hadouken hit helper]
type = Helper
triggerall = anim = 12220 && animelem = 3
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
helpertype = normal
name = "hadouken"
id = 3
pos = 72, -69
postype = p1
stateno = 1020
ownpal = 1
size.xscale = 1
size.yscale = 1

[State fly]
type = Veladd
trigger1 = time = 8
x = -4
y = -4

[State fly]
type = Velmul
trigger1 = time = 8
y = 0.3

[State fly]
type = Veladd
trigger1 = time = [0, 8]
y = 0

[State fly]
type = Veladd
trigger1 = time >= 8
y = 0.2

[State 0]
type = posadd
trigger1 = time = 30
x = 10
y = 8

[State 10]
type = posfreeze
trigger1 = time = [5, 8]
value = 1

[State FireB]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
triggerall = numenemy
triggerall = (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Hadoken!]
type = PlaySnd
trigger1 = time = 8
value = 4, 3
channel = 0
volume = 255

[State HadokenWhiff]
type = playsnd
trigger1 = anim = 12220 && animelem = 4
value = 0, 7
volume = 50

[State 9]
type = ChangeAnim
trigger1 = time = 30
value = 10503
ctrl = 0

[State 1]
type = posadd
trigger1 = pos y >= 2
x = -10

[State 0]
type = Varset
triggerall = time >= 12
trigger1 = pos y >= 2
v = 28
value = 0

[State 1]
type = AfterImageTime
triggerall = time >= 12
trigger1 = pos y >= 2
time = 0

[State 9]
triggerall = time >= 12
trigger1 = pos y >= 2
type = ChangeState
value = 1874


;==============================================================================================
[Statedef 4042]
type = A
physics = N
movetype = A
anim = 46
velset = 0, 0
ctrl = 0
sprpriority = 2

[State jerk back]
type = velset
trigger1 = time = 0
x = -7

[State gravity]
type = veladd
trigger1 = 1
y = 0.44

[State 9]
type = changeAnim
trigger1 = time = 0
value = 105
ctrl = 0

[State 9]
trigger1 = vel y > 0
trigger1 = pos y >= 0
type = ChangeState
value = 107


;==============================================================================================
[Statedef 4050]
movetype = A
type = A
anim = 4050
physics = N
poweradd = (Var(10)=0) * -1000
velset = 0, 0
ctrl = 0
sprpriority = 2
facep2 = 0

[State Pos Fix]
type = posset
trigger1 = time = 0
trigger1 = pos y > 0
y = 0

[State 3]
type = PlaySnd
triggerall = movecontact
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
persistent = 0
value = 0, 16
volume = 255
freqmul = 1

[State Sound]
type = playsnd
trigger1 = var(46) < 90
trigger1 = var(28) < 3
trigger1 = animelem = 3
value = 2, 8
freqmul = 1.2

[State Sound]
type = playsnd
trigger1 = var(46) >= 90 || var(28) >= 3
trigger1 = animelem = 3
value = 2, 8
freqmul = 0.8

[State FireB]
type = Explod
triggerall = numexplod(2500) < 2
trigger1 = movehit
trigger2 = numhelper(3)
trigger2 = helper(3), movehit
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State FireA]
type = Explod
triggerall = numexplod(2500) < 2
trigger1 = movehit
trigger2 = numhelper(3)
trigger2 = helper(3), movehit
ignorehitpause = 1
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 9]
type = EnvShake
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 20
ampl = -5
freq = 100
phase = 1

[State 1]
type = envcolor
trigger1 = movehit
value = 255, 255, 255
under = 1
ignorehitpause = 1
persistent = 0
time = 3

[State 0]
type = Varset
trigger1 = time = 0
v = 21
value = 1

[State Randomizer]
type = varrandom
trigger1 = time = 0
v = 46
range = 0, 100

[State 2]
type = PlayerPush
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
value = 0
ignorehitpause = 1

[State NHB]
type = NotHitBy
trigger1 = time <= 0
trigger2 = Prevstateno != [3960, 3991]
trigger2 = animelemtime(3) < -1
value = SCA
time = 1

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 90
length = 21
PalBright = 0, 0, 0
PalContrast = 148, 148, 148
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State Shadows]
type = Afterimage
triggerall = time = 0
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
time = 70
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State Shadows]
type = Afterimage
trigger1 = pos y = -1
time = 1
length = 21
PalBright = 0, 0, 0
PalContrast = 148, 148, 148
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State red fadeout]
type = BGPalFx
triggerall = var(28) = 0
trigger1 = animelem = 1
add = 100, 100, 100
mul = 200, 200, 300
sinadd = 100, 100, 100, 360
time = 60
ignorehitpause = 1
invertall = 1

[State red fadein]
type = BGPalFx
triggerall = var(28) = 1
trigger1 = animelem = 1
add = 100, 100, 150
sinadd = 305, -255, -355, 180
time = 32
invertall = 1
ignorehitpause = 1

[State white fadein]
type = BGPalFx
triggerall = var(28) > 1
trigger1 = animelem = 1
add = 255, -155, -155
sinadd = -255, -255, -255, 180
time = 32
ignorehitpause = 1
invertall = 1

[State Freeze]
type = superpause
trigger1 = animelem = 1
movetime = 9
time = ifelse(var(28) > 0, 32, 60)
anim = S ifelse(var(28) > 0, 10061, 10060)
pos = 25, -64
p2defmul = 1
darken = 0
sound = S ifelse(var(28) > 0, 0, 7), ifelse(var(28) > 0, 12, 3)

[State 0]
type = Varadd
trigger1 = animelem = 1
v = 28
value = 1

[State Shadows]
type = Afterimage
triggerall = animelem = 1
trigger1 = var(46) >= 90 || var(28) >= 3
time = 500
length = 21
PalBright = 0, 0, 0
PalContrast = 242, 0, 0
PalAdd = 0, 0, 0
PalMul = 0.9, 0.9, 0.9
FrameGap = 10
Trans = Add1

[State TATSUMAKI]
type = PlaySnd
trigger1 = animelem = 1
value = 3, 9
channel = 0
volume = 255

[State TATSUMAKI]
type = PlaySnd
trigger1 = animelem = 3
value = 4, 8
channel = 0
volume = 255

[State wind sound]
type = playsnd
trigger1 = animelem = 3
value = 0, 4

[State 6]
type = Velmul
trigger1 = time = [0, 10]
x = 0.83
y = 0.83

[State 6]
type = Velset
triggerall = animelem = 3
trigger1 = var(46) < 90
trigger1 = var(28) < 3
x = 12
y = 12

[State 6]
type = Velset
triggerall = animelem = 3
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
x = 12
y = 12

[State 6]
type = Playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State hadouken hit helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "leg fire"
pos = 0, 0
postype = p1
stateno =1061
ownpal = 1

[State hadouken hit helper]
type = Helper
triggerall = movehit
trigger1 = var(46) < 90
trigger1 = var(28) < 3
helpertype = normal
ignorehitpause = 1
persistent = 0
name = "Foot flash!"
pos = 0, -60
postype = p1
stateno =1065
ownpal = 1
shadow = 0
size.xscale = 1.5

[State 7]
type = HitDef
trigger1 = animelem = 3
trigger1 = var(46) < 90
trigger1 = var(28) < 3
attr = A, HA
damage = 170, 21
animtype = Hard
fall.animtype = Hard
getpower = 0, 0
givepower = 20
priority = 5, Hit
hitflag = MAFD
guardflag = HA
pausetime = 10, 40
guard.pausetime = 10, 10
sparkxy = -10, -15
sparkno = 3
guard.sparkno = 40; S9200
hitsound = S2, 9
guardsound = S0, 100
ground.type = Low
air.type = Low
air.hittime = 50
ground.slidetime = 40
ground.hittime = 50
guard.hittime = 20
ground.velocity = 0, -3
air.velocity = -3, 0
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
forcestand = 1

[State 7]
type = HitDef
trigger1 = animelem = 3
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
attr = A, HA
damage = 72, 9
animtype = Hard
fall.animtype = Hard
getpower = 0, 0
givepower = 20
priority = 5, Hit
hitflag = MAFD
guardflag = HA
pausetime = 10, 60
guard.pausetime = 10, 10
sparkxy = -10, -15
sparkno = 3
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
air.type = Low
air.hittime = 50
ground.slidetime = 40
ground.hittime = 50
guard.hittime = 20
ground.velocity = -2, 0
air.velocity = -3, 0
fall = 1
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
kill = 0
forcestand = 1

[State 8]
type = ChangeState
triggerall = movecontact
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
value = 4054

[State 1]
type = AfterImageTime
trigger1 = time >= 13
trigger1 = pos y >= 5
time = 0

[State 8]
type = ChangeState
trigger1 = time >= 13
trigger1 = pos y >= 5
value = 4044


;==============================================================================================
[Statedef 4044]
type = S
movetype = I
physics = C
anim = 110
velset = 9, 0
movehitpersist = 1

[State 3470, FireB]
type = Explod
triggerall = numexplod(2500) < 2
trigger1 = movehit
trigger2 = numhelper(3)
trigger2 = helper(3), movehit
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1
ignorehitpause = 1

[State 3470, FireA]
type = Explod
triggerall = numexplod(2500) < 2
trigger1 = movehit
trigger2 = numhelper(3)
trigger2 = helper(3), movehit
anim = 2501
id = 2500
scale = 0.5, 0.5
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1
ignorehitpause = 1

[State 1520, 3]
type = Posadd
trigger1 = time = 0
x = -5

[State 1520, 3]
type = PosSet
trigger1 = time = 0
y = 0

[State 52, Land SOund]
type = PlaySnd
trigger1 = time = 0
value = 0, 0

[State 210, 1]
type = AfterImageTime
trigger1 = time = 0
time = 0

[State 1500, 0]
type = Varset
trigger1 = animtime = 0
v = 28
value = 0

[State 1520, 9]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 4054]
type = A
movetype = I
physics = N
anim = 4054
ctrl = 0
sprpriority = 2

[State Afterimage hit helper]
type = Helper
trigger1 =time = 0
helpertype = normal
name = "satsui no hado"
id = 301
postype = p1
pos = 0, 0
stateno = 4056
ownpal = 1
pausemovetime = 9999

[State 1]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0, 0

[State Slow Motion]
type = Pause 
trigger1 = roundstate = 2 && p2life > 0
time = 1 
movetime = 1 
ignorehitpause = 1

[State 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 6]
type = VelAdd
trigger1 = 1
y = 0.30

[State 6]
type = Velset
trigger1 = time = 0
x = 4
y = -6

[State 8]
type = turn
trigger1 = animelem = 6
persistent = 0

[State 8]
type = ChangeState
trigger1 = time >= 34
value = 4055

[State 8]
type = ChangeState
trigger1 = vel y > 0 && pos y > 0
value = 4044


;==============================================================================================
[Statedef 4056]
type = A
movetype = A
anim = 4056
physics = N
velset = 0, 0
ctrl = 0
sprpriority = 5

[State Trans]
type = trans
trigger1 = !movecontact
trans = addalpha
alpha = 256, (random % 256)
ignorehitpause = 1

[State Trans]
type = trans
trigger1 = movecontact
trans = addalpha
alpha = 256 - (32 * movecontact), (random % 256)
ignorehitpause = 1

[State appear sound]
type = playsnd
trigger1 = time = 10
value = 4, 5

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA, AA, AP, AT
time = 1

[State wind sound]
type = playsnd
trigger1 = animelem = 13
value = 0, 4

[State 6]
type = posset
trigger1 = animelemtime(13) < 0
y = ceil(root, pos y)

[State 6]
type = Velset
trigger1 = animelem = 13
x = 12
y = 12

[State 7]
type = HitDef
trigger1 = animelem = 13
attr = A, HA
damage = ceil(72 * root, fvar(10)), 9
animtype = Hard
fall.animtype = Hard
getpower= (Var(10)=0) * 0
givepower = 20
priority = 5, Hit
hitflag = MAFD
guardflag = HA
pausetime = 0, 40
guard.pausetime = 0, 10
sparkxy = -10, -15
sparkno = 3
guard.sparkno = 40; S9200
hitsound = S6, 6
guardsound = S0, 100
ground.type = Low
air.type = Low
air.hittime = 50
ground.slidetime = 40
ground.hittime = 50
ground.velocity = 0, -4
air.velocity = 0, -4
down.velocity = 0, 0
fall = 1
fall.recover = 0
fall.recovertime = 120
envshake = 1
envshake.time = 30
envshake.freq = 100
envshake.ampl = -6
envshake.phase = 1
forcestand = 1

[State Helper Hits Count Too]
type = ParentVarAdd
trigger1 = Movehit = 1 && NumTarget
var(17) = 1

[State 8]
type = destroyself
trigger1 = pos y >= 100 || time >= 100 || movecontact >= 8
trigger2 = root, movetype = H
trigger3 = root, stateno != [4044, 4055]


;==============================================================================================
[Statedef 4055]
type = A
movetype = A
anim = 4055
physics = N
velset = 0, 0
ctrl = 0
sprpriority = 2

[State 1]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0, 0
ignorehitpause = 1

[State Sound]
type = playsnd
trigger1 = animelem = 3
value = 2, 8
freqmul = 0.8

[State Sound]
type = playsnd
trigger1 = animelem = 3
value = 2, 8
freqmul = 1.2

[State hadouken hit helper]
type = Helper
trigger1 = movehit
helpertype = normal
ignorehitpause = 1
persistent = 0
name = "Foot flash!"
pos = 0, -60
postype = p1
stateno =1065
ownpal = 1
shadow = 0
size.xscale = 1.5

[State hadouken hit helper]
type = Helper
trigger1 = movehit
helpertype = normal
ignorehitpause = 1
persistent = 0
name = "Foot flash!"
pos = 0, -60
postype = p2
facing = -1
stateno =1065
ownpal = 1
shadow = 0
size.xscale = 1.5

[State 2]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0]
type = NotHitBy
trigger1 = var(46) >= 90
trigger2 = var(28) >= 3
value = SCA, NP, SP
time = 1

[State Shadows]
type = Afterimagetime
trigger1 = pos y = -1
time = 0

[State TATSUMAKI]
type = PlaySnd
trigger1 = animelem = 1
value = 1, 10
channel = 0
volume = 255

[State wind sound]
type = playsnd
trigger1 = animelem = 3
value = 0, 4

[State 6]
type = Velmul
trigger1 = time = [0, 10]
x = 0.83
y = 0.83

[State 6]
type = Velset
trigger1 = animelem = 3
x = 12
y = 12

[State 7]
type = HitDef
trigger1 = animelem = 3
attr = A, HA
damage = 72, 9
animtype = Hard
fall.animtype = Hard
getpower = 0, 0
givepower = 20
priority = 5, Hit
hitflag = MAFD
guardflag = HA
pausetime = 0, 40
guard.pausetime = 0, 10
sparkxy = -10, -15
sparkno = 3
guard.sparkno = 40; S9200
hitsound = S2, 9
guardsound = S0, 100
ground.type = Low
air.type = Low
air.hittime = 50
ground.slidetime = 40
ground.hittime = 50
ground.velocity = 0, -4
air.velocity = 0, -4
down.velocity = 0, 0
air.fall = 1
fall = 1
fall.recover = 0
fall.recovertime = 120
envshake = 1
envshake.time = 30
envshake.freq = 100
envshake.ampl = -6
envshake.phase = 1
bounce = 1
forcestand = 1

[State 1]
type = AfterImageTime
trigger1 = pos y >= 0
time = 0

[State 8]
type = ChangeState
trigger1 = pos y >= 5
value = 4044


;==============================================================================================
[Statedef 2156]
type = A
movetype = H
physics = N
velset = 0, 0

[State 1]
type = ChangeAnim2
trigger1 = time = 0
value = 2156

[State Shadows]
type = Afterimage
trigger1 = time = 0
time = 100
length = 8
PalBright = 0, 0, 0
PalContrast = 128, 128, 128
PalAdd = 0, 0, 0
PalMul = 1, 1, 1
FrameGap = 1
Trans = Add1

[State 2]
type = posfreeze
trigger1 = hitshakeover = 0

[State 3]
type = velset
trigger1 = hitshakeover = 1
x = -7
y = -12
persistent = 0

[State 4]
type = veladd
trigger1 = hitshakeover = 1
y = 0.43

[State 9]
type = SelfState
trigger1 = pos y >= 35 && vel y > 0
value = 5100


;==============================================================================================
[Statedef 94070]
type = A
movetype = A
physics = N
ctrl = 0
anim = 9999

[State Comon]
type = playsnd
trigger1 = time = 0
value = 1, 1
channel = 1
volume = 50

[State die]
type = destroyself
trigger1 = time >= 1


;==============================================================================================
[Statedef 94071]
type = A
movetype = A
physics = N
ctrl = 0
anim = 9999
velset = 0, 0

[State I'm number one]
type = playsnd
trigger1 = time = 0
value = 3, 5
channel = 1
volume = 50

[State die]
type = destroyself
trigger1 = time >= 1


;==============================================================================================
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, Gone]
type= removeexplod
trigger1= ishelper
[State 0, Gone]
type= destroyself
trigger1= ishelper

[State hadouken hit helper]
type = Helper
triggerall = anim=1
trigger1 = animelem = 17
trigger2 = animelem = 28
trigger3 = animelem = 39
trigger4 = animelem = 62
helpertype = normal
name = "stance spark"
pos = 0, 0
postype = p1
stateno =4811
ownpal = 1

[State FireB]
type = Explod
triggerall = anim=1
trigger1 = animelem = 11
persistent = 1
anim = 9404
id = 9404
postype = p1
pos = -40, 0
persistent = 0
sprpriority = -1
ownpal = 1
scale = 0.25, 0.25

[State 52, Land SOund]
type = PlaySnd
triggerall = anim=1
trigger1 = animelem = 11
value = 0, 0

[State 5]
type = EnvShake
triggerall = anim=1
trigger1 = animelem = 11
ignorehitpause = 1
persistent = 0
time = 3
ampl = -2
freq = 180

[State 1]
type = ChangeAnim
triggerall = !fvar(33)
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && Animtime = 0
value = 0

[State 1]
type = ChangeAnim
triggerall = fvar(33)
trigger1 = Anim != 1 && Anim != 5
trigger2 = Anim = 5 && Animtime = 0
value = 1

[State 2]
type = VelSet
trigger1 = time = 0
y = 0

[State 3]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
trigger2 = time = 4
x = 0

[State 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

[State 0, Are you floating?]
type= changeState
triggerall= pos y < 0
trigger1= !numenemy
trigger2= numenemy = 1
trigger2= (enemy, name = "M-NES Game 1" + enemy, name = "M-NES Game 2" + enemy, name = "M-GB Game 1" + enemy, authorname = "Bane84") < 2
trigger3= numenemy >= 2
trigger3= (enemy(0), name = "M-NES Game 1" + enemy(0), name = "M-NES Game 2" + enemy(0), name = "M-GB Game 1" + enemy(0), authorname = "Bane84") < 2
trigger3= (enemy(1), name = "M-NES Game 1" + enemy(1), name = "M-NES Game 2" + enemy(1), name = "M-GB Game 1" + enemy(1), authorname = "Bane84") < 2
value = 50


;==============================================================================================
[Statedef 52]
type = S
physics = S
movetype = U
anim = 47
ctrl = 0

[State Ctrl]
type = ctrlset
trigger1= time = 0 && movetype !=A
value = 1

[State Type]
type = statetypeset
trigger1 = time = 0
movetype = I

[State 52, 1]
type = VelSet
trigger1 = time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = time = 0
y = 0

[State Guard]
type = changestate
trigger1= inguarddist
trigger1= ctrl && command="holdback"
value = 120

[State 52, 3]
type = CtrlSet
trigger1 = Time >= 1
value = 1

[State 52, 4]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0

[State Land Sound]
type = PlaySnd
trigger1 = time = 0
value = 0, 0

[State 52, 5]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 53]
type = S
physics = S
ctrl = 0
anim = 47

[State 52, 1]
type = VelSet
trigger1 = time = 0
y = 0

[State 52, 3]
type = PosSet
trigger1 = time = 0
y = 0

[State 52, Land SOund]
type = PlaySnd
trigger1 = time = 1
value = 0, 0

[State 52, 3]
type = CtrlSet
trigger1 = time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 100]
type = S
physics = N
ctrl = 0
anim = 107
sprpriority = 1

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)
y = 0

[State 100, 1]
type = PosFreeze
trigger1 = 1
value = 1

[State 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 9]
type = changestate
trigger1 = !animtime
value = 101


;==============================================================================================
[Statedef 101]
type = S
movetype = I
physics = N
anim = 108
ctrl = 0
sprpriority = 1

[State PosAdd]
type = PosAdd
trigger1 = time = 0
x= ifelse((p2bodydist x = [-8, 0]), 0, ifelse((p2bodydist x = [0, 35]), ceil(p2bodydist x), 35))

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)
y = 0

[State Guard]
type = changestate
trigger1= inguarddist
trigger1= time >= 1 && command="holdback"
value = 120

[State 100, 1]
type = OffSet
trigger1 = Time < 9
y = ceil(sin(time / 12.0 * pi) * -12.0)

[State 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 9]
type = ChangeState
trigger1 = time >= 9
value = 102


;==============================================================================================
[Statedef 102]
type = S
movetype = I
physics = C
anim = 109
ctrl = 0
sprpriority = 1

[State VelSet]
type = VelSet
trigger1 = time = 0
y = 0

[State PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State Land SOund]
type = PlaySnd
trigger1 = time = 0
value = 0, 0

[State Slide Sound]
type = playsnd
trigger1 = animelem = 1
value = 0, 11
volume = -50

[State dust]
type = MakeDust
trigger1 = 1
pos = -10, -2
spacing = 5

[State 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 9]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 105]
type = S
physics = S
movetype = I
anim = 104
ctrl = 0
velset = 0, 0

[State 105, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.back.x)
y = 0

[State 105, 1]
type = PosFreeze
trigger1 = 1
value = 1

[State 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 9]
type = ChangeState
trigger1 = !animtime
value = 106


;==============================================================================================
[Statedef 106]
type = S
physics = N
movetype = I
anim = 105
velset = 0, 0

[State 106, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.back.x)
y = 0

[State Guard]
type = changestate
trigger1= inguarddist
trigger1= time >= 1 && command="holdback"
value = 120

[State 106, 1]
type = OffSet
trigger1 = Time < 13
y = ceil(sin(time / 13.0 * pi) * -16.0)

[State 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 9]
type = ChangeState
trigger1 = Time >= 13
value = 107


;==============================================================================================
[Statedef 107]
type = S
physics = S
movetype = I
anim = 106
ctrl = 0

[State Land SOund]
type = PlaySnd
trigger1 = time = 0
value = 0, 0

[State 1]
type = velset
trigger1 = time = 0
y = 0

[State 2]
type = PosSet
trigger1 = time = 0
y = 0

[State SlideSound]
type = PlaySnd
trigger1 = time = 0
value = 0, 11
volume = -50

[State Dust]
type = MakeDust
trigger1 = 1
pos = -10, -2
spacing = 5

[State 4]
type = CtrlSet
trigger1 = animtime = -2
value = 1

[State 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 5]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;==============================================================================================
[Statedef 9998]
type = S
velset = 0, 0
anim = 9999

[State Bound]
type = screenbound
trigger1 = 1
value = 0
movecamera = 1, 1

[State End]
type = destroyself
trigger1 = roundstate = 2


;==============================================================================================
[Statedef 9999]
type = A
ctrl = 0
anim = 9999
sprpriority = -5
movetype = I
physics = N

[State 1]
type = Pause
trigger1 = time = 0
time = 5
movetime = 5

[State 5]
type = EnvShake
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
time = 5
ampl = 2
freq = 180

[State varset]
type = varset
trigger1 = root, stateno = [0, 1000]
trigger1 = time = 0
v = 42
value = 0

[State varset]
type = varset
trigger1 = root, stateno = [1000, 3000]
trigger1 = time = 0
v = 42
value = 1

[State varset]
type = varset
trigger1 = root, stateno >= 3000
trigger1 = time = 0
v = 42
value = 2

[State varset]
type = varset
trigger1 = root, var(46) >= 90 || root, var(28) >= 3
trigger1 = root, stateno >= 3000
trigger1 = time = 0
v = 42
value = 3

[State white fadeout]
type = BGPalFx
trigger1 = time = 0
trigger1 = var(42) = 1
add = 255, 255, 255
sinadd = -255, -255, -255, 48
time = 12
ignorehitpause = 1
persistent = 0

[State white fadeout]
type = BGPalFx
trigger1 = time = 0
trigger1 = var(42) = 2
add = 255, 255, 255
time = 10
ignorehitpause = 1
persistent = 0
pausemovetime = 9999

[State white fadeout]
type = BGPalFx
trigger1 = time = 10
trigger1 = var(42) = 2
add = 255, 255, 255
sinadd = -255, -255, -255, 48
time = 12
ignorehitpause = 1
persistent = 0
pausemovetime = 9999

[State red fadeout]
type = BGPalFx
trigger1 = time = 0
trigger1 = var(42) = 3
add = 312, -512, -512
time = 10
ignorehitpause = 1

[State red fadeout]
type = BGPalFx
trigger1 = time = 10
trigger1 = var(42) = 3
add = 312, -512, -512
sinadd = -312, 512, 512, 48
time = 12
ignorehitpause = 1

[State silence]
type = assertspecial
trigger1 = time <= 42
trigger1 = var(42) = 3
flag = nofg

[State effect]
type = Playsnd
trigger1 = time = 0
trigger1 = var(42) = 3 || root, stateno = 3845
trigger2 = var(42) = 3 || root, stateno = 3850
value = 0, 13
channel = 0
persistent = 0
volume = 255
ignorehitpause = 1
abspan = 0

[State 6008]
type = destroyself
trigger1 = roundstate < 3


;==============================================================================================
[Statedef 5205]
type = A
physics = N
movetype = H

[State 5205, Anim]
type = changeanim
trigger1 = !animtime
trigger1 = anim=5035
value = 5050

[State 5205, Accel]
type = veladd
trigger1 = 1
y = gethitvar(yaccel)

[State 5205, Ground]
type= selfstate
trigger1= vel y > 0
trigger1= pos y >= const(movement.air.gethit.groundrecover.groundlevel)
value= 5200

[State Air]
type = SelfState
trigger1 = time >= 60
value = 5210


;============================================================================================== 
[Statedef 5200]
type = A
movetype = H
physics = N

[State Anim]
type = changeanim
trigger1 = anim = 5035 && !animtime
value = 5050

[State Vel]
type = veladd
trigger1 = 1
y = gethitvar(yaccel)

[State End]
type = SelfState
trigger1 = vel y > 0 && pos y >= -10
value = 5201


[Statedef 5201]
type = A
physics = N
movetype = I
anim = 5200
ctrl = 0
facep2 = 1
velset = 0, 0

[State Pos]
type = posset
trigger1 = time = 0
y = 0

[State Vel]
type = veladd
trigger1 = animelemtime(3) >= 0
y = 0.5

[State Vel]
type = velset
trigger1 = animelem = 3
x = -3
y = -4

[State Pos]
type = posadd
trigger1 = animelem = 2
x = ceil(-6 * const(size.xscale))

[State Pos]
type = posadd
trigger1 = animelem = 3
x = ceil(-16 * const(size.xscale))

[State Snd]
type = playsnd
trigger1 = !time
value = 3, 5
channel = 0

[State Flash]
type = palfx
trigger1 = !time
add = 255, 255, 255
sinadd = -255, -255, -255, 40
time = 10

[State Land Sound]
type = PlaySnd
trigger1 = time = 0
value = 0, 0

[State Dust]
type = explod
trigger1 = time = 0
anim = F60
pos = 0, 0

[State NHB]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State End]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 5202
ctrl = 1


[Statedef 5202]
type = S
physics = S
movetype = I
anim = 47
ctrl = 1
velset = 0, 0

[State 5202, 2]
type = PosSet
trigger1 = time = 0
y = 0

[State 5202, 5]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;============================================================================================== 
[Statedef 5210]
type = A
movetype = I
physics = N
anim = 5210
ctrl = 0

[State Snd]
type = playsnd
trigger1 = !time
value = 3, 5
channel = 0

[State flash]
type = palfx
trigger1 = !time
add = 255, 255, 255
sinadd = -255, -255, -255, 40
time = 10

[State Accel]
type = veladd
trigger1 = 1
y = 0.6

[State Vel]
type = velset
trigger1 = !time
x = ifelse((command = "holdfwd" && command != "holdback"), 4, ifelse((command != "holdfwd" && command = "holdback"), -4, 0))
y = -7.55

[State 5210, Turn]
type = turn
trigger1 = !time
trigger1 = p2dist x < 0

[State NHB]
type = nothitby
trigger1 = time<14
value = SCA
time = 1

[State ctrl]
type = ctrlset
trigger1 = time >= 14
value = 1

[State Land]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52


;==============================================================================================
[Statedef 5900]
type = S

[State 1]
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 2]
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State Defense Bonus]
type = varset
trigger1 = 1
var(44) = 0

[State 3]
type = RemapPal
trigger1 = 1
source = 1, 1
dest = 1, palno

[State 4]
type = ChangeState
trigger1 = roundno = 1
value = 190

[State 4]
type = changestate
trigger1 = !time && teammode = turns
trigger1 = roundsexisted = 0 && roundno >= 2
value = 190

[State 5]
type = ChangeState
trigger1 = 1
value = 0


;==============================================================================================
[Statedef -2]

[State -2, P2 Safe Fall]
type = targetstate
trigger1 = numtarget=1
trigger1 = target, command = "recovery"
trigger1 = target, gethitvar(fall.recover)
trigger1 = target, alive && target, hitfall
trigger1 = target, pos y >= -48 && target, vel y > 0
trigger1 = target, stateno = 5030 || target, stateno = 5035 || target, stateno = 5050 || target, stateno = 5071
value = 5205
ignorehitpause = 1

[State -2, Throws Disallowed]
type= varset
triggerall= numenemy
trigger1= enemynear, movetype != H
trigger1= enemynear, stateno != 140
trigger1= (enemynear, ctrl && enemynear, time >= 1) || (enemynear, time >= 8)
trigger2= enemynear, movetype = A
trigger3= (enemynear, stateno != [0, 52]) && (enemynear, stateno != [120, 155]) && (enemynear, stateno != [5000, 5120])
var(39)= 0

[State -2, Throws Disallowed]
type= varset
triggerall= numenemy
trigger1= enemynear, stateno = [150, 155]
trigger2= (enemynear, stateno = 51 || enemynear, stateno = 140) && (enemynear, prevstateno = [150, 155])
trigger3= enemynear, movetype = H && enemynear, statetype != A && var(10) <= 0
trigger4= enemynear, stateno = 40 && enemynear, prevstateno != 52 && (enemynear, anim != [0, 29])
var(39)= 1
ignorehitpause= 1

[State Tech]
type = varadd
trigger1 = var(27)>0
var(27) = -1

[State -2, Stance Type]
type = varset
trigger1 = (stateno!=[0, 12]) && stateno!=52
fvar(33) = 0

[State -2, Stance Type]
type = varset
triggerall = stateno!=52
trigger1 = stateno = 0 && time >= 166
trigger1 = !(time % 83) && random < 500
trigger2 = stateno = 11 && time>=30
trigger3 = stateno = 20 && vel x < 0
trigger4 = stateno = 107
trigger5 = stateno = 196 || stateno = 11050
fvar(33) = 1

[State ai randomizer]
type = varrandom
trigger1 = timemod = 40, 30
v = 40
range = 0, 100

[State -2, ChangeState]
type = ChangeState
trigger1 = stateno
trigger1 = (RoundState = 3) && (StateType != A) && (Ctrl)
value = 0

[State Shinryuken]
type = PlaySnd
trigger1 = numexplod(2500) > 0
trigger1 = (gametime%12) = 1
ignorehitpause = 1
value = 2, 7
channel = 3

[State var(6) facedif]
type = varset
trigger1 = numenemy
trigger1 = facing = (enemy, facing)
v = 6
value = 1

[State var(6) facedif]
type = varset
trigger1 = numenemy
trigger1 = facing != (enemy, facing)
v = 6
value = 0

[State Randomizer]
type = varrandom
trigger1 = 1
v = 43
range = -11, 11

[State Randomizer]
type = varrandom
trigger1 = 1
v = 45
range = -11, 11

[State FireB]
type = Explod
trigger1 = numenemy
trigger1 = numexplod(2500) > 0
anim = 12217
id = 12217
postype = p2
pos = -10, -40
ignorehitpause = 1
random = 50, 40
sprpriority = 5
ownpal = 1
vel = -2*(enemy, vel x), (var(45))
scale = 0.1, 0.75
accel = 0, 1/2*(var(45))
pausemovetime = 9999

[State -2, Var(33) AI Differentiate air combos]
type = Varset
trigger1 = stateno = 50 && vel x = 0
v = 33
value = 1

[State -2, Var(33)reset AI Differentiate air combos Cummulative problems cautionary action]
type = Varset
trigger1 = stateno = 1852 && animtime = 0
v = 33
value = 0

[State Removeburstknuckle]
type = RemoveExplod
trigger1 = stateno != 3875 && stateno != 3876 && stateno != 3877 && stateno != 3878 && stateno != 10000 && stateno != 10001 && stateno != 10002
id = 3910

[State -2, Removeburstknuckle]
type = RemoveExplod
trigger1 = stateno != 4020 && stateno != 4043
id = 100

[State Remove Fist Fire 4]
type = RemoveExplod
trigger1 = stateno != 1710 && stateno != 3460 && stateno != 3470
id = 2603

[State -2, CountDown]
type = VarAdd 
trigger1 = Var(11) > 0
var(11) = -1 
ignorehitpause = 1

[State CC Power]
type = poweradd
trigger1 = (gametime%2) = 1
trigger1 = var(10) > 0
ignorehitpause = 1
value = -15

[State -2, afterimages]
type = Afterimagetime
trigger1 = var(10) > 0
trigger1 = power = 0
trigger2 = var(10) = 1
time = 0

[State -2, CC Timer]
type = VarAdd 
trigger1 = Var(10) >= 1
var(10) = -1 
ignorehitpause = 1

[State -2, VarSet]
type = poweradd
trigger1 = movetype = H
trigger1 = var(10) > 0
value = -1500

[State -2, VarSet]
type = poweradd
trigger1 = var(28) > 0
trigger1 = var(10) > 0
value = -3000

[State -2, VarSet]
type = VarSet
trigger1 = var(28) > 0
trigger1 = var(10) > 0
var(29) = 1

[State -2, VarSet]
type = VarSet
trigger1 = var(28) = 0
var(29) = 0

[State -2, VarSet]
type = VarSet
trigger1 = movetype = H
var(10) = 0

[State -2, VarSet]
type = VarSet
trigger1 = movetype = H
var(28) = 0

[State -2, Juggling for Rage Burst]
type = AssertSpecial
trigger1 = var(10) >= 1
trigger2 = roundstate >= 3
flag = nojugglecheck

[State -2, CC Blocking]
type = Assertspecial
trigger1 = var(10) >= 1
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard

[State CC PalFX]
type = palfx
trigger1 = var(10) >= 1
time = 2
add = floor(80 / (power / 600.0 + 1)) + ceil(sin(gametime / 16.0*pi) * 20), 10 + ceil(sin(gametime / 16.0*pi) * 20), 10 + ceil(sin(gametime / 16.0*pi) * 20)
ignorehitpause = 1

[State -2, shadowrem]
type = afterimagetime
trigger1 = movetype = H
time = 0

[State -2, VarSet]
type = VarSet
trigger1 = var(10) >= 1
trigger1 = power <= 0
var(10) = 0

[State -2, Hitcount]
type = varadd
trigger1 = movehit=1
trigger2 = projhit=1
var(17) = 1

[State -2, Hitcount Reset]
type = varset
trigger1 = numenemy && var(17)
trigger1 = (enemynear, movetype != H) && (enemynear, anim != [5300, 5301])
trigger1 = (stateno != 1700 || prevstateno != 2100) && stateno != 1710
trigger1 = (stateno != 1820 || prevstateno != 2200) && stateno != 1821 && stateno != 1822
trigger1 = stateno != 1862 || prevstateno != 2210
trigger1 = stateno != 1867 || prevstateno != 2211
var(17) = 0
ignorehitpause = 1

[State -2, Damage Scaling - Normal]
type = varset
trigger1 = 1
fvar(10) = ifelse(var(17) >= 28, 4, ifelse(var(17) <= 0, 32, 32 - var(17))) / 32.0
ignorehitpause = 1

[State -2, Damage Scaling - Custom Combo]
type = varset
trigger1 = var(10) >= 1
fvar(10) = 0.75 * ifelse(var(17) >= 28, 4, ifelse(var(17) <= 0, 32, 32 - var(17))) / 32.0
ignorehitpause = 1

[State -2, Damage Scaling Limit]
type = varset
trigger1 = fvar(10) < 0.125
fvar(10) = 0.125
ignorehitpause = 1

[State -2, Damage Scaling - Root Multiplier]
type = attackmulset
trigger1 = 1
value = fvar(10)
ignorehitpause = 1

[State -2, Defense Bonus]
type = DefenceMulSet
trigger1 = var(44) >= 1
value = ifelse(var(44) >= 3, 0.85, ifelse(var(44) = 2, 0.90, 0.95))

[State KO Screen 1]
type = helper
trigger1 = winko
trigger1 = numhelper(9999) = 0
helpertype = normal
name = "lookatdaflashyfxduhh..."
id = 9999
pos = 0, 0
bindtime = -1
postype = left
stateno = 9999
keyctrl = 0
ignorehitpause = 1
ownpal = 1
pausemovetime = 9999
supermovetime = 9999

[State -2, Debug]
type = DisplaytoClipboard
trigger1= 1
text = "Attack = %f  Defense = %f  AI Throttle = %f"
params = fvar(10), ifelse(var(44) >= 3, 0.85, ifelse(var(44) = 2, 0.90, ifelse(var(44) = 1, 0.95, 1.00))), (AIlevel ** 2 / 64.0)
ignorehitpause = 1

[State -2, Debug]
type = appendtoclipboard
trigger1 = 1
text= "\nhttp://www.reubenkee.com/"
ignorehitpause = 1


;==============================================================================================
[Statedef -3]

[State -3, P2 Facing]
type= targetfacing
trigger1= movecontact = 1 && numtarget = 1
trigger1= !(target, Hitshakeover) && !(target, Hitfall) && (target, time <= 1)
value= ifelse(p2dist x >= 0, -1, 1)
ignorehitpause = 1

[State -3, Underground Juggle Prevention]
type = targetbind
trigger1 = movecontact = 1
trigger1 = numtarget && numenemy
trigger1 = (target, time = 0) && (target, ID = enemynear, ID)
trigger1 = !(target, hitshakeover) && (target, pos y > 0)
pos = ceil(p2dist x), ceil(-pos y)
ignorehitpause = 1

[State -3, Dash-in Dust]
type = makedust
trigger1 = abs(vel x) >= 1
trigger1 = prevstateno = [100, 107]
trigger1 = stateno = [200, 599]
pos = 0, 0
spacing = 3

[State -3, lightpain]
type = playsnd
triggerall = random < 400
triggerall = time = 1
triggerall = alive = 1
trigger1 = stateno = 5000 && anim = 5000
trigger2 = stateno = 5000 && anim = 5010
trigger3 = stateno = 5010 && anim = 5020
trigger4 = stateno = 5020 && anim = 5000
trigger5 = stateno = 5020 && anim = 5010
value = 10, 1
volume = 75
channel = 0

[State -3, midpain]
type = playsnd
triggerall = random < 400
triggerall = time = 1
triggerall = alive = 1
trigger1 = stateno = 5000 && anim = 5001
trigger2 = stateno = 5000 && anim = 5011
trigger3 = stateno = 5010 && anim = 5021
trigger4 = stateno = 5020 && anim = 5001
trigger5 = stateno = 5020 && anim = 5011
value = 10, 2
volume = 75
channel = 0

[State -3, heavypain]
type = playsnd
triggerall = random < 400
triggerall = time = 1
trigger1 = stateno = 5000 && anim = 5002
trigger2 = stateno = 5000 && anim = 5012
trigger3 = stateno = 5010 && anim = 5022
trigger4 = stateno = 5020 && anim = 5002
trigger5 = stateno = 5020 && anim = 5012
trigger6 = stateno = 5070
trigger7 = stateno = 5080
value = 10, 3
volume = 75
channel = 0

[State 1]
type = Playerpush
trigger1 = winko
value = 0
ignorehitpause = 1
